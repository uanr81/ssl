<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.1, http://www.gnu.org/software/texinfo/ -->
<head>
<title>Руководство OpenSSL 1.1.1a  20 Nov 2018</title>

<meta name="description" content="Руководство OpenSSL 1.1.1a  20 Nov 2018">
<meta name="keywords" content="Руководство OpenSSL 1.1.1a  20 Nov 2018">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="#Top" rel="start" title="Top">
<link href="dir.html#Top" rel="up" title="(dir)">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<h1 class="settitle" align="center">Руководство OpenSSL 1.1.1a  20 Nov 2018</h1>
<a name="Top"></a>
<div class="header">
<p>
Next: <a href="#OpenSSL" accesskey="n" rel="next">OpenSSL</a>, Previous: <a href="dir.html#Top" accesskey="p" rel="prev">(dir)</a>, Up: <a href="dir.html#Top" accesskey="u" rel="up">(dir)</a> &nbsp; </p>
</div>
<a name="OpenSSL-verkhnii-uzel"></a>
<h1 class="top">OpenSSL верхний узел</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#OpenSSL" accesskey="1">OpenSSL</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#CONFIG" accesskey="2">CONFIG</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#g_t_041f_0440_0438_043c_0435_0440-_043a_043e_043d_0444_0438_0433_0443_0440_0430_0446_0438_0438-OpenSSL" accesskey="3">Пример конфигурации OpenSSL</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#X509V3_005fCONFIG" accesskey="4">X509V3_CONFIG</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#CA" accesskey="5">CA</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#X509" accesskey="6">X509</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#req" accesskey="7">req</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#ASN1PARSE" accesskey="8">ASN1PARSE</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#CIPHERS" accesskey="9">CIPHERS</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#CMS">CMS</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#CRL">CRL</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#CRL2PKCS7">CRL2PKCS7</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#STOREUTL">STOREUTL</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#SSL_005fCONNECT">SSL_CONNECT</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#g_t_0418_043d_0441_0442_0440_0443_043a_0446_0438_044f">Инструкция</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="OpenSSL"></a>
<div class="header">
<p>
Next: <a href="#CONFIG" accesskey="n" rel="next">CONFIG</a>, Previous: <a href="#Top" accesskey="p" rel="prev">Top</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>
<a name="OPENSSL"></a>
<h2 class="chapter">1 OPENSSL</h2>
<dl compact="compact">
<dt>NAME</dt>
<dd><p>openssl - OpenSSL инструмент командной строки
</p>
</dd>
<dt>SYNOPSIS</dt>
<dd><p>openssl command [ command_opts ] [ command_args ]
</p>
<p>openssl list [ standard-commands | digest-commands | cipher-commands |
       cipher-algorithms | digest-algorithms | public-key-algorithms]
</p>
<p>openssl no-XXX [ arbitrary options ]
</p>
</dd>
<dt>DESCRIPTION</dt>
<dd><p>OpenSSL - это криптографический инструментарий, реализующий сетевые
       протоколы Secure Sockets Layer (SSL v2/v3) и Transport Layer Security (TLS v1) и
       соответствующие им стандарты криптографии.
</p>
<p>Программа openssl - это инструмент командной строки для использования
       различных криптографических функций криптографической библиотеки OpenSSL
       из оболочки. Может использоваться для
</p><ul>
<li> Создание и управление закрытыми ключами, открытыми ключами и параметрами

</li><li> Криптографические операции с открытым ключом

</li><li> Создание сертификатов X.509, CSR и CRL

</li><li> Расчет дайджестов сообщений

</li><li> Шифрование и дешифрование с помощью шифров

</li><li> SSL/TLS Client и  Server тестирование

</li><li> Обработка подписанной или зашифрованной почты S/MIME

</li><li> Запросы отметок времени, генерация и проверка

</li></ul>
</dd>
<dt>COMMAND SUMMARY</dt>
<dd><p>Программа openssl предоставляет широкий спектр команд (команда в SYNOPSIS выше),
       каждая из которых часто имеет множество опций и аргументов (command_opts и command_args
       в SYNOPSIS).
</p>
<p>Подробная документация и варианты использования для большинства стандартных
       подкоманд доступны (x509(1) или openssl-x509(1)).
</p>
<p>Многие команды используют внешний файл конфигурации для некоторых или всех
       своих аргументов и имеют опцию -config, чтобы указать этот файл. Переменная
       окружения OPENSSL_CONF может использоваться для указания местоположения файла.
       Если переменная среды не указана, то файл называется openssl.cnf в области
       хранения сертификатов по умолчанию, значение которого зависит от флагов
       конфигурации, указанных при сборке OpenSSL.
</p>
<p>Параметры списка standard-commands, digest-commands, и cipher-commands выводят
       список (по одной записи в строке) имен всех стандартных команд, команд дайджеста
       сообщений или команд шифрования, соответственно, доступных в настоящей
       утилите openssl.
</p>
<p>Параметры списка cipher-algorithms и digest-algorithms содержат список всех
       имен шифров и дайджестов сообщений, по одной записи в строке. Псевдонимы
       перечислены как:
</p>
<p>from =&gt; to
</p>
<p>Параметр list public-key-algorithms перечисляет все поддерживаемые алгоритмы
       открытого ключа.
</p>
<p>Команда no-XXX проверяет, доступна ли команда с указанным именем. Если команда
       с именем XXX не существует, она возвращает 0 (успех) и печатает no-XXX; в противном
       случае возвращает 1 и печатает XXX. В обоих случаях вывод идет в стандартный вывод,
       и в стандартный вывод ничего не выводится. Дополнительные аргументы командной строки
       всегда игнорируются. Поскольку для каждого шифра существует команда с одинаковым именем,
       это позволяет сценариям оболочки легко проверять наличие шифров в программе openssl.
       (no-XXX не может обнаружить pseudo-commands, такой как выход, список или сам no-XXX.)
</p>
</dd>
<dt>Standard Commands</dt>
<dd><dl compact="compact">
<dt>asn1parse</dt>
<dd><p>Разобрать последовательность ASN.1.
</p>
</dd>
<dt>ca</dt>
<dd><p>Управление Certificate Authority (CA).
</p>
</dd>
<dt>ciphers</dt>
<dd><p>Описание, определение набора шифров.
</p>
</dd>
<dt>cms</dt>
<dd><p>CMS (Синтаксис криптографических сообщений) утилита.
</p>
</dd>
<dt>crl</dt>
<dd><p>Управление списком отзыва сертификатов (CRL).
</p>
</dd>
<dt>crl2pkcs7</dt>
<dd><p>Конвертация CRL в PKCS#7.
</p>
</dd>
<dt>dgst</dt>
<dd><p>Расчет дайджеста сообщения.
</p>
</dd>
<dt>dh</dt>
<dd><p>Diffie-Hellman Управление параметрами. Отменено dhparam(1).
</p>
</dd>
<dt>dhparam</dt>
<dd><p>Генерация и управление параметрами Diffie-Hellman. Заменены
           genpkey(1) и pkeyparam(1).
</p>
</dd>
<dt>dsa</dt>
<dd><p>DSA Управление данными.
</p>
</dd>
<dt>dsaparam</dt>
<dd><p>DSA Генерация параметров и управление ими. Заменены genpkey(1)
           и pkeyparam(1).
</p>
</dd>
<dt>ec</dt>
<dd><p>Обработка ключа EC (эллиптическая кривая).
</p>
</dd>
<dt>ecparam</dt>
<dd><p>манипулирование и генерация параметров EC.
</p>
</dd>
<dt>enc</dt>
<dd><p>Кодирование с помощью шифров.
</p>
</dd>
<dt>engine</dt>
<dd><p>Engine (загружаемый модуль) информация и манипуляции.
</p>
</dd>
<dt>errstr</dt>
<dd><p>Преобразование номера ошибки в строку ошибки.
</p>
</dd>
<dt>gendh</dt>
<dd><p>Генерация параметров Diffie-Hellman. Отменено dhparam(1).
</p>
</dd>
<dt>gendsa</dt>
<dd><p>Генерация закрытого ключа DSA из параметров. Заменено на
           genpkey(1) и pkey(1).
</p>
</dd>
<dt>genpkey</dt>
<dd><p>Генерация закрытого ключа или параметров.
</p>
</dd>
<dt>genrsa</dt>
<dd><p>Генерация RSA Private Key. Заменено на genpkey(1).
</p>
</dd>
<dt>nseq</dt>
<dd><p>Создайте или проверьте последовательность сертификатов Netscape.
</p>
</dd>
<dt>ocsp</dt>
<dd><p>Утилита онлайн-протокола статуса сертификата.
</p>
</dd>
<dt>passwd</dt>
<dd><p>Генерация хешированных паролей.
</p>
</dd>
<dt>pkcs12</dt>
<dd><p>PKCS#12 Управление данными.
</p>
</dd>
<dt>pkcs7</dt>
<dd><p>PKCS#7 Управление данными.
</p>
</dd>
<dt>pkcs8</dt>
<dd><p>Инструмент преобразования закрытых ключей в формате PKCS#8.
</p>
</dd>
<dt>pkey</dt>
<dd><p>Управление открытым и закрытым ключом.
</p>
</dd>
<dt>pkeyparam</dt>
<dd><p>Управление параметрами алгоритма открытого ключа.
</p>
</dd>
<dt>pkeyutl</dt>
<dd><p>Утилита криптографических операций с алгоритмом открытого ключа.
</p>
</dd>
<dt>prime</dt>
<dd><p>Вычислить простые числа.
</p>
</dd>
<dt>rand</dt>
<dd><p>Генерация псевдослучайных байтов.
</p>
</dd>
<dt>rehash</dt>
<dd><p>Создайте символические ссылки на файлы сертификатов и CRL, названные
           значениями хеша.
</p>
</dd>
<dt>req</dt>
<dd><p>PKCS#10 X.509 Запрос на подпись сертификата (CSR) Management.
</p>
</dd>
<dt>rsa</dt>
<dd><p>управление ключами RSA.
</p>
</dd>
<dt>rsautl</dt>
<dd><p>Утилита RSA для подписи, проверки, шифрования и дешифрования. Заменено
           на pkeyutl(1).
</p>
</dd>
<dt>s_client</dt>
<dd><p>Это реализует универсальный клиент SSL/TLS, который может установить
           прозрачное соединение с удаленным сервером, говорящим на SSL/TLS. Он
           предназначен только для целей тестирования и предоставляет только
           элементарные функциональные возможности интерфейса, но внутренне
           использует в основном все функциональные возможности библиотеки
           OpenSSL ssl.
</p>
</dd>
<dt>s_server</dt>
<dd><p>Это реализует универсальный сервер SSL/TLS, который принимает
           соединения от удаленных клиентов, говорящих на SSL/TLS. Он
           предназначен только для целей тестирования и предоставляет
           только элементарные функциональные возможности интерфейса,
           но внутренне использует в основном все функциональные возможности
           библиотеки OpenSSL ssl. Он предоставляет как собственный
           ориентированный на командную строку протокол для тестирования
           функций SSL, так и простое средство ответа HTTP для эмуляции
           веб-сервера SSL/TLS-aware.
</p>
</dd>
<dt>s_time</dt>
<dd><p>SSL Таймер подключения.
</p>
</dd>
<dt>sess_id</dt>
<dd><p>SSL Управление данными сеанса.
</p>
</dd>
<dt>smime</dt>
<dd><p>S/MIME обработка почты.
</p>
</dd>
<dt>speed</dt>
<dd><p>Алгоритм измерения скорости.
</p>
</dd>
<dt>spkac</dt>
<dd><p>SPKAC печатная и генерирующая утилита.
</p>
</dd>
<dt>srp</dt>
<dd><p>Сохраните файл паролей SRP.
</p>
</dd>
<dt>storeutl</dt>
<dd><p>Утилита для отображения сертификатов,
           ключей, CRLs и т.п.
</p>
</dd>
<dt>ts</dt>
<dd><p>Инструмент Штамповки Времени (client/server).
</p>
</dd>
<dt>verify</dt>
<dd><p>X.509 Проверка сертификата.
</p>
</dd>
<dt>version</dt>
<dd><p>OpenSSL Информация о версии.
</p>
</dd>
<dt>x509</dt>
<dd><p>X.509 Управление данными сертификата.
</p></dd>
</dl>
</dd>
<dt>Команды для дайджеста сообщений</dt>
<dd><dl compact="compact">
<dt>blake2b512</dt>
<dd><p>BLAKE2b-512 дайджест
</p>
</dd>
<dt>blake2s256</dt>
<dd><p>BLAKE2s-256 дайджест
</p>
</dd>
<dt>md2</dt>
<dd><p>MD2 дайджест
</p>
</dd>
<dt>md4</dt>
<dd><p>MD4 дайджест
</p>
</dd>
<dt>md5</dt>
<dd><p>MD5 дайджест
</p>
</dd>
<dt>mdc2</dt>
<dd><p>MDC2 дайджест
</p>
</dd>
<dt>rmd160</dt>
<dd><p>RMD-160 дайджест
</p>
</dd>
<dt>sha1</dt>
<dd><p>SHA-1 дайджест
</p>
</dd>
<dt>sha224</dt>
<dd><p>SHA-2 224 дайджест
</p>
</dd>
<dt>sha256</dt>
<dd><p>SHA-2 256 дайджест
</p>
</dd>
<dt>sha384</dt>
<dd><p>SHA-2 384 дайджест
</p>
</dd>
<dt>sha512</dt>
<dd><p>SHA-2 512 дайджест
</p>
</dd>
<dt>sha3-224</dt>
<dd><p>SHA-3 224 дайджест
</p>
</dd>
<dt>sha3-256</dt>
<dd><p>SHA-3 256 дайджест
</p>
</dd>
<dt>sha3-384</dt>
<dd><p>SHA-3 384 дайджест
</p>
</dd>
<dt>sha3-512</dt>
<dd><p>SHA-3 512 дайджест
</p>
</dd>
<dt>shake128</dt>
<dd><p>SHA-3 SHAKE128 дайджест
</p>
</dd>
<dt>shake256</dt>
<dd><p>SHA-3 SHAKE256 дайджест
</p>
</dd>
<dt>sm3</dt>
<dd><p>SM3 дайджест
</p></dd>
</dl>
</dd>
<dt>Команды кодирования и шифрования</dt>
<dd><p>Следующие псевдонимы обеспечивают удобный доступ к наиболее часто
       используемым кодировкам и шифрам.
</p>
<p>В зависимости от того, как был настроен и построен OpenSSL, могут
       присутствовать не все перечисленные здесь шифры. См. Enc (1) для
       получения дополнительной информации и использования команды.
</p><dl compact="compact">
<dt>aes128, aes-128-cbc, aes-128-cfb, aes-128-ctr, aes-128-ecb, aes-128-ofb</dt>
<dd><p>AES-128 Cipher
</p>
</dd>
<dt>aes192, aes-192-cbc, aes-192-cfb, aes-192-ctr, aes-192-ecb, aes-192-ofb</dt>
<dd><p>AES-192 Cipher
</p>
</dd>
<dt>aes256, aes-256-cbc, aes-256-cfb, aes-256-ctr, aes-256-ecb, aes-256-ofb</dt>
<dd><p>AES-256 Cipher
</p>
</dd>
<dt>aria128, aria-128-cbc, aria-128-cfb, aria-128-ctr, aria-128-ecb,aria-128-ofb</dt>
<dd><p>Aria-128 Cipher
</p>
</dd>
<dt>aria192, aria-192-cbc, aria-192-cfb, aria-192-ctr, aria-192-ecb, aria-192-ofb</dt>
<dd><p>Aria-192 Cipher
</p>
</dd>
<dt>aria256, aria-256-cbc, aria-256-cfb, aria-256-ctr, aria-256-ecb, aria-256-ofb</dt>
<dd><p>Aria-256 Cipher
</p>
</dd>
<dt>base64</dt>
<dd><p>Base64 Encoding
</p>
</dd>
<dt>bf, bf-cbc, bf-cfb, bf-ecb, bf-ofb</dt>
<dd><p>Blowfish Cipher
</p>
</dd>
<dt>camellia128, camellia-128-cbc, camellia-128-cfb, camellia-128-ctr, camellia-128-ecb, camellia-128-ofb</dt>
<dd><p>Camellia-128 Cipher
</p>
</dd>
<dt>camellia192, camellia-192-cbc, camellia-192-cfb, camellia-192-ctr, camellia-192-ecb, camellia-192-ofb</dt>
<dd><p>Camellia-192 Cipher
</p>
</dd>
<dt>camellia256, camellia-256-cbc, camellia-256-cfb, camellia-256-ctr, camellia-256-ecb, camellia-256-ofb</dt>
<dd><p>Camellia-256 Cipher
</p>
</dd>
<dt>cast, cast-cbc</dt>
<dd><p>CAST Cipher
</p>
</dd>
<dt>cast5-cbc, cast5-cfb, cast5-ecb, cast5-ofb</dt>
<dd><p>CAST5 Cipher
</p>
</dd>
<dt>chacha20</dt>
<dd><p>Chacha20 Cipher
</p>
</dd>
<dt>des, des-cbc, des-cfb, des-ecb, des-ede, des-ede-cbc, des-ede-cfb, des-ede-ofb, des-ofb</dt>
<dd><p>DES Cipher
</p>
</dd>
<dt>des3, desx, des-ede3, des-ede3-cbc, des-ede3-cfb, des-ede3-ofb</dt>
<dd><p>Triple-DES Cipher
</p>
</dd>
<dt>idea, idea-cbc, idea-cfb, idea-ecb, idea-ofb</dt>
<dd><p>IDEA Cipher
</p>
</dd>
<dt>rc2, rc2-cbc, rc2-cfb, rc2-ecb, rc2-ofb</dt>
<dd><p>RC2 Cipher
</p>
</dd>
<dt>rc4</dt>
<dd><p>RC4 Cipher
</p>
</dd>
<dt>rc5, rc5-cbc, rc5-cfb, rc5-ecb, rc5-ofb</dt>
<dd><p>RC5 Cipher
</p>
</dd>
<dt>seed, seed-cbc, seed-cfb, seed-ecb, seed-ofb</dt>
<dd><p>SEED Cipher
</p>
</dd>
<dt>sm4, sm4-cbc, sm4-cfb, sm4-ctr, sm4-ecb, sm4-ofb</dt>
<dd><p>SM4 Cipher
</p></dd>
</dl>
</dd>
<dt>OPTIONS</dt>
<dd><p>Подробная информация о доступных параметрах зависит от конкретной
       команды. В этом разделе описываются некоторые общие параметры с
       общим поведением.
</p>
</dd>
<dt>Общие параметры</dt>
<dd><dl compact="compact">
<dt>-help</dt>
<dd><p>Предоставляет краткий обзор всех вариантов.
</p>
</dd>
<dt>Параметры передачи фразы</dt>
<dd><p>Несколько команд принимают аргументы пароля, обычно используя
       -passin и -passout для паролей ввода и вывода соответственно. Это
       позволяет получить пароль из разных источников. Обе эти опции
       принимают один аргумент, формат которого описан ниже. Если аргумент
       пароля не задан и пароль требуется, то пользователю предлагается
       ввести его: он обычно будет считываться с текущего терминала
       с отключенным эхом.
</p>
<p>Обратите внимание, что кодировка символов может иметь значение,
       детальнее смотри passphrase-encoding.
</p><dl compact="compact">
<dt>pass:password</dt>
<dd><p>Фактический пароль - это пароль. Поскольку пароль виден
           утилитам (например, &rsquo;ps&rsquo; в Unix), эту форму следует
           использовать только там, где безопасность не важна.
</p>
</dd>
<dt>env:var</dt>
<dd><p>Получите пароль из переменной окружения var. Поскольку окружение
           других процессов видно на определенных платформах (например,
           ps под определенным Unix OSes), этот параметр следует
           использовать с осторожностью.
</p>
</dd>
<dt>file:pathname</dt>
<dd><p>Первая строка пути - это пароль. Если один и тот же аргумент
           pathname предоставляется аргументам -passin и -passout, то
           первая строка будет использоваться для входного пароля, а
           следующая строка для выходного пароля. путь не должен
           ссылаться на обычный файл: он может, например, ссылаться на
           устройство или именованный канал.
</p>
</dd>
<dt>fd:number</dt>
<dd><p>Прочитайте пароль от номера дескриптора файла. Это может быть
           использовано для отправки данных, например, по каналу.
</p>
</dd>
<dt>stdin</dt>
<dd><p>Прочитайте пароль от стандартного ввода.
</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>SEE ALSO</dt>
<dd><p>asn1parse(1), ca(1), ciphers(1), cms(1), config(5), crl(1),
       crl2pkcs7(1), dgst(1), dhparam(1), dsa(1), dsaparam(1), ec(1),
       ecparam(1), enc(1), engine(1), errstr(1), gendsa(1), genpkey(1),
       genrsa(1), nseq(1), ocsp(1), passwd(1), pkcs12(1), pkcs7(1), pkcs8(1),
       pkey(1), pkeyparam(1), pkeyutl(1), prime(1), rand(1), rehash(1),
       req(1), rsa(1), rsautl(1), s_client(1), s_server(1), s_time(1),
       sess_id(1), smime(1), speed(1), spkac(1), srp(1), storeutl(1), ts(1),
       verify(1), version(1), x509(1), crypto(7), ssl(7), x509v3_config(5)
</p>
</dd>
<dt>HISTORY</dt>
<dd><p>Псевдокоманды list-XXX-алгоритмы были добавлены в OpenSSL 1.0.0;
       Примечания о доступности других команд см. На отдельных
       страницах справочника.
</p>
</dd>
<dt>COPYRIGHT</dt>
<dd><p>Copyright 2000-2018 The OpenSSL Project Authors. All Rights Reserved.
</p>
<p>Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
       this file except in compliance with the License.  You can obtain a copy
       in the file LICENSE in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.
</p></dd>
</dl>
<p>1.1.1a                            2018-11-20                        OPENSSL(1)
</p><hr>
<a name="CONFIG"></a>
<div class="header">
<p>
Next: <a href="#g_t_041f_0440_0438_043c_0435_0440-_043a_043e_043d_0444_0438_0433_0443_0440_0430_0446_0438_0438-OpenSSL" accesskey="n" rel="next">Пример конфигурации OpenSSL</a>, Previous: <a href="#OpenSSL" accesskey="p" rel="prev">OpenSSL</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>
<a name="CONFIG-1"></a>
<h2 class="chapter">2 CONFIG</h2>
<p>CONFIG(5)                           OpenSSL                          CONFIG(5)
</p><dl compact="compact">
<dt>NAME</dt>
<dd><p>config - OpenSSL CONF файлы конфигурации библиотеки
</p>
</dd>
<dt>DESCRIPTION</dt>
<dd><p>Библиотека OpenSSL CONF может использоваться для чтения файлов
       конфигурации. Он используется для главного файла конфигурации
       OpenSSL openssl.cnf и в некоторых других местах, таких как
       файлы SPKAC и файлы расширений сертификатов для утилиты x509.
       Приложения OpenSSL также могут использовать библиотеку CONF для
       своих собственных целей.
</p>
<p>Файл конфигурации разделен на несколько разделов. Каждый раздел
       начинается со строки [ section_name ] и заканчивается, когда
       начинается новый раздел или достигается конец файла. Название
       раздела может состоять из буквенно-цифровых символов и символов
       подчеркивания.
</p>
<p>Первый раздел файла конфигурации является специальным и называется
       разделом по умолчанию. Этот раздел обычно безымянный и охватывает
       от начала файла до первого именованного раздела. Когда имя ищется,
       оно сначала ищется в именованном разделе (если есть), а затем в
       разделе по умолчанию.
</p>
<p>Среда отображается на раздел с именем ENV.
</p>
<p>Комментарии могут быть включены, с предшествующим им символом #
</p>
<p>Другие файлы могут быть включены с использованием директивы .include,
       за которой следует путь. Если путь указывает на каталог, все файлы
       с именами, заканчивающимися на .cnf или .conf, включаются из каталога.
       Рекурсивное включение каталогов из файлов в такой каталог не
       поддерживается. Это означает, что файлы во включенном каталоге
       также могут содержать директивы .include, но там поддерживается
       только включение обычных файлов. Включение каталогов не поддерживается
       в системах без поддержки POSIX IO.
</p>
<p>Настоятельно рекомендуется использовать абсолютные пути с директивой
       .include. Относительные пути оцениваются на основе текущего рабочего
       каталога приложения, поэтому, если файл конфигурации, содержащий
       директиву .include, не является специфическим для приложения,
       включение не будет работать должным образом.
</p>
<p>Каждый раздел в файле конфигурации состоит из нескольких пар имени
       и значения в форме name=value.
</p>
<p>Строка имени может содержать любые буквенно-цифровые символы, а
       также несколько знаков пунктуации, таких как . , ; и _.
</p>
<p>Строка значения состоит из строки, следующей за символом = до конца
       строки с удаленными пробелами в начале и в конце.
</p>
<p>Строка значения подвергается расширению переменной. Это можно сделать,
       включив форму $var или ${var}: это заменит значение именованной
       переменной в текущем разделе. Также возможно заменить значение из
       другого раздела, используя синтаксис $section::name или ${section::name}.
       С помощью формы $ ENV :: name можно заменить переменные окружения. Также
       возможно присвоить значения переменным среды, используя имя ENV::name,
       это будет работать, если программа ищет переменные среды, используя
       библиотеку CONF вместо прямого вызова getenv(). Строка значения не
       должна превышать длину 64k после раскрытия переменной. В противном
       случае произойдет ошибка.
</p>
<p>Можно экранировать определенные символы, используя кавычки любого типа
       или символ \. Сделав последний символ строки \, строку значений можно
       распределить по нескольким строкам. Кроме того, последовательности \n,
       \r, \b или \t распознаются.
</p>
<p>Все описанные выше правила раскрытия и экранирования, которые
       применяются к значению, также применяются к пути директивы .include.
</p>
</dd>
<dt>OPENSSL LIBRARY CONFIGURATION</dt>
<dd><p>Приложения могут автоматически настраивать определенные аспекты
       OpenSSL, используя главный файл конфигурации OpenSSL или,
       опционально, альтернативный файл конфигурации. Утилита openssl
       включает эту функциональность: любая подкоманда использует главный
       файл конфигурации OpenSSL, если в подкоманде не используется опция
       для использования альтернативного файла конфигурации.
</p>
<p>Чтобы включить настройку библиотеки, раздел по умолчанию должен
       содержать соответствующую строку, которая указывает на основной
       раздел конфигурации. Имя по умолчанию - openssl_conf, которое
       используется утилитой openssl. Другие приложения могут использовать
       альтернативное имя, например, myapplication_conf. Все строки
       конфигурации библиотеки отображаются в разделе по умолчанию в
       начале файла конфигурации.
</p>
<p>Раздел конфигурации должен состоять из набора пар имя-значение,
       которые содержат конкретную информацию о конфигурации модуля. Имя
       представляет собой имя модуля конфигурации. Значение значения
       зависит от модуля: оно может, например, представлять дополнительный
       раздел конфигурации, содержащий информацию, специфичную для модуля
       конфигурации. Как здесь:
</p><div class="display">
<pre class="display">        # Это должно быть в разделе по умолчанию
        openssl_conf = openssl_init

        [openssl_init]

        oid_section = new_oids
        engines = engine_section

        [new_oids]

        ... new oids here ...

        [engine_section]

        ... engine stuff here ...
</pre></div>
<p>Особенности каждого модуля конфигурации описаны ниже.
</p>
</dd>
<dt>ASN1 Object Configuration Module</dt>
<dd><p>Этот модуль имеет имя oid_section. Значение этой переменной
       указывает на раздел, содержащий пары значений имени OID: имя -
       это короткое и полное имя OID, значение - числовая форма объекта OID.
       Хотя некоторые из подкоманд утилиты openssl уже имеют свои собственные
       функции раздела ASN1 OBJECT, не все это делают. Используя модуль
       конфигурации ASN1 OBJECT, все подкоманды утилиты openssl могут
       видеть новые объекты, а также любые совместимые приложения. Например:
</p><div class="display">
<pre class="display">        [new_oids]

        some_new_oid = 1.2.3.4
        some_other_oid = 1.2.3.5
</pre></div>
<p>Также возможно установить значение на полное имя, за которым
       следуют запятая и числовая форма OID. Например:
</p><div class="display">
<pre class="display">        shortName = some object long name, 1.2.3.4
</pre></div>
</dd>
<dt>Engine Configuration Module</dt>
<dd><p>Этот модуль конфигурации ENGINE имеет название engine. Значение
       этой переменной указывает на раздел, содержащий дополнительную
       информацию о конфигурации ENGINE.
</p>
<p>Раздел, на который указывают движки, представляет собой таблицу
       имен движков (смотри engine_id below) и других разделов, содержащих
       информацию о конфигурации, специфичную для каждого ENGINE.
</p>
<p>Каждый специфический для ENGINE раздел используется для установки
       алгоритмов по умолчанию, загрузки динамического кода, выполнения
       инициализации и отправки ctrls. Фактическая операция зависит от
       имени команды, которое является именем пары имя-значение. В настоящее
       время поддерживаемые команды перечислены ниже.
</p><div class="display">
<pre class="display">       Для примера:

        [engine_section]

        # Настройте ENGINE с именем &quot;foo&quot;
        foo = foo_section
        # Настройте ENGINE с именем &quot;bar&quot;
        bar = bar_section

        [foo_section]
        ... foo ENGINE конкретные команды ...

        [bar_section]
        ... &quot;bar&quot; ENGINE конкретные команды ...
</pre></div>
<p>Команда engine_id используется для присвоения имени ENGINE.
       Если используется эта команда должна быть первой. Например:
</p><div class="display">
<pre class="display">        [engine_section]
        # Это обычно обрабатывает объект ENGINE с именем &quot;foo&quot;
        foo = foo_section

        [foo_section]
        # Переопределите имя по умолчанию и используйте вместо него &quot;myfoo&quot;.
        engine_id = myfoo
</pre></div>
<p>Команда dynamic_path загружает и добавляет ENGINE из заданного пути.
       Это эквивалентно отправке ctrls SO_PATH с аргументом пути, за которым
       следует LIST_ADD со значением 2 и LOAD, в динамический ENGINE. Если
       это не обязательное поведение, альтернативные ctrls могут быть отправлены
       непосредственно в динамический ENGINE с помощью команд ctrl.
</p>
<p>Команда init определяет, инициализировать ли ENGINE. Если значение
       равно 0, ENGINE не будет инициализирован, если 1 будет сделана попытка
       немедленно инициализировать ENGINE. Если команда init отсутствует,
       тогда будет предпринята попытка инициализировать ENGINE после того,
       как все команды в ее разделе были обработаны.
</p>
<p>Команда default_algorithms устанавливает алгоритмы по умолчанию,
       которые ENGINE будет предоставлять, используя функции
       ENGINE_set_default_string().
</p>
<p>Если имя не соответствует ни одному из приведенных выше имен команд,
       предполагается, что это команда ctrl, которая отправляется в ENGINE.
       Значением команды является аргумент команды ctrl. Если значением
       является строка EMPTY, то никакое значение не отправляется команде.
</p><div class="display">
<pre class="display">       Для примера:

        [engine_section]

        # Настройте ENGINE с именем &quot;foo&quot;
        foo = foo_section

        [foo_section]
        # Загрузить движек из DSO
        dynamic_path = /some/path/fooengine.so
        # Специфичный для foo объект ctrl.
        some_ctrl = some_value
        # Еще один ctrl, который не имеет значения.
        other_ctrl = EMPTY
        # Поставьте все алгоритмы по умолчанию
        default_algorithms = ALL
</pre></div>
</dd>
<dt>EVP Configuration Module</dt>
<dd><p>Этот модуль имеет имя alg_section, которое указывает на раздел,
       содержащий команды алгоритма.
</p>
<p>В настоящее время поддерживается только команда алгоритма fips_mode,
       значением которой может быть только отключенная логическая строка.
       Если fips_mode включен, возникает ошибка, так как эта версия
       библиотеки не поддерживает FIPS.
</p>
</dd>
<dt>SSL Configuration Module</dt>
<dd><p>Этот модуль имеет имя ssl_conf, которое указывает на раздел, содержащий
       конфигурации SSL.
</p>
<p>Каждая строка в разделе конфигурации SSL содержит название конфигурации
       и раздел, содержащий ее.
</p>
<p>Каждый раздел конфигурации состоит из пар значений команд для SSL_CONF.
       Каждая пара будет передана в структуру SSL_CTX или SSL, если она вызовет
       SSL_CTX_config() или SSL_config() с соответствующим именем конфигурации.
</p>
<p>Примечание: любые символы перед начальной точкой в ​​разделе конфигурации
       игнорируются, поэтому одну и ту же команду можно использовать
       несколько раз.
</p><div class="display">
<pre class="display">       Для примера:

        ssl_conf = ssl_sect

        [ssl_sect]

        server = server_section

        [server_section]

        RSA.Certificate = server-rsa.pem
        ECDSA.Certificate = server-ecdsa.pem
        Ciphers = ALL:!RC4
</pre></div>
<p>Конфигурация системы по умолчанию с именем system_default,
       если она есть, будет применена при любом создании
       структуры SSL_CTX.
</p><div class="display">
<pre class="display">       Пример конфигурации с системой по умолчанию:

        ssl_conf = ssl_sect

        [ssl_sect]

        system_default = system_default_sect

        [system_default_sect]

        MinProtocol = TLSv1.2
</pre></div>
</dd>
<dt>NOTES</dt>
<dd><p>Если файл конфигурации пытается раскрыть переменную, которая не
       существует, то отмечается ошибка, и файл не загружается. Это может
       произойти, если попытаться расширить несуществующую переменную среды.
       Например, в предыдущей версии OpenSSL в основном файле конфигурации
       OpenSSL по умолчанию использовалось значение HOME, которое не может быть
       определено в системах, отличных от Unix, и может вызвать ошибку.
</p>
<p>Эту проблему можно обойти, включив раздел по умолчанию, чтобы указать
       значение по умолчанию: тогда, если поиск среды не удался, вместо него
       будет использоваться значение по умолчанию. Чтобы это работало правильно,
       значение по умолчанию должно быть определено в файле конфигурации раньше,
       чем в расширении. Смотрите раздел EXAMPLES для примера того, как это сделать.
</p>
<p>Если в том же разделе существует одна и та же переменная, все значения,
       кроме последнего, будут игнорироваться. В определенных обстоятельствах,
       таких как DN, одно и то же поле может встречаться несколько раз. Обычно
       это обходится путем игнорирования любых символов перед начальной &rsquo;.&rsquo; как здесь:
</p><div class="display">
<pre class="display">        1.OU=&quot;My first OU&quot;
        2.OU=&quot;My Second OU&quot;
</pre></div>
</dd>
<dt>EXAMPLES</dt>
<dd><p>Вот пример файла конфигурации с использованием некоторых из функций,
       упомянутых выше.
</p><div class="display">
<pre class="display">        # Это раздел по умолчанию.

        HOME=/temp
        RANDFILE= ${ENV::HOME}/.rnd
        configdir=$ENV::HOME/config

        [ section_one ]

        # Мы сейчас в первом разделе.

        # Кавычки допускают пробелы в начале и в конце
        any = &quot; any variable name &quot;

        other = A string that can \
        cover several lines \
        by including \\ characters

        message = Hello World\n

        [ section_two ]

        greeting = $section_one::message
</pre></div>
<p>В следующем примере показано, как безопасно развернуть переменные среды.
</p>
<p>Предположим, вы хотите, чтобы переменная с именем tmpfile ссылалась
       на временное имя файла. Каталог, в который он помещен, может определяться
       переменными окружения TEMP или TMP, но они могут вообще не иметь никакого
       значения. Если вы просто включите имена переменных среды, а переменная не
       существует, это приведет к ошибке при попытке загрузить файл конфигурации.
       Используя раздел по умолчанию, можно найти оба значения, причем TEMP имеет
       приоритет, а \tmp можно использовать, если не определено ни одно из них:
</p><div class="display">
<pre class="display">        TMP=/tmp
        # Вышеуказанное значение используется, если TMP не в среде
        TEMP=$ENV::TMP
        # Вышеуказанное значение используется, если TEMP не в среде
        tmpfile=${ENV::TEMP}/tmp.filename
</pre></div>
<p>Простой пример конфигурации библиотеки OpenSSL для входа в режим FIPS:
</p><div class="display">
<pre class="display">        # Имя приложения по умолчанию: должно соответствовать параметру
        # &quot;appname&quot; (если есть), предоставленному в CONF_modules_load_file
        # и др.
        openssl_conf = openssl_conf_section

        [openssl_conf_section]
        # Список модулей конфигурации
        alg_section = evp_sect

        [evp_sect]
        # Установите &quot;yes&quot; для входа в режим FIPS, если поддерживается
        fips_mode = yes
</pre></div>
<p>Примечание: в приведенном выше примере вы получите ошибку в
       версиях OpenSSL, не поддерживающих FIPS.
</p>
<p>Более сложная конфигурация библиотеки OpenSSL. Добавьте OID и не
       переходите в режим FIPS:
</p><div class="display">
<pre class="display">        # Имя приложения по умолчанию: должно соответствовать параметру
        # &quot;appname&quot; (если есть), предоставленному CONF_modules_load_file
        # и др.
        openssl_conf = openssl_conf_section

        [openssl_conf_section]
        # Список модулей конфигурации
        alg_section = evp_sect
        oid_section = new_oids

        [evp_sect]
        # Это не будет иметь никакого эффекта, так как режим FIPS по умолчанию
        # отключен. Установите &quot;yes&quot; для входа в режим FIPS, если поддерживается
        fips_mode = no

        [new_oids]
        # Новый OID, просто короткое имя
        newoid1 = 1.2.3.4.1
        # Новое имя и полное имя OID
        newoid2 = New OID 2 long name, 1.2.3.4.2
</pre></div>
<p>Приведенные выше примеры можно использовать с любым приложением,
       поддерживающим конфигурацию библиотеки, если &quot;openssl_conf&quot; изменен
       для соответствия соответствующему &quot;appname&quot;.
</p><div class="display">
<pre class="display">       Например, если второй пример файла выше сохранен в &quot;example.cnf&quot;, то
       командная строка:

        OPENSSL_CONF=example.cnf openssl asn1parse -genstr OID:1.2.3.4.1

       будет выводить:

           0:d=0  hl=2 l=   4 prim: OBJECT            :newoid1

       показывая, что объект OID &quot;newoid1&quot; был добавлен как объект &quot;1.2.3.4.1&quot;.
</pre></div>
</dd>
<dt>ENVIRONMENT</dt>
<dd><dl compact="compact">
<dt>OPENSSL_CONF</dt>
<dd><p>Путь к файлу конфигурации. Игнорируется в программах set-user-ID и
           set-group-ID.
</p>
</dd>
<dt>OPENSSL_ENGINES</dt>
<dd><p>Путь к каталогу движка. Игнорируется в программах set-user-ID и
           set-group-ID.
</p></dd>
</dl>
</dd>
<dt>BUGS</dt>
<dd><p>В настоящее время нет способа включить символы с использованием восьмеричной
       формы \nnn. Все строки имеют нулевое окончание, поэтому нулевые значения не
       могут составлять часть значения.
</p>
<p>Экранирование не совсем правильно: если вы хотите использовать
       последовательности, такие как \n, вы не можете использовать
       экранирование кавычек в той же строке.
</p>
<p>Файлы загружаются за один проход. Это означает, что расширение
       переменной будет работать только в том случае, если указанные выше
       переменные определены в файле ранее.
</p>
</dd>
<dt>SEE ALSO</dt>
<dd><p>x509(1), req(1), ca(1)
</p>
</dd>
<dt>COPYRIGHT</dt>
<dd><p>Copyright 2000-2018 The OpenSSL Project Authors. All Rights Reserved.
</p>
<p>Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
       this file except in compliance with the License.  You can obtain a copy
       in the file LICENSE in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.
</p></dd>
</dl>
<p>1.1.1a                            2018-11-20                         CONFIG(5)
</p><hr>
<a name="g_t_041f_0440_0438_043c_0435_0440-_043a_043e_043d_0444_0438_0433_0443_0440_0430_0446_0438_0438-OpenSSL"></a>
<div class="header">
<p>
Next: <a href="#X509V3_005fCONFIG" accesskey="n" rel="next">X509V3_CONFIG</a>, Previous: <a href="#CONFIG" accesskey="p" rel="prev">CONFIG</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>
<a name="Primer-konfiguracii-OpenSSL"></a>
<h2 class="chapter">3 Пример конфигурации OpenSSL</h2>
<div class="display">
<pre class="display">#
# Пример конфигурации OpenSSL.
# Это в основном используется для генерации запросов на сертификат.
#

# Обратите внимание, что вы можете включить другие файлы из основного
# файла конфигурации, используя директиву .include.
#.include filename

# Это определение останавливает засорение следующих строк, если HOME
не определен.
HOME			= .

# Дополнительная информация об объекте:
#oid_file		= $ENV::HOME/.oid
oid_section		= new_oids

# Чтобы использовать этот файл конфигурации с опцией &quot;-extfile&quot; утилиты
# &quot;openssl x509&quot;, назовите здесь раздел, содержащий используемые расширения
# X.509v3:
# extensions =
# (В качестве альтернативы, используйте файл конфигурации, который имеет только
# расширения X.509v3 в своей основной [= default] секции.)

[ new_oids ]

# Здесь мы можем добавить новые OID для использования &rsquo;ca&rsquo;, &rsquo;req&rsquo; и &rsquo;ts&rsquo;.
# Добавьте простой OID, как это:
# testoid1=1.2.3.4
# Или используйте подстановку файла конфигурации следующим образом:
# testoid2=${testoid1}.5.6

# Политики, используемые в примерах TSA.
tsa_policy1 = 1.2.3.4.1
tsa_policy2 = 1.2.3.4.5.6
tsa_policy3 = 1.2.3.4.5.7

####################################################################
[ ca ]
default_ca	= CA_default		# Раздел по умолчанию ca

####################################################################
[ CA_default ]

dir		= ./demoCA		# Где все хранится
certs		= $dir/certs		# Где хранятся выданные сертификаты
crl_dir		= $dir/crl		# Где хранятся выданные crl
database	= $dir/index.txt	# индексный файл базы данных.
#unique_subject	= no			# Установите значение &rsquo;no&rsquo;, чтобы разрешить создание
                                        # нескольких сертификатов с одной и той же темой.
new_certs_dir	= $dir/newcerts		# место по умолчанию для новых сертификатов.

certificate	= $dir/cacert.pem 	# Сертификат CA
serial		= $dir/serial 		# Текущий серийный номер
crlnumber	= $dir/crlnumber	# текущее число crl должно быть закомментировано,
                                        # чтобы оставить V1 CRL
crl		= $dir/crl.pem 		# Текущий CRL
private_key	= $dir/private/cakey.pem# Закрытый ключ

x509_extensions	= usr_cert		# Расширения для добавления в сертификат

# Закомментируйте следующие две строки для формата &quot;traditional&quot;
# (и сильно испорченного).
name_opt 	= ca_default		# Параметры имени субъекта
cert_opt 	= ca_default		# Параметры поля сертификата

# Возможность копирования расширений: используйте с осторожностью.
# copy_extensions = copy

# Расширения для добавления в CRL. Примечание: коммуникатор Netscape подавляет V2 CRLs,
# так что по умолчанию это закомментировано, чтобы оставить V1 CRL.
# crlnumber также должен быть закомментирован, чтобы оставить объект V1 CRL.
# crl_extensions	= crl_ext

default_days	= 365			# время сертификации
default_crl_days= 30			# время до следующего CRL
default_md	= default		# использовать открытый ключ по умолчанию MD
preserve	= no			# сохранить порядок DN

# Несколько отличающийся способ указать, насколько похожим должен быть запрос.
# Для типа CA перечисленные атрибуты должны быть одинаковыми, а
# необязательные и предоставленные поля - это просто :-).
policy		= policy_match

# For the CA policy
[ policy_match ]
countryName		= match
stateOrProvinceName	= match
organizationName	= match
organizationalUnitName	= optional
commonName		= supplied
emailAddress		= optional

# Для политики &rsquo;anything&rsquo; На данный момент
# вы должны перечислить все допустимые
# типы &rsquo;object&rsquo;.
[ policy_anything ]
countryName		= optional
stateOrProvinceName	= optional
localityName		= optional
organizationName	= optional
organizationalUnitName	= optional
commonName		= supplied
emailAddress		= optional

####################################################################
[ req ]
default_bits		= 2048
default_keyfile 	= privkey.pem
distinguished_name	= req_distinguished_name
attributes		= req_attributes
x509_extensions	= v3_ca	# Расширения, чтобы добавить к самоподписанному сертификату

# Пароли для закрытых ключей, если они отсутствуют, будут запрошены для
# input_password = secret
# output_password = secret

# Это устанавливает маску для разрешенных типов строк. Есть несколько вариантов. 
# default: PrintableString, T61String, BMPString.
# pkix	 : PrintableString, BMPString (PKIX рекомендация перед 2004)
# utf8only: only UTF8Strings (PKIX рекомендация после 2004).
# nombstr : PrintableString, T61String (no BMPStrings или UTF8Strings).
# MASK:XXXX буквальное значение маски.
# WARNING: древние версии Netscape вылетали на BMPStrings или UTF8Strings.
string_mask = utf8only

# req_extensions = v3_req # Расширения для добавления в запрос сертификата

[ req_distinguished_name ]
countryName			= Название страны (двухбуквенный код)
countryName_default		= AU
countryName_min			= 2
countryName_max			= 2

stateOrProvinceName		= Название штата или провинции (полное название)
stateOrProvinceName_default	= Некоторые-State

localityName			= Название населенного пункта (например, город)

0.organizationName		= Название организации (например, компания)
0.organizationName_default	= Интернет Widgits Pty Ltd

# мы можем сделать это, но это обычно не нужно :-)
#1.organizationName		= Второе название организации (например, компания)
#1.organizationName_default	= World Wide Web Pty Ltd

organizationalUnitName		= Название организационной единицы (например, подразделение)
#organizationalUnitName_default	=

commonName			= Общее имя (например, полное доменное имя сервера или ваше имя)
commonName_max			= 64

emailAddress			= Email Address
emailAddress_max		= 64

# SET-ex3			= SET добавочный номер 3

[ req_attributes ]
challengePassword		= Пароль для вызова
challengePassword_min		= 4
challengePassword_max		= 20

unstructuredName		= Необязательное название компании

[ usr_cert ]

# Эти расширения добавляются, когда &rsquo;ca&rsquo; подписывает запрос.

# Это идет вразрез с рекомендациями PKIX, но некоторые CAs делают
# это, а некоторые программы требуют этого, чтобы избежать
# интерпретации сертификата конечного пользователя как CA.

basicConstraints=CA:FALSE

# Вот несколько примеров использования nsCertType. Если он опущен,
# сертификат может быть использован для подписи объекта *except*.

# Это OK для сервера SSL.
# nsCertType			= server

# Для сертификата подписи объекта это будет использоваться.
# nsCertType = objsign

# Для обычного использования клиента это типично
# nsCertType = client, email

# и для всего, включая подписание объекта:
# nsCertType = client, email, objsign

# Это типично в keyUsage для сертификата клиента.
# keyUsage = nonRepudiation, digitalSignature, keyEncipherment

# Это будет отображаться в списке комментариев Netscape.
nsComment			= &quot;OpenSSL Generated Certificate&quot;

# Рекомендации PKIX безвредны, если включены во все сертификаты.
subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid,issuer

# Этот материал для subjectAltName или issuerAltname.
# Импортируйте адрес электронной почты.
# subjectAltName=email:copy
# Альтернатива для создания сертификатов, которые не
# являются устаревшими согласно PKIX.
# subjectAltName=email:move

# Копировать детали темы
# issuerAltName=issuer:copy

#nsCaRevocationUrl		= http://www.domain.dom/ca-crl.pem
#nsBaseUrl
#nsRevocationUrl
#nsRenewalUrl
#nsCaPolicyUrl
#nsSslServerName

# Это требуется для сертификатов TSA.
# extendedKeyUsage = critical,timeStamping

[ v3_req ]

# Расширения для добавления в запрос сертификата

basicConstraints = CA:FALSE
keyUsage = nonRepudiation, digitalSignature, keyEncipherment

[ v3_ca ]


# Расширения для типичного CA


# PKIX рекомендация.

subjectKeyIdentifier=hash

authorityKeyIdentifier=keyid:always,issuer

basicConstraints = critical,CA:true

# Использование ключа: это типично для сертификата CA. Однако,
# поскольку он не позволит использовать его в качестве тестового
# самозаверяющего сертификата, его лучше оставить по умолчанию.
# keyUsage = cRLSign, keyCertSign

# Некоторые могут хотеть этого также
# nsCertType = sslCA, emailCA

# Включите адрес электронной почты в тему alt name: еще одна
# рекомендация PKIX
# subjectAltName=email:copy
# Копировать данные эмитента
# issuerAltName=issuer:copy

# шестнадцатеричная кодировка расширения DER:
# остерегайтесь только экспертов!
# obj=DER:02:03
# Где &rsquo;obj&rsquo; является стандартным или добавленным объектом.
# Вы даже можете переопределить поддерживаемое расширение:
# basicConstraints= critical, DER:30:03:01:01:FF

[ crl_ext ]

# CRL расширение.
# Только issuerAltName и authorityKeyIdentifier имеют смысл в CRL.

# issuerAltName=issuer:copy
authorityKeyIdentifier=keyid:always

[ proxy_cert_ext ]
# Эти расширения должны быть добавлены при создании прокси-сертификата.

# Это идет вразрез с рекомендациями PKIX, но некоторые CAs делают это,
# а некоторые программы требуют этого, чтобы избежать интерпретации
# сертификата конечного пользователя как CA.

basicConstraints=CA:FALSE

# Вот несколько примеров использования nsCertType. Если он опущен,
# сертификат может быть использован для подписи объекта *except*.

# Это OK для сервера SSL.
# nsCertType			= server

# Для сертификата подписи объекта это будет использоваться.
# nsCertType = objsign

# Для обычного использования клиента это типично
# nsCertType = client, email

# и для всего, включая подпись объекта:
# nsCertType = client, email, objsign

# Это типично в keyUsage для сертификата клиента.
# keyUsage = nonRepudiation, digitalSignature, keyEncipherment

# Это будет отображаться в списке комментариев Netscape.
nsComment			= &quot;OpenSSL Generated Certificate&quot;

# Рекомендации PKIX безвредны, если включены во все сертификаты.
subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid,issuer

# Этот материал для subjectAltName и issuerAltname.
# Импортируйте адрес электронной почты.
# subjectAltName=email:copy
# Альтернатива для создания сертификатов, которые не являются
# устаревшими согласно PKIX.
# subjectAltName=email:move

# Копировать детали субъекта
# issuerAltName=issuer:copy

#nsCaRevocationUrl		= http://www.domain.dom/ca-crl.pem
#nsBaseUrl
#nsRevocationUrl
#nsRenewalUrl
#nsCaPolicyUrl
#nsSslServerName

# Это действительно должно быть на месте, чтобы это был прокси-сертификат.
proxyCertInfo=critical,language:id-ppl-anyLanguage,pathlen:3,policy:foo

####################################################################
[ tsa ]

default_tsa = tsa_config1	# раздел TSA по умолчанию

[ tsa_config1 ]

# Они используются только генерацией ответа TSA.
dir		= ./demoCA		# корневой каталог TSA
serial		= $dir/tsaserial	# Текущий серийный номер (обязательный)
crypto_device	= builtin		# движок OpenSSL для подписи
signer_cert	= $dir/tsacert.pem 	# Сертификат подписи TSA (необязательный)
certs		= $dir/cacert.pem	# Цепочка сертификатов для включения в ответ
                                        # (необязательный)
signer_key	= $dir/private/tsakey.pem # Закрытый ключ TSA (необязательный)
signer_digest  = sha256			# Подписание дайджеста для использования.
                                        # (необязательный)
default_policy	= tsa_policy1		# Политика, если запрос не указал её
                                        # (необязательный)
other_policies	= tsa_policy2, tsa_policy3	# приемлемые политики (необязательный)
digests     = sha1, sha256, sha384, sha512  # Приемлемые дайджесты сообщений (обязательно)
accuracy	= secs:1, millisecs:500, microsecs:100	# (необязательный)
clock_precision_digits  = 0	# number of digits after dot. (необязательный)
ordering		= yes	# Определен ли порядок для меток времени?
				# (необязательный, по умолчанию: no)
tsa_name		= yes	# Должно ли имя TSA быть включено в ответ?
				# (необязательный, по умолчанию: no)
ess_cert_id_chain	= no	# Должна ли быть включена цепочка идентификаторов
                                # сертификатов ESS?
				# (необязательный, по умолчанию: no)
ess_cert_id_alg		= sha1	# алгоритм для вычисления идентификатора сертификата
                                # (необязательно, по умолчанию: sha1)
</pre></div>
<hr>
<a name="X509V3_005fCONFIG"></a>
<div class="header">
<p>
Next: <a href="#CA" accesskey="n" rel="next">CA</a>, Previous: <a href="#g_t_041f_0440_0438_043c_0435_0440-_043a_043e_043d_0444_0438_0433_0443_0440_0430_0446_0438_0438-OpenSSL" accesskey="p" rel="prev">Пример конфигурации OpenSSL</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>
<a name="X509V3_005fCONFIG-1"></a>
<h2 class="chapter">4 X509V3_CONFIG</h2>
<dl compact="compact">
<dt>NAME</dt>
<dd><p>x509v3_config - X509 V3 формат конфигурации расширения сертификата
</p></dd>
<dt>Расширения</dt>
<dd><dl compact="compact">
<dt>строковые расширения</dt>
<dd><p>[<a href="#ca-inhibitAnyPolicy">inhibitAnyPolicy</a>] [<a href="#ca-noCheck">noCheck</a>] []
</p></dd>
<dt>многозначные расширения</dt>
<dd><p>[<a href="#ca-basicConstraints">basicConstraints</a>[<a href="#ca-pathlen">pathlen</a>]] [<a href="#ca-keyUsage">keyUsage</a>] [<a href="#ca-extendedKeyUsage">extendedKeyUsage</a>] [<a href="#ca-subjectKeyIdentifier">subjectKeyIdentifier</a>] [<a href="#ca-authorityKeyIdentifier">authorityKeyIdentifier</a>] [<a href="#ca-subjectAltName">subjectAltName</a>] [<a href="#ca-issuerAltName">issuerAltName</a>] [<a href="#ca-authorityInfoAccess">authorityInfoAccess</a>] [<a href="#ca-crlDistributionPoints">crlDistributionPoints</a>] [<a href="#ca-issuingDistributionPoint">issuingDistributionPoint</a>] [<a href="#ca-policyConstraints">policyConstraints</a>] [<a href="#ca-nameConstraints">nameConstraints</a>] [<a href="#ca-tlsfeature">tlsfeature</a>] []
</p></dd>
<dt>Необрабатываемые расширения</dt>
<dd><p>[<a href="#ca-certificatePolicies">certificatePolicies</a>] []
</p></dd>
<dt>Произвольные расширения</dt>
<dd><p>[<a href="#ca-ARBITRARY-EXTENSIONS">ARBITRARY EXTENSIONS</a>]
</p></dd>
<dt>устаревшие расширения</dt>
<dd><p><a href="#ca-_0423_0421_0422_0410_0420_0415_0412_0428_0418_0415-_0420_0410_0421_0428_0418_0420_0415_041d_0418_042f-_0431_0435_0437-_043a_0430_0442_0435_0433_043e_0440_0438_0439">УСТАРЕВШИЕ РАСШИРЕНИЯ без категорий</a>
[<a href="#ca-nsComment">nsComment</a>] [<a href="nsRenewalUrl.html#ca-nsBaseUrl">nsCaRevocationUrl</a> in <cite>nsCaPolicyUrl nsSslServerName,, nsBaseUrl, nsRevocationUrl, nsCaRevocationUrl, nsRenewalUrl, nsCaPolicyUrl nsSslServerName</cite>] [<a href="#ca-Netscape-Certificate-Type">Netscape Certificate Type</a>]
</p></dd>
</dl>
</dd>
<dt>DESCRIPTION</dt>
<dd><p>Некоторые из утилит OpenSSL могут добавлять расширения к сертификату
       или запросу сертификата на основе содержимого файла конфигурации.
</p>
<p>Обычно приложение будет содержать опцию, указывающую на раздел
       расширения. Каждая строка раздела расширения имеет вид:
</p>
<p>extension_name=[critical,] extension_options
</p>
<p>Если критическое значение присутствует, расширение будет критическим.
</p>
<p>Формат extension_options зависит от значения extension_name.
</p>
<p>Существует четыре основных типа расширений: строковые расширения,
       многозначные расширения, необработанные и произвольные расширения.
</p>
<p>Строковые расширения просто имеют строку, которая содержит либо
       само значение, либо способ его получения.
</p>
<p>Например:
</p>
<p>nsComment=&quot;This is a Comment&quot;
</p>
<p>Многозначные расширения имеют краткую форму и длинную форму. Краткая
       форма представляет собой список имен и значений:
</p>
<p>basicConstraints=critical,CA:true,pathlen:1
</p>
<p>Длинная форма позволяет помещать значения в отдельный раздел:
</p>
<p>basicConstraints=critical,@bs_section
</p>
<p>[bs_section]
</p>
<p>CA=true
        pathlen=1
</p>
<p>Обе формы эквивалентны.
</p>
<p>Синтаксис необработанных расширений регулируется кодом расширения:
       он может, например, содержать данные в нескольких разделах.
       Правильный синтаксис для использования определяется самим кодом
       расширения: посмотрите пример расширения политик сертификатов.
</p>
<p>Если тип расширения не поддерживается, то должен использоваться
       произвольный синтаксис расширения, подробнее см. Раздел
       ARBITRARY EXTENSIONS.
</p>
</dd>
<dt>STANDARD EXTENSIONS</dt>
<dd><p>В следующих разделах подробно описывается каждое поддерживаемое
       расширение.
</p><dl compact="compact">
<dt>Basic Constraints. <a name="ca-basicConstraints"></a></dt>
<dd><p>Это многозначное расширение, которое указывает, является ли
       сертификат сертификатом CA. Первое (обязательное) имя - CA, за
       которым следует TRUE или FALSE. Если CA - TRUE, то может быть
       включено необязательное имя pathlen, за которым следует
       неотрицательное значение.
</p><div class="display">
<pre class="display">       Для примера:

        basicConstraints=CA:TRUE

        basicConstraints=CA:FALSE

        basicConstraints=critical,CA:TRUE, pathlen:0
</pre></div>
<p>Сертификат CA должен включать значение basicConstraints с полем CA,
       установленным в TRUE. Сертификат конечного пользователя должен либо
       установить CA в FALSE, либо полностью исключить расширение.
       Некоторое программное обеспечение может требовать включения
       basicConstraints с CA, установленным в FALSE для сертификатов
       конечного объекта.
</p>
<p>Параметр pathlen <a name="ca-pathlen"></a>указывает максимальное количество CA, которое может
       появиться ниже этого в цепочке. Таким образом, если у вас есть
       объект CA с pathlen, равным нулю, он может использоваться только
       для подписи сертификатов конечного пользователя, а не для
       дальнейшего использования CA.
</p>
</dd>
<dt>Key Usage <a name="ca-keyUsage"></a></dt>
<dd><p>Использование ключа - это многозначное расширение, состоящее из
       списка имен разрешенных вариантов использования ключа.
</p>
<p>Поддерживаемые имена: digitalSignature, nonRepudiation,
       keyEncipherment, dataEncipherment, keyAgreement, keyCertSign, cRLSign,
       encipherOnly и decipherOnly.
</p><div class="display">
<pre class="display">       Пример:

        keyUsage=digitalSignature, nonRepudiation

        keyUsage=critical, keyCertSign
</pre></div>
</dd>
<dt>Extended Key Usage. <a name="ca-extendedKeyUsage"></a></dt>
<dd><p>Это расширение состоит из списка использований, указывающих цели,
       для которых открытый ключ сертификата может использоваться.
</p>
<p>Это могут быть короткие имена объектов или точечная числовая форма
       OIDs. В то время как любой OID может быть использован, только
       определенные значения имеют смысл. В частности, следующие значения
       PKIX, NS и MS имеют смысл:
</p><div class="display">
<pre class="display">        Value                  Meaning
        &mdash;&ndash;                  &mdash;&mdash;-
        serverAuth             SSL/TLS Аутентификация веб-сервера.
        clientAuth             SSL/TLS Аутентификация веб-клиента.
        codeSigning            Подписание кода.
        emailProtection        Защита электронной почты (S/MIME).
        timeStamping           Доверенная временная метка
        OCSPSigning            OCSP подписание
        ipsecIKE               ipsec Обмен ключами в Интернете
        msCodeInd              Индивидуальная подпись кода Microsoft (authenticode)
        msCodeCom              Подписание коммерческого кода Microsoft (authenticode)
        msCTLSign              Подписание списка доверия Microsoft
        msEFS                  Зашифрованная файловая система Microsoft

       Примеры:

        extendedKeyUsage=critical,codeSigning,1.2.3.4
        extendedKeyUsage=serverAuth,clientAuth
</pre></div>
</dd>
<dt>Subject Key Identifier. <a name="ca-subjectKeyIdentifier"></a></dt>
<dd><p>Это действительно расширение строки и может принимать два
       возможных значения. Либо хэш слова, который будет автоматически
       следовать указаниям в RFC3280, либо шестнадцатеричная строка,
       содержащая значение расширения для включения. Использование
       шестнадцатеричной строки настоятельно не рекомендуется.
</p><div class="display">
<pre class="display">       Пример:

        subjectKeyIdentifier=hash
</pre></div>
</dd>
<dt>Authority Key Identifier. <a name="ca-authorityKeyIdentifier"></a></dt>
<dd><p>Расширение идентификатора ключа доступа допускает два варианта.
       ключ и эмитент: оба могут принимать необязательное значение &quot;always&quot;.
</p>
<p>Если опция keyid присутствует, делается попытка скопировать
       идентификатор ключа субъекта из родительского сертификата. Если
       присутствует значение &quot;always&quot;, то в случае сбоя опции
       возвращается ошибка.
</p>
<p>Опция эмитента копирует эмитента и серийный номер из сертификата
       эмитента. Это будет сделано только в случае сбоя опции keyid или ее
       отсутствия, если только флаг &quot;always&quot; не всегда будет содержать
       значение.
</p><div class="display">
<pre class="display">       Пример:

        authorityKeyIdentifier=keyid,issuer
</pre></div>
</dd>
<dt>Subject Alternative Name. <a name="ca-subjectAltName"></a></dt>
<dd><p>Расширение альтернативного имени субъекта позволяет включать
       различные литеральные значения в файл конфигурации. К ним относятся
       электронная почта (адрес электронной почты) URI, унифицированный
       индикатор ресурсов, DNS (доменное имя DNS), RID (зарегистрированный
       ID: OBJECT IDENTIFIER), IP (адрес IP), dirName (отличительное имя)
       и otherName.
</p>
<p>Опция электронной почты включает специальное значение &rsquo;copy&rsquo;. Это будет
       автоматически включать любые адреса электронной почты, содержащиеся в
       имени субъекта сертификата в расширении.
</p>
<p>Адрес IP, используемый в параметрах IP, может быть в формате IPv4
       или IPv6.
</p>
<p>Значение dirName должно указывать на раздел, содержащий различающееся
       имя для использования в качестве набора пар имя-значение. Множественные
       значения AVAs можно сформировать, предварительно указав имя с символом +.
</p>
<p>otherName может включать произвольные данные, связанные с OID: значение
       должно быть OID, за которым следует точка с запятой, и содержимое в
       стандартном формате ASN1_generate_nconf.
</p><div class="display">
<pre class="display">       Пример:

        subjectAltName=email:copy,email:my@other.address,URI:http://my.url.here/
        subjectAltName=IP:192.168.7.1
        subjectAltName=IP:13::17
        subjectAltName=email:my@other.address,RID:1.2.3.4
        subjectAltName=otherName:1.2.3.4;UTF8:some other identifier

        subjectAltName=dirName:dir_sect

        [dir_sect]
        C=UK
        O=My Organization
        OU=My Unit
        CN=My Name
</pre></div>
</dd>
<dt>Issuer Alternative Name.  <a name="ca-issuerAltName"></a></dt>
<dd><p>Опция альтернативного имени эмитента поддерживает все буквальные
       опции альтернативного имени субъекта. Он не поддерживает параметр
       email:copy, потому что это не имеет смысла. Он поддерживает
       дополнительную опцию issuer:copy, которая будет копировать все
       значения альтернативных имен субъекта из сертификата эмитента
       (если это возможно).
</p><div class="display">
<pre class="display">       Пример:

        issuerAltName = issuer:copy
</pre></div>
</dd>
<dt>Authority Info Access.  <a name="ca-authorityInfoAccess"></a></dt>
<dd><p>Расширение доступа к авторитетной информации дает подробную
       информацию о том, как получить доступ к определенной информации,
       относящейся к объекту. Его синтаксис: accessOID; местоположение,
       где местоположение имеет тот же синтаксис, что и альтернативное
       имя субъекта (за исключением того, что email:copy не поддерживается).
       accessOID может быть любым допустимым OID, но значимы только
       определенные значения, например, OCSP и caIssuers.
</p><div class="display">
<pre class="display">       Пример:

        authorityInfoAccess = OCSP;URI:http://ocsp.my.host/
        authorityInfoAccess = caIssuers;URI:http://my.ca/ca.html
</pre></div>
</dd>
<dt>CRL distribution points  <a name="ca-crlDistributionPoints"></a></dt>
<dd><p>Это многозначное расширение, параметры которого могут быть либо
       в паре name:value, используя ту же форму, что и альтернативное
       имя субъекта, либо одно значение, представляющее имя раздела,
       содержащее все поля точки распространения.
</p>
<p>Для пары name:value новый DistributionPoint с полем fullName,
       установленным на заданное значение, и поля cRLissuer, и причины
       в этом случае опускаются.
</p>
<p>В случае одного варианта указанный раздел содержит значения для
       каждого поля. В этой секции:
</p>
<p>Если имя - &quot;fullname&quot;, поле значения должно содержать полное имя
       точки распространения в том же формате, что и альтернативное
       имя субъекта.
</p>
<p>Если имя - &quot;relativename&quot;, тогда поле значения должно содержать
       имя раздела, содержимое которого представляет фрагмент DN, который
       будет помещен в это поле.
</p>
<p>Имя &quot;CRLIssuer&quot;, если оно присутствует, должно содержать значение для
       этого поля в формате альтернативного имени субъекта.
</p>
<p>Если имя &quot;reasons&quot;, поле значения должно состоять из поля, разделенного
       запятыми и содержащего причины. Допустимые причины:
       &quot;keyCompromise&quot;, &quot;CACompromise&quot;, &quot;affiliationChanged&quot;, &quot;superseded&quot;,
       &quot;cessationOfOperation&quot;, &quot;certificateHold&quot;, &quot;privilegeWithdrawn&quot; и
       &quot;AACompromise&quot;.
</p><div class="display">
<pre class="display">       Простой пример:

        crlDistributionPoints=URI:http://myhost.com/myca.crl
        crlDistributionPoints=URI:http://my.com/my.crl,URI:http://oth.com/my.crl

       Пример полной точки распространения:

        crlDistributionPoints=crldp1_section

        [crldp1_section]

        fullname=URI:http://myhost.com/myca.crl
        CRLissuer=dirName:issuer_sect
        reasons=keyCompromise, CACompromise

        [issuer_sect]
        C=UK
        O=Organisation
        CN=Some Name
</pre></div>
</dd>
<dt>Issuing Distribution Point  <a name="ca-issuingDistributionPoint"></a></dt>
<dd><p>Это расширение должно появляться только в CRLs. Это многозначное
       расширение, синтаксис которого похож на &quot;section&quot;, на который
       указывает расширение точек распространения CRL, с некоторыми
       отличиями.
</p>
<p>Имена &quot;reasons&quot; и &quot;CRLissuer&quot; не распознаются.
</p>
<p>Принимается имя &quot;onlysomereasons&quot;, которое устанавливает это поле.
       Значение находится в том же формате, что и поле CRL точки
       распространения CRL.
</p>
<p>Имена &quot;onlyuser&quot;, &quot;onlyCA&quot;, &quot;onlyAA&quot; и &quot;indirectCRL&quot; также принимаются,
       значения должны быть логическим значением (TRUE or FALSE), чтобы
       указывать значение соответствующего поля.
</p><div class="display">
<pre class="display">       Пример:

        issuingDistributionPoint=critical, @idp_section

        [idp_section]

        fullname=URI:http://myhost.com/myca.crl
        indirectCRL=TRUE
        onlysomereasons=keyCompromise, CACompromise

        [issuer_sect]
        C=UK
        O=Organisation
        CN=Some Name
</pre></div>
</dd>
<dt>Certificate Policies.  <a name="ca-certificatePolicies"></a></dt>
<dd><p>Это необработанное расширение. Все поля этого расширения могут
       быть установлены с использованием соответствующего синтаксиса.
</p>
<p>Если вы следуете рекомендациям PKIX и просто используете один OID,
       тогда вы просто включаете значение этого OID. Несколько OIDs могут
       быть установлены через запятую, например:
</p>
<p>certificatePolicies= 1.2.4.5, 1.1.3.4
</p>
<p>Если вы хотите включить квалификаторы, то политика OID и
       квалификаторы должны быть указаны в отдельном разделе: это
       делается с использованием синтаксиса @section вместо
       литерального значения OID.
</p>
<p>Упомянутый раздел должен включать политику OID с использованием
       квалификаторов имени policyIdentifier, cPSuri, которые могут
       быть включены с использованием синтаксиса:
</p>
<p>CPS.nnn=value
</p>
<p>Определители userNotice могут быть установлены с использованием
       синтаксиса:
</p>
<p>userNotice.nnn=@notice
</p>
<p>Значение квалификатора userNotice указано в соответствующем разделе.
       Этот раздел может включать параметры explicitText, organization и
       noticeNumbers. explicitText и organization - это текстовые строки,
       noticeNumbers - список чисел через запятую. Организация и параметры
       noticeNumbers (если включены) должны присутствовать в BOTH. Если вы
       используете опцию userNotice с IE5, вам понадобится опция &rsquo;ia5org&rsquo;
       на верхнем уровне, чтобы изменить кодировку: в противном случае она
       не будет правильно интерпретироваться.
</p><div class="display">
<pre class="display">       Пример:

        certificatePolicies=ia5org,1.2.3.4,1.5.6.7.8,@polsect

        [polsect]

        policyIdentifier = 1.3.5.8
        CPS.1=&quot;http://my.host.name/&quot;
        CPS.2=&quot;http://my.your.name/&quot;
        userNotice.1=@notice

        [notice]

        explicitText=&quot;Explicit Text Here&quot;
        organization=&quot;Organisation Name&quot;
        noticeNumbers=1,2,3,4
</pre></div>
<p>Опция ia5org изменяет тип поля организации. В RFC2459 это
       может быть только тип DisplayText. В RFC3280 IA5String это
       тоже допустимо. Некоторое программное обеспечение (например,
       некоторые версии MSIE) может потребовать ia5org.
</p>
<p>Тип ASN1 объекта explicitText можно указать, добавив префикс
       UTF8, BMP или VISIBLE, а затем двоеточие. Для примера:
</p><div class="display">
<pre class="display">        [notice]
        explicitText=&quot;UTF8:Explicit Text Here&quot;
</pre></div>
</dd>
<dt>Policy Constraints  <a name="ca-policyConstraints"></a></dt>
<dd><p>Это многозначное расширение, состоящее из имен requireExplicitPolicy
       или inhibitPolicyMapping и неотрицательного целочисленного значения.
       По крайней мере, один компонент должен присутствовать.
</p><div class="display">
<pre class="display">       Пример:

        policyConstraints = requireExplicitPolicy:3
</pre></div>
</dd>
<dt>Inhibit Any Policy  <a name="ca-inhibitAnyPolicy"></a></dt>
<dd><p>Это расширение строки, значение которого должно быть неотрицательным
       целым числом.
</p><div class="display">
<pre class="display">       Пример:

        inhibitAnyPolicy = 2
</pre></div>
</dd>
<dt>Name Constraints <a name="ca-nameConstraints"></a></dt>
<dd><p>Расширение ограничений имени является многозначным расширением. Имя
       должно начинаться со слова разрешенного или исключенного, за которым
       следует &rsquo;;&rsquo;. Остальная часть имени и значения соответствует синтаксису
       subjectAltName, за исключением того, что email:copy не поддерживается,
       а форма IP должна состоять из адресов IP и маски подсети,
       разделенных &rsquo;/&rsquo;.
</p><div class="display">
<pre class="display">       Пример:

        nameConstraints=permitted;IP:192.168.0.0/255.255.0.0

        nameConstraints=permitted;email:.somedomain.com

        nameConstraints=excluded;email:.com
</pre></div>
</dd>
<dt>OCSP No Check  <a name="ca-noCheck"></a></dt>
<dd><p>Расширение OCSP No Check является расширением строки, но его
       значение игнорируется.
</p><div class="display">
<pre class="display">       Пример:

        noCheck = ignored
</pre></div>
</dd>
<dt>TLS Feature (ака Must Staple) tlsfeature <a name="ca-tlsfeature"></a></dt>
<dd><p>Это многозначное расширение, состоящее из списка идентификаторов
       расширения TLS. Каждый идентификатор может быть номером (0..65535)
       или поддерживаемым именем. Когда клиент TLS отправляет указанное
       расширение, сервер TLS должен включить это расширение в свой ответ.
</p>
<p>Поддерживаемые имена: status_request и status_request_v2.
</p><div class="display">
<pre class="display">       Пример:

        tlsfeature = status_request
</pre></div>
</dd>
</dl>
</dd>
<dt>DEPRECATED EXTENSIONS (УСТАРЕВШИЕ РАСШИРЕНИЯ без категорий <a name="ca-_0423_0421_0422_0410_0420_0415_0412_0428_0418_0415-_0420_0410_0421_0428_0418_0420_0415_041d_0418_042f-_0431_0435_0437-_043a_0430_0442_0435_0433_043e_0440_0438_0439"></a>)</dt>
<dd><p>Следующие расширения являются нестандартными, специфичными для
       Netscape и в значительной степени устарели. Их использование в
       новых приложениях не рекомендуется.
</p><dl compact="compact">
<dt>Netscape String extensions. <a name="ca-nsComment"></a></dt>
<dd><p>Netscape Comment (nsComment) - это расширение строки, содержащее
       комментарий, который будет отображаться при просмотре сертификата
       в некоторых браузерах.
</p><div class="display">
<pre class="display">       Пример:

        nsComment = &quot;Some Random Comment&quot;
</pre></div>
<p>Другие поддерживаемые расширения в этой категории: nsBaseUrl, nsRevocationUrl, nsCaRevocationUrl, nsRenewalUrl, nsCaPolicyUrl nsSslServerName <a name="ca-nsBaseUrl_002c-nsRevocationUrl_002c-nsCaRevocationUrl_002c-nsRenewalUrl_002c-nsCaPolicyUrl-nsSslServerName"></a>.
</p>
</dd>
<dt>Netscape Certificate Type <a name="ca-Netscape-Certificate-Type"></a></dt>
<dd><p>Это многозначное расширение, которое состоит из списка флагов,
       которые необходимо включить. Он использовался для указания целей,
       для которых может использоваться сертификат. Вместо этого теперь
       используются расширения использования basicConstraints, keyUsage
       и расширенного ключа.
</p>
<p>Допустимые значения для nsCertType: client, server, email, objsign,
       reserved, sslCA, emailCA, objCA.
</p></dd>
</dl>
</dd>
<dt>ARBITRARY EXTENSIONS <a name="ca-ARBITRARY-EXTENSIONS"></a></dt>
<dd><p>Если расширение не поддерживается кодом OpenSSL, то оно должно
       быть закодировано с использованием произвольного формата расширения.
       Также возможно использовать произвольный формат для поддерживаемых
       расширений. Особое внимание следует уделить тому, чтобы данные
       были правильно отформатированы для данного типа расширения.
</p>
<p>Есть два способа кодирования произвольных расширений.
</p>
<p>Первый способ - использовать слово ASN1 с последующим содержимым
       расширения, используя тот же синтаксис, что и ASN1_generate_nconf.
       Например:
</p><div class="display">
<pre class="display">        1.2.3.4=critical,ASN1:UTF8String:Some random data

        1.2.3.4=ASN1:SEQUENCE:seq_sect

        [seq_sect]

        field1 = UTF8:field1
        field2 = UTF8:field2

       It is also possible to use the word DER to include the raw encoded data
       in any extension.

        1.2.3.4=critical,DER:01:02:03:04
        1.2.3.4=DER:01020304
</pre></div>
<p>Значение, следующее за DER, представляет собой шестнадцатеричный
       дамп кодировки DER расширения. Расширение Any можно поместить в
       эту форму, чтобы переопределить поведение по умолчанию. Например:
</p><div class="display">
<pre class="display">        basicConstraints=critical,DER:00:01:02:03
</pre></div>
</dd>
<dt>WARNING</dt>
<dd><p>Нет никакой гарантии, что конкретная реализация обработает данное
       расширение. Поэтому иногда можно использовать сертификаты в целях,
       запрещенных их расширениями, поскольку конкретное приложение не
       распознает или не учитывает значения соответствующих расширений.
</p>
<p>Параметры DER и ASN1 следует использовать с осторожностью. Можно
       создать совершенно недопустимые расширения, если они не
       используются осторожно.
</p>
</dd>
<dt>NOTES</dt>
<dd><p>Если расширение является многозначным, и значение поля должно
       содержать запятую, следует использовать длинную форму, в
       противном случае запятая будет неверно истолкована как
       разделитель полей. Например:
</p><div class="display">
<pre class="display">        subjectAltName=URI:ldap://somehost.com/CN=foo,OU=bar

       выдаст ошибку, но эквивалентную форму:

        subjectAltName=@subject_alt_section

        [subject_alt_section]
        subjectAltName=URI:ldap://somehost.com/CN=foo,OU=bar

       является действительным.
</pre></div>
<p>Из-за поведения библиотеки OpenSSL conf одно и то же имя поля
       может встречаться в разделе только один раз. Это означает, что:
</p><div class="display">
<pre class="display">        subjectAltName=@alt_section

        [alt_section]

        email=steve@here
        email=steve@there
</pre></div>
<p>распознает только последнее значение. Это можно обойти,
       используя форму:
</p><div class="display">
<pre class="display">        [alt_section]

        email.1=steve@here
        email.2=steve@there
</pre></div>
</dd>
<dt>SEE ALSO</dt>
<dd><p>req(1), ca(1), x509(1), ASN1_generate_nconf(3)
</p>
</dd>
<dt>COPYRIGHT</dt>
<dd><p>Copyright 2004-2016 The OpenSSL Project Authors. All Rights Reserved.
</p>
<p>Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
       this file except in compliance with the License.  You can obtain a copy
       in the file LICENSE in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.
</p></dd>
</dl>
<p>1.1.1a                            2018-11-20                  X509V3_CONFIG(5)
</p><hr>
<a name="CA"></a>
<div class="header">
<p>
Next: <a href="#X509" accesskey="n" rel="next">X509</a>, Previous: <a href="#X509V3_005fCONFIG" accesskey="p" rel="prev">X509V3_CONFIG</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>
<a name="CA-1"></a>
<h2 class="chapter">5 CA</h2>
<dl compact="compact">
<dt>NAME</dt>
<dd><p>openssl-ca, ca - пример минимального применения CA
</p>
</dd>
<dt>SYNOPSIS</dt>
<dd><p>openssl ca [<a href="#ca-_002dhelp">-help</a>] [<a href="#ca-_002dverbose">-verbose</a>] [<a href="#ca-_002dconfig-filename">-config filename</a>] [<a href="#ca-_002dname-section">-name section</a>] [-gencrl] [<a href="#ca-_002drevoke-filename">-revoke filename</a>] [<a href="#ca-_002dvalid-filename">-valid filename</a>] [<a href="#ca-_002dstatus-serial">-status serial</a>] [<a href="#ca-_002dupdatedb">-updatedb</a>] [<a href="#ca-_002dcrl_005freason-reason">-crl_reason reason</a>] [<a href="#ca-_002dcrl_005fhold-instruction">-crl_hold instruction</a>] [<a href="#ca-_002dcrl_005fcompromise-time">-crl_compromise time</a>] [<a href="#ca-_002dcrl_005fCA_005fcompromise-time">-crl_CA_compromise time</a>] [<a href="#ca-_002dcrldays-num">-crldays num</a>] [<a href="#ca-_002dcrlhours-num">-crlhours num</a>] [<a href="#ca-_002dcrlexts-section">-crlexts section</a>] [<a href="#ca-_002dstartdate-date">-startdate date</a>] [<a href="#ca-_002denddate-date">-enddate date</a>] [<a href="#ca-_002ddays-arg">-days arg</a>] [<a href="#ca-_002dmd-alg">-md alg</a>] [<a href="#ca-_002dpolicy-arg">-policy arg</a>] [<a href="#ca-_002dkeyfile-filename">-keyfile filename</a>] [<a href="#ca-_002dkeyform-PEM_007cDER">-keyform PEM|DER</a>] [<a href="#ca-_002dkey-password">-key password</a>] [<a href="#ca-_002dpassin-arg">-passin arg</a>] [<a href="#ca-_002dcert">-cert file</a>] [<a href="#ca-_002dselfsign">-selfsign</a>] [<a href="#ca-_002din-filename">-in filename</a>] [<a href="#ca-_002dout-filename">-out filename</a>] [<a href="#ca-_002dnotext">-notext</a>] [<a href="#ca-_002doutdir-directory">-outdir directory</a>] [<a href="#ca-_002dinfiles">-infiles</a>] [<a href="#ca-_002dspkac-filename">-spkac filename</a>] [<a href="#ca-_002dss_005fcert-filename">-ss_cert filename</a>] [<a href="#ca-_002dpreserveDN">-preserveDN</a>] [<a href="#ca-_002dnoemailDN">-noemailDN</a>] [<a href="#ca-_002dbatch">-batch</a>] [<a href="#ca-_002dmsie_005fhack">-msie_hack</a>] [<a href="#ca-_002dextensions-section">-extensions section</a>] [<a href="#ca-_002dextfile-file">-extfile file</a>] [<a href="#ca-_002dengine-id">-engine id</a>] [<a href="#ca-_002dsubj-arg">-subj arg</a>] [<a href="#ca-_002dutf8">-utf8</a>] [<a href="#ca-_002dcreate_005fserial">-create_serial</a>] [<a href="#ca-_002drand_005fserial">-rand_serial</a>] [<a href="#ca-_002dmultivalue_002drdn">-multivalue-rdn</a>] [<a href="#ca-_002drand-file_002e_002e_002e">-rand file...</a>] [<a href="#ca-_005b_002dwriterand-file_005d">[-writerand file]</a>]
</p>
</dd>
<dt>Параметры файла конфигурации</dt>
<dd><p>[<a href="#ca-CONFIGURATION-FILE-OPTIONS">CONFIGURATION FILE OPTIONS</a>] [<a href="#ca-oid_005ffile">oid_file</a>] [<a href="#ca-oid_005fsection">oid_section</a>] [<a href="#ca-new_005fcerts_005fdir">new_certs_dir</a>] [<a href="#ca-certificate">certificate</a>] [<a href="#ca-private_005fkey">private_key</a>] [<a href="#ca-RANDFILE">RANDFILE</a>] [<a href="#ca-default_005fdays">default_days</a>] [<a href="#ca-default_005fstartdate">default_startdate</a>] [<a href="#ca-default_005fenddate">default_enddate</a>] [<a href="#ca-default_005fcrl_005fhours-default_005fcrl_005fdays">default_crl_hours default_crl_days</a>] [<a href="#ca-default_005fmd">default_md</a>] [<a href="#ca-database">database</a>] [<a href="#ca-unique_005fsubject">unique_subject</a>] [<a href="#ca-serial">serial</a>] [<a href="#ca-crlnumber">crlnumber</a>] [<a href="#ca-x509_005fextensions">x509_extensions</a>] [<a href="#ca-crl_005fextensions">crl_extensions</a>] [<a href="#ca-preserve">preserve</a>] [<a href="#ca-email_005fin_005fdn">email_in_dn</a>] [<a href="#ca-msie_005fhack">msie_hack</a>] [<a href="#ca-policy">policy</a>] [<a href="name_opt.html#ca-name_005fopt">cert_opt</a> in <cite>cert_opt</cite>] [<a href="#ca-copy_005fextensions">copy_extensions</a>]
</p></dd>
<dt><a href="#ca-_0028_041f_0440_0438_043c_0435_0440_044b_0029">(Примеры)</a></dt>
<dt>DESCRIPTION</dt>
<dd><p>Команда ca является минимальным приложением CA. Оно может быть
       использовано для подписи запросов на сертификаты в различных формах
       и генерации CRL. Оно также поддерживает текстовую базу данных
       выданных сертификатов и их статус.
</p>
<p>Описание параметров будет разделено по категориям.
</p>
</dd>
<dt>OPTIONS</dt>
<dd><dl compact="compact">
<dt>-help <a name="ca-_002dhelp"></a></dt>
<dd><p>Распечатайте сообщение об использовании.
</p>
</dd>
<dt>-verbose <a name="ca-_002dverbose"></a></dt>
<dd><p>Это печатает дополнительную информацию о выполняемых операциях.
</p>
</dd>
<dt>-config filename <a name="ca-_002dconfig-filename"></a></dt>
<dd><p>Указывает файл конфигурации для использования. Необязательный;
           описание значения по умолчанию см. в &quot;COMMAND SUMMARY&quot; в
           openssl(1).
</p>
</dd>
<dt>-name section <a name="ca-_002dname-section"></a></dt>
<dd><p>Определяет раздел файла конфигурации для использования
           (переопределяет default_ca в разделе ca).
</p>
</dd>
<dt>-in filename <a name="ca-_002din-filename"></a></dt>
<dd><p>Входное имя файла, содержащее один запрос сертификата, который
           должен быть подписан CA.
</p>
</dd>
<dt>-ss_cert filename <a name="ca-_002dss_005fcert-filename"></a></dt>
<dd><p>Один сертификат self-signed для подписи CA.
</p>
</dd>
<dt>-spkac filename <a name="ca-_002dspkac-filename"></a></dt>
<dd><p>Файл, содержащий один открытый ключ и запрос, подписанный
           Netscape, и дополнительные значения полей, которые должны быть
           подписаны CA. Смотри раздел SPKAC FORMAT для получения информации
           о требуемом формате ввода и вывода.
</p>
</dd>
<dt>-infiles <a name="ca-_002dinfiles"></a></dt>
<dd><p>Если присутствует, это должен быть последний параметр, все
           последующие аргументы принимаются в качестве имен файлов, содержащих
           запросы сертификатов.
</p>
</dd>
<dt>-out filename <a name="ca-_002dout-filename"></a></dt>
<dd><p>Выходной файл для вывода сертификатов. По умолчанию используется
           стандартный вывод. Детали сертификата также будут распечатаны в этот
           файл в формате PEM (за исключением того, что -spkac выводит
           формат DER).
</p>
</dd>
<dt>-outdir directory <a name="ca-_002doutdir-directory"></a></dt>
<dd><p>Каталог для вывода сертификатов. Сертификат будет записан в файл с
           именем, состоящим из шестнадцатеричного серийного номера
           с добавлением &quot;.pem&quot;.
</p>
</dd>
<dt>-cert <a name="ca-_002dcert"></a></dt>
<dd><p>Файл сертификата CA.
</p>
</dd>
<dt>-keyfile filename <a name="ca-_002dkeyfile-filename"></a></dt>
<dd><p>Закрытый ключ для подписи запросов.
</p>
</dd>
<dt>-keyform PEM|DER <a name="ca-_002dkeyform-PEM_007cDER"></a></dt>
<dd><p>Формат данных в файле закрытого ключа. По умолчанию используется PEM.
</p>
</dd>
<dt>-key password <a name="ca-_002dkey-password"></a></dt>
<dd><p>Пароль, используемый для шифрования закрытого ключа. Поскольку в
           некоторых системах аргументы командной строки видимы
           (Unix с утилитой &rsquo;ps&rsquo;), эту опцию следует использовать
           с осторожностью.
</p>
</dd>
<dt>-selfsign <a name="ca-_002dselfsign"></a></dt>
<dd><p>Указывает, что выданные сертификаты должны быть подписаны ключом,
           с которым были подписаны запросы сертификатов (предоставляется с
           помощью -keyfile). Запросы на сертификат, подписанные другим
           ключом, игнорируются. Если заданы -spkac, -ss_cert или -gencrl,
           -selfsign игнорируется.
</p>
<p>Следствием использования -selfsign является то, что сертификат
           self-signed появляется среди записей в базе данных сертификатов
           (см. Базу данных параметров конфигурации) и использует тот же
           счетчик серийного номера, что и все другие сертификаты,
           подписанные сертификатом self-signed.
</p>
</dd>
<dt>-passin arg <a name="ca-_002dpassin-arg"></a></dt>
<dd><p>Ключевой источник пароля. Для получения дополнительной информации
           о формате arg смотрите раздел PASS PHRASE ARGUMENTS в openssl.
</p>
</dd>
<dt>-notext <a name="ca-_002dnotext"></a></dt>
<dd><p>Не выводите текстовую форму сертификата в выходной файл.
</p>
</dd>
<dt>-startdate date <a name="ca-_002dstartdate-date"></a></dt>
<dd><p>Это позволяет явно установить дату начала. Формат даты:
           YYMMDDHHMMSSZ (такой же, как структура ASN1 UTCTime) или
           YYYYMMDDHHMMSSZ (такой же, как структура ASN1 GeneralizedTime).
           В обоих форматах должны присутствовать секунды SS и часовой пояс Z.
</p>
</dd>
<dt>-enddate date <a name="ca-_002denddate-date"></a></dt>
<dd><p>Это позволяет явно установить дату истечения срока действия. Формат
           даты: YYMMDDHHMMSSZ (такой же, как структура ASN1 UTCTime) или
           YYYYMMDDHHMMSSZ (такой же, как структура ASN1 GeneralizedTime).
           В обоих форматах должны присутствовать секунды SS и часовой
           пояс Z.
</p>
</dd>
<dt>-days arg <a name="ca-_002ddays-arg"></a></dt>
<dd><p>Количество дней для сертификации сертификата.
</p>
</dd>
<dt>-md alg <a name="ca-_002dmd-alg"></a></dt>
<dd><p>Дайджест сообщения для использования. Можно использовать любой дайджест,
           поддерживаемый командой OpenSSL dgst. Для алгоритмов подписи, которые
           не поддерживают дайджест (Ed25519 и Ed448), любой заданный дайджест
           сообщения игнорируется. Эта опция также применяется к CRL.
</p>
</dd>
<dt>-policy arg <a name="ca-_002dpolicy-arg"></a></dt>
<dd><p>Эта опция определяет CA &quot;policy&quot; для использования. Это раздел в
           файле конфигурации, который решает, какие поля должны быть
           обязательными или соответствовать сертификату CA. Проверьте
           раздел POLICY FORMAT для получения дополнительной информации.
</p>
</dd>
<dt>-msie_hack <a name="ca-_002dmsie_005fhack"></a></dt>
<dd><p>Это устаревшая опция, чтобы заставить ca работать с очень
           старыми версиями IE управления регистрацией сертификатов
           &quot;certenr3&quot;. Он использовал UniversalStrings почти для всего.
           Поскольку старый элемент управления имеет различные ошибки
           безопасности, его использование настоятельно не рекомендуется.
</p>
</dd>
<dt>-preserveDN <a name="ca-_002dpreserveDN"></a></dt>
<dd><p>Обычно порядок сертификата DN совпадает с порядком полей в
           соответствующем разделе политики. Когда эта опция установлена,
           порядок совпадает с запросом. Это в основном для совместимости
           со старым элементом регистрации IE, который принимает сертификаты
           только в том случае, если их DNs соответствуют порядку запроса.
           Это не нужно для Xenroll.
</p>
</dd>
<dt>-noemailDN <a name="ca-_002dnoemailDN"></a></dt>
<dd><p>Объект DN сертификата может содержать поле EMAIL, если оно
           присутствует в запросе DN, однако, это хорошая политика -
           просто установить e-mail в расширение altName сертификата.
           Когда эта опция установлена, поле EMAIL удаляется из темы
           сертификата и устанавливается только , в конце концов,
           в присутствующих расширениях. Ключевое слово email_in_dn может
           использоваться в файле конфигурации, чтобы включить это поведение.
</p>
</dd>
<dt>-batch <a name="ca-_002dbatch"></a></dt>
<dd><p>Это устанавливает пакетный режим. В этом режиме не будет задано
           никаких вопросов, и все сертификаты будут сертифицированы
           автоматически.
</p>
</dd>
<dt>-extensions section <a name="ca-_002dextensions-section"></a></dt>
<dd><p>Раздел файла конфигурации, содержащий расширения сертификата,
           которые будут добавлены при выдаче сертификата (по умолчанию
           используется x509_extensions, если не используется опция
           -extfile). Если раздел расширения отсутствует, то создается
           сертификат V1. Если раздел расширения присутствует (даже если
           он пуст), то создается сертификат V3. См. Страницу руководства:
           x509v3_config(5) для получения подробной информации о формате
           раздела расширения.
</p>
</dd>
<dt>-extfile file <a name="ca-_002dextfile-file"></a></dt>
<dd><p>Дополнительный файл конфигурации для чтения расширений
           сертификатов (с использованием раздела по умолчанию, если также
           не используется опция -extensions).
</p>
</dd>
<dt>-engine id <a name="ca-_002dengine-id"></a></dt>
<dd><p>Указание механизма (по его уникальной строке идентификатора)
           заставит ca попытаться получить функциональную ссылку на
           указанный механизм, тем самым инициализируя его при
           необходимости. Движок будет установлен по умолчанию для всех
           доступных алгоритмов.
</p>
</dd>
<dt>-subj arg <a name="ca-_002dsubj-arg"></a></dt>
<dd><p>Заменяет имя субъекта, указанное в запросе. Аргумент должен быть
           отформатирован как /type0=value0/type1=value1/type2=..... Символы
           ключевых слов могут быть экранированы с помощью / (обратная косая
           черта), и пробел сохраняется. Пустые значения разрешены, но
           соответствующий тип не будет включен в итоговый сертификат.
</p>
</dd>
<dt>-utf8 <a name="ca-_002dutf8"></a></dt>
<dd><p>Эта опция заставляет значения полей интерпретироваться как строки
           UTF8, по умолчанию они интерпретируются как ASCII. Это означает,
           что значения полей, запрашиваемые из терминала или полученные из
           файла конфигурации, должны быть действительными строками UTF8.
</p>
</dd>
<dt>-create_serial <a name="ca-_002dcreate_005fserial"></a></dt>
<dd><p>Если не удается прочитать серийный номер из текстового файла,
           как указано в конфигурации, указание этого параметра создает
           новый случайный серийный номер, который будет использоваться
           в качестве следующего серийного номера. Чтобы получить
           случайные серийные номера, используйте вместо этого флаг
           -rand_serial; это следует использовать только для простого
           error-recovery (исправления ошибок).
</p>
</dd>
<dt>-rand_serial <a name="ca-_002drand_005fserial"></a></dt>
<dd><p>Генерация большого случайного числа для использования в качестве
           серийного номера. Это переопределяет любую опцию или конфигурацию для
           использования файла серийного номера.
</p>
</dd>
<dt>-multivalue-rdn <a name="ca-_002dmultivalue_002drdn"></a></dt>
<dd><p>Эта опция заставляет аргумент -subj интерпретироваться с полной
           поддержкой многозначного RDN. Пример:
</p><div class="example">
<pre class="example">           /DC=org/DC=OpenSSL/DC=users/UID=123456+CN=John Doe

           Если -multi-rdn не используется, тогда значением UID является
           123456+CN=John Doe.
</pre></div>
</dd>
<dt>-rand file... <a name="ca-_002drand-file_002e_002e_002e"></a></dt>
<dd><p>Файл или файлы, содержащие случайные данные, используемые для
           заполнения генератора случайных чисел. Можно указать несколько
           файлов, разделенных символом, зависящим от ОС. Разделителем
           является &rsquo;;&rsquo; для MS-Windows, &rsquo;,&rsquo; для OpenVMS и &rsquo;:&rsquo; для всех остальных.
</p>
</dd>
<dt>[-writerand file] <a name="ca-_005b_002dwriterand-file_005d"></a></dt>
<dd><p>Записывает случайные данные в указанный файл при выходе. Это может
           быть использовано с последующим флагом -rand.
</p></dd>
</dl>
</dd>
<dt>CRL OPTIONS</dt>
<dd><dl compact="compact">
<dt>-gencrl</dt>
<dd><p>Эта опция генерирует CRL на основе информации в индексном файле.
</p>
</dd>
<dt>-crldays num <a name="ca-_002dcrldays-num"></a></dt>
<dd><p>Количество дней до следующего CRL. Это дни, которые нужно разместить в
           поле CRL nextUpdate.
</p>
</dd>
<dt>-crlhours num <a name="ca-_002dcrlhours-num"></a></dt>
<dd><p>Количество часов до следующего CRL.
</p>
</dd>
<dt>-revoke filename <a name="ca-_002drevoke-filename"></a></dt>
<dd><p>Имя файла, содержащее сертификат для отзыва.
</p>
</dd>
<dt>-valid filename <a name="ca-_002dvalid-filename"></a></dt>
<dd><p>Имя файла, содержащее сертификат для добавления действительной
           записи сертификата.
</p>
</dd>
<dt>-status serial <a name="ca-_002dstatus-serial"></a></dt>
<dd><p>Отображение статуса отзыва сертификата с указанным серийным
           номером и выходов.
</p>
</dd>
<dt>-updatedb <a name="ca-_002dupdatedb"></a></dt>
<dd><p>Обновляет индекс базы данных для очистки устаревших сертификатов.
</p>
</dd>
<dt>-crl_reason reason <a name="ca-_002dcrl_005freason-reason"></a></dt>
<dd><p>Отзыв reason, где reason является одним из: unspecified,
           keyCompromise, CACompromise, affiliationChanged, superseded,
           cessationOfOperation, certificateHold или же removeFromCRL.
           Сопоставление причины нечувствительно к регистру. Установка
           любой причины отзыва сделает CRL v2.
</p>
<p>На практике removeFromCRL не особенно полезен, потому что
           он используется только в delta CRL, который в настоящее
           время не реализован.
</p>
</dd>
<dt>-crl_hold instruction <a name="ca-_002dcrl_005fhold-instruction"></a></dt>
<dd><p>Это устанавливает код причины аннулирования CRL для
           certificateHold, а инструкцию hold - к ​​инструкции, которая
           должна быть OID. Хотя любой OID может использоваться только
           holdInstructionNone (использование которого не рекомендуется
           RFC2459), обычно используются holdInstructionCallIssuer или
           holdInstructionReject.
</p>
</dd>
<dt>-crl_compromise time <a name="ca-_002dcrl_005fcompromise-time"></a></dt>
<dd><p>Это устанавливает причину отзыва keyCompromise и компромисс
           время от времени. время должно быть в формате GeneralizedTime,
           то есть YYYYMMDDHHMMSSZ.
</p>
</dd>
<dt>-crl_CA_compromise time <a name="ca-_002dcrl_005fCA_005fcompromise-time"></a></dt>
<dd><p>Это то же самое, что crl_compromise, за исключением того, что
           причина отзыва установлена ​​в CACompromise.
</p>
</dd>
<dt>-crlexts section <a name="ca-_002dcrlexts-section"></a></dt>
<dd><p>Раздел файла конфигурации, содержащий расширения CRL для включения.
           Если секция расширения CRL отсутствует, то создается V1 CRL, если
           секция расширения CRL присутствует (даже если она пуста), то
           создается V2 CRL. Указанные расширения CRL являются расширениями
           CRL, а не расширениями CRL. Следует отметить, что некоторые программы
           (например, Netscape) не могут обрабатывать V2 CRLs. См. Страницу
           руководства x509v3_config(5) для получения подробной информации о
           формате раздела расширения.
</p></dd>
</dl>
</dd>
<dt>CONFIGURATION FILE OPTIONS <a name="ca-CONFIGURATION-FILE-OPTIONS"></a></dt>
<dd><p>Раздел файла конфигурации, содержащий параметры для ca, находится
       следующим образом: Если используется параметр командной строки -name,
       то он называет используемый раздел. В противном случае используемый
       раздел должен быть назван в опции default_ca раздела ca файла
       конфигурации (или в разделе по умолчанию файла конфигурации). Помимо
       default_ca, следующие параметры читаются непосредственно из раздела ca:
</p><div class="example">
<pre class="example">        RANDFILE  preserve
        msie_hack За исключением RANDFILE, это, вероятно, ошибка, которая
        может измениться в будущих версиях.
</pre></div>
<p>Многие параметры файла конфигурации идентичны параметрам командной
       строки. Если опция присутствует в файле конфигурации и в командной
       строке, используется значение командной строки. Если параметр описан
       как обязательный, он должен присутствовать в файле конфигурации или
       в эквиваленте командной строки (если есть).
</p><dl compact="compact">
<dt>oid_file <a name="ca-oid_005ffile"></a></dt>
<dd><p>Это указывает на файл, содержащий дополнительные OBJECT IDENTIFIERS.
           Каждая строка файла должна состоять из числовой формы идентификатора
           объекта, за которым следует пробел, затем короткое имя, затем
           пробел и, наконец, длинное имя.
</p>
</dd>
<dt>oid_section <a name="ca-oid_005fsection"></a></dt>
<dd><p>Это указывает на раздел в файле конфигурации, содержащий дополнительные
           идентификаторы объекта. Каждая строка должна состоять из короткого
           имени идентификатора объекта, затем = и числовой формы. Короткие и
           длинные имена одинаковы при использовании этой опции.
</p>
</dd>
<dt>new_certs_dir <a name="ca-new_005fcerts_005fdir"></a></dt>
<dd><p>Так же, как опция командной строки -outdir. Он указывает каталог,
           в который будут помещены новые сертификаты. Обязательный.
</p>
</dd>
<dt>certificate <a name="ca-certificate"></a></dt>
<dd><p>Так же, как -cert. Это указыввает файл, содержащий сертификат CA.
           Обязательный.
</p>
</dd>
<dt>private_key <a name="ca-private_005fkey"></a></dt>
<dd><p>То же, что опция -keyfile. Файл, содержащий закрытый ключ CA.
           Обязательный.
</p>
</dd>
<dt>RANDFILE <a name="ca-RANDFILE"></a></dt>
<dd><p>При запуске указанный файл загружается в генератор случайных
           чисел, а при выходе в него записывается 256 байт.
</p>
</dd>
<dt>default_days <a name="ca-default_005fdays"></a></dt>
<dd><p>Так же, как опция -days. Количество дней для сертификации сертификата.
</p>
</dd>
<dt>default_startdate <a name="ca-default_005fstartdate"></a></dt>
<dd><p>Так же, как опция -startdate. Дата начала сертификации сертификата.
           Если не установлено, используется текущее время.
</p>
</dd>
<dt>default_enddate <a name="ca-default_005fenddate"></a></dt>
<dd><p>Так же, как -enddate option. Должна присутствовать либо эта опция,
           либо default_days (или эквиваленты командной строки).
</p>
</dd>
<dt>default_crl_hours default_crl_days <a name="ca-default_005fcrl_005fhours-default_005fcrl_005fdays"></a></dt>
<dd><p>Так же, как параметры -crlhours и -crldays. Они будут использоваться
           только в том случае, если отсутствует опция командной строки. По
           крайней мере, один из них должен присутствовать для создания CRL.
</p>
</dd>
<dt>default_md <a name="ca-default_005fmd"></a></dt>
<dd><p>Так же, как опция -md. Обязательный, за исключением случаев, когда
           алгоритм подписи не требует дайджеста (Ed25519 и Ed448).
</p>
</dd>
<dt>database <a name="ca-database"></a></dt>
<dd><p>Текстовый файл базы данных для использования. Обязательный. Этот
           файл должен присутствовать, хотя изначально он будет пустым.
</p>
</dd>
<dt>unique_subject <a name="ca-unique_005fsubject"></a></dt>
<dd><p>Если задано значение yes, действительные записи сертификатов в
           базе данных должны иметь уникальные субъекты. если задано значение
           no, несколько допустимых записей сертификата могут иметь
           одинаковую тему. Значение по умолчанию - yes, чтобы быть
           совместимым со старыми версиями OpenSSL (pre 0.9.8). Однако,
           чтобы упростить сертификат CA для roll-over, рекомендуется
           использовать значение no, особенно в сочетании с параметром
           командной строки -selfsign.
</p>
<p>Обратите внимание, что в некоторых случаях допустимо создавать
           сертификаты без какой-либо темы. В случае, когда есть несколько
           сертификатов без субъектов, это не считается дубликатом.
</p>
</dd>
<dt>serial <a name="ca-serial"></a></dt>
<dd><p>Текстовый файл, содержащий следующий серийный номер для использования
           в шестнадцатеричном формате. Обязательный. Этот файл должен
           присутствовать и содержать действительный серийный номер.
</p>
</dd>
<dt>crlnumber <a name="ca-crlnumber"></a></dt>
<dd><p>Текстовый файл, содержащий следующий номер CRL для использования
           в шестнадцатеричном виде. Номер crl будет вставлен в CRLs, только
           если этот файл существует. Если этот файл присутствует, он должен
           содержать действительный номер CRL.
</p>
</dd>
<dt>x509_extensions <a name="ca-x509_005fextensions"></a></dt>
<dd><p>Такой же как -extensions.
</p>
</dd>
<dt>crl_extensions <a name="ca-crl_005fextensions"></a></dt>
<dd><p>Такой же как -crlexts.
</p>
</dd>
<dt>preserve <a name="ca-preserve"></a></dt>
<dd><p>Такой же как -preserveDN
</p>
</dd>
<dt>email_in_dn <a name="ca-email_005fin_005fdn"></a></dt>
<dd><p>Так же, как -noemailDN. Если вы хотите, чтобы поле EMAIL
           было удалено из DN сертификата, просто установите для него
           значение &rsquo;no&rsquo;. Если нет, то по умолчанию разрешается
           использовать EMAIL, указанный в сертификате DN.
</p>
</dd>
<dt>msie_hack <a name="ca-msie_005fhack"></a></dt>
<dd><p>Такой же как -msie_hack
</p>
</dd>
<dt>policy <a name="ca-policy"></a></dt>
<dd><p>Так же, как -policy. Обязательный. Смотрите раздел POLICY FORMAT
           для получения дополнительной информации.
</p>
</dd>
<dt>name_opt, cert_opt <a name="ca-name_005fopt_002c-cert_005fopt"></a></dt>
<dd><p>Эти параметры позволяют формат, используемый для отображения сведений
           о сертификате при запросе пользователя подтвердить подпись. Здесь можно
           использовать все параметры, поддерживаемые утилитами x509: опции
           -nameopt и -certopt, за исключением того, что no_signame и no_sigdump
           установлены постоянно и не могут быть отключены (это потому, что подпись
           сертификата не может быть отображена, так как сертификат не был подписан
           в данный момент) ,
</p>
<p>Для удобства значения ca_default принимаются обоими для получения
           разумного вывода.
</p>
<p>Если ни одна из этих опций не присутствует, используется формат,
           используемый в более ранних версиях OpenSSL. Настоятельно не
           рекомендуется использовать старый формат, поскольку он отображает
           только поля, упомянутые в разделе политики, неправильно обрабатывает
           типы строк с несколькими символами и не отображает расширения.
</p>
</dd>
<dt>copy_extensions <a name="ca-copy_005fextensions"></a></dt>
<dd><p>Определяет, как расширения в запросах сертификата должны быть
           обработаны. Если установлено значение none или этот параметр
           отсутствует, расширения игнорируются и не копируются в сертификат.
           Если установлено копирование, то любые расширения, присутствующие
           в запросе, которые еще не присутствуют, копируются в сертификат. Если
           установлено значение copyall, то все расширения в запросе копируются в
           сертификат: если расширение уже присутствует в сертификате, оно
           сначала удаляется. Посмотрите раздел WARNINGS перед использованием
           этой опции.
</p>
<p>Основное использование этого параметра - разрешить запросу
           сертификата указывать значения для определенных расширений, таких
           как subjectAltName.
</p></dd>
</dl>
</dd>
<dt>POLICY FORMAT</dt>
<dd><p>Раздел политики состоит из набора переменных, соответствующих полям
       сертификата DN. Если значение равно &quot;match&quot;, то значение поля должно
       совпадать с тем же полем в сертификате CA. Если значение равно
       &quot;supplied&quot;, оно должно присутствовать. Если значение &quot;optional&quot;, то
       оно может присутствовать. Любые поля, не упомянутые в разделе политики,
       автоматически удаляются, если не установлена ​​опция -preserveDN, но это
       можно считать скорее странным, чем предполагаемым поведением.
</p>
</dd>
<dt>SPKAC FORMAT</dt>
<dd><p>Входные данные для параметра командной строки -spkac представляют
       собой открытый ключ и вызов Netscape. Обычно это происходит из
       тега KEYGEN в форме HTML для создания нового закрытого ключа.
       Однако можно создать SPKAC с помощью утилиты spkac.
</p>
<p>Файл должен содержать переменную SPKAC, установленную на значение
       SPKAC, а также необходимые компоненты DN в виде пар имя-значение.
       Если вам нужно включить один и тот же компонент дважды, ему может
       предшествовать число и объект &rsquo;.&rsquo;.
</p>
<p>При обработке формата SPKAC выводом является DER, если используется
       флаг -out, но формат PEM, если отправляется на стандартный вывод или
       флаг -outdir.
</p>
</dd>
<dt>EXAMPLES (Примеры) <a name="ca-_0028_041f_0440_0438_043c_0435_0440_044b_0029"></a></dt>
<dd><p>Примечание: в этих примерах предполагается, что структура каталога ca
       уже настроена, а соответствующие файлы уже существуют. Обычно это включает
       в себя создание сертификата CA и закрытого ключа с req, файла серийного
       номера и пустого файла индекса и размещение их в соответствующих
       каталогах.
</p>
<p>Чтобы использовать пример файла конфигурации ниже, каталоги demoCA,
       demoCA/private и demoCA/newcerts должны быть созданы. Сертификат CA
       будет скопирован в demoCA/cacert.pem, а его закрытый ключ - в
       demoCA/private/cakey.pem. Будет создан файл demoCA/serial, содержащий,
       например, &quot;01&quot; и пустой индексный файл demoCA/index.txt.
</p><dl compact="compact">
<dt>Подпишите запрос на сертификат:</dt>
<dd>
<p>openssl ca -in req.pem -out newcert.pem
</p>
</dd>
<dt>Подпишите запрос на сертификат, используя расширения CA:</dt>
<dd>
<p>openssl ca -in req.pem -extensions v3_ca -out newcert.pem
</p>
</dd>
<dt>Создать объект CRL</dt>
<dd>
<p>openssl ca -gencrl -out crl.pem
</p>
</dd>
<dt>Подпишите несколько запросов:</dt>
<dd>
<p>openssl ca -infiles req1.pem req2.pem req3.pem
</p>
</dd>
<dt>Сертифицируйте Netscape SPKAC:</dt>
<dd>
<p>openssl ca -spkac spkac.txt
</p>
</dd>
<dt>Пример файла SPKAC (строка SPKAC для ясности обрезана):</dt>
<dd><div class="display">
<pre class="display">        SPKAC=MIG0MGAwXDANBgkqhkiG9w0BAQEFAANLADBIAkEAn7PDhCeV/xIxUg8V70YRxK2A5
        CN=Steve Test
        emailAddress=steve@openssl.org
        0.OU=OpenSSL Group
        1.OU=Another Group
</pre></div>
</dd>
<dt>Пример файла конфигурации с соответствующими разделами для ca:</dt>
<dd><div class="display">
<pre class="display">        [ ca ]
        default_ca      = CA_default            # Раздел по умолчанию ca

        [ CA_default ]

        dir            = ./demoCA              # корневой каталог
        database       = $dir/index.txt        # индексный файл
        new_certs_dir  = $dir/newcerts         # директория новых сертификатов

        certificate    = $dir/cacert.pem       # сертификат CA
        serial         = $dir/serial           # серийный номер файла
        #rand_serial    = yes                  # для случайного серийного номера#ов
        private_key    = $dir/private/cakey.pem# CA закрытый ключ
        RANDFILE       = $dir/private/.rand    # файл случайных чисел

        default_days   = 365                   # продолжительность сертификации в днях
        default_crl_days= 30                   # продолжительность действия запроса CRL
        default_md     = md5                   # использовать md 

        policy         = policy_any            # политика по умолчанию
        email_in_dn    = no                    # Не добавляйте email в сертификат DN

        name_opt       = ca_default            # Опция отображения имени субъекта
        cert_opt       = ca_default            # Опция отображения сертификата
        copy_extensions = none                 # Не копировать расширения из запроса

        [ policy_any ]
        countryName            = supplied
        stateOrProvinceName    = optional
        organizationName       = optional
        organizationalUnitName = optional
        commonName             = supplied
        emailAddress           = optional
</pre></div>
</dd>
<dt>FILES</dt>
<dd><p>Примечание. Расположение всех файлов может быть изменено с
       помощью параметров при компиляции записей файла
       конфигурации, переменных среды или параметров командной
       строки. Значения ниже отражают значения по умолчанию.
</p><div class="display">
<pre class="display">        /usr/local/ssl/lib/openssl.cnf - главный файл конфигурации
        ./demoCA                       - основной каталог CA
        ./demoCA/cacert.pem            - CA сертификат
        ./demoCA/private/cakey.pem     - CA закрытый ключ
        ./demoCA/serial                - CA файл серийного номера
        ./demoCA/serial.old            - CA файл резервной копии серийного номера
        ./demoCA/index.txt             - CA файл текстовой базы данных
        ./demoCA/index.txt.old         - CA файл резервной копии текстовой базы данных
        ./demoCA/certs                 - файл вывода сертификата
        ./demoCA/.rnd                  - CA случайная начальная информация
</pre></div>
</dd>
</dl>
</dd>
<dt>RESTRICTIONS</dt>
<dd><p>Индексный файл текстовой базы данных является важной частью процесса,
       и в случае повреждения его может быть трудно исправить. Теоретически
       возможно перестроить индексный файл из всех выданных сертификатов и
       текущего CRL: однако нет никакой возможности сделать это.
</p>       
<p>Функции V2 CRL, такие как delta CRLs, в настоящее время не
       поддерживаются.
</p>
<p>Хотя несколько запросов могут быть введены и обработаны одновременно,
       можно включить только один сертификат SPKAC или self-signed.
</p>
</dd>
<dt>BUGS</dt>
<dd><p>Использование текстовой базы данных in-memory может вызвать проблемы
       при наличии большого количества сертификатов, поскольку, как следует
       из названия, база данных должна храниться в памяти.
</p>
<p>Команда ca действительно нуждается в переписывании или требуемой
       функциональности на уровне команды или интерфейса, чтобы более
       дружественная утилита (скрипт Perl или GUI) могла правильно
       обрабатывать вещи. Сценарий CA.pl помогает немного, но не очень.
</p>
<p>Любые поля в запросе, которых нет в политике, удаляются без
       уведомления. Этого не происходит, если используется опция
       -preserveDN. Чтобы обеспечить отсутствие поля EMAIL внутри DN,
       как предлагает RFCs, независимо от содержания субъекта запроса,
       можно использовать опцию -noemailDN. Поведение должно быть более
       дружелюбным и настраиваемым.
</p>
<p>Отмена некоторых команд путем отказа от сертификации сертификата
       может создать пустой файл.
</p>
</dd>
<dt>WARNINGS</dt>
<dd><p>Команда ca причудливая и порой совершенно недружелюбная.
</p>
<p>Утилита ca изначально была задумана как пример того, как делать
       вещи в CA. Она не должна была использоваться как полноценный объект CA:
       тем не менее, некоторые люди используют её для этой цели.
</p>
<p>Команда ca по сути является однопользовательской командой:
       для разных файлов блокировка не выполняется, и попытки
       выполнить более одной команды ca в одной базе данных могут
       привести к непредсказуемым результатам.
</p>
<p>Опцию copy_extensions следует использовать с осторожностью.
       Если не позаботиться, это может быть угрозой безопасности. Например,
       если запрос сертификата содержит расширение basicConstraints с
       CA:TRUE, а значение copy_extensions установлено на copyall,
       и пользователь не обнаруживает это при отображении сертификата,
       то это вручит запрашивающему действительный сертификат CA.
</p>
<p>Этой ситуации можно избежать, установив copy_extensions для
       копирования и включив basicConstraints с CA:FALSE в файл
       конфигурации. Тогда, если запрос содержит расширение
       basicConstraints, он будет проигнорирован.
</p>
<p>Желательно также включить значения для других расширений,
       таких как keyUsage, чтобы запрос не предоставил свои
       собственные значения.
</p>
<p>Дополнительные ограничения могут быть наложены на сам сертификат CA.
       Например, если сертификат CA имеет:
</p>
<p>basicConstraints = CA:TRUE, pathlen:0
</p>
<p>тогда даже если сертификат выдан с помощью CA:TRUE, он
       не будет действительным.
</p>
</dd>
<dt>HISTORY</dt>
<dd><p>Поскольку OpenSSL 1.1.1, программа следует RFC5280. В частности,
       срок действия сертификата (указано любым из -startdate,
       -enddate и -days) будет кодироваться как UTCTime, если даты
       предшествуют году 2049 (включительно), и как GeneralizedTime,
       если даты относятся к 2050 году или позже.
</p>
</dd>
<dt>SEE ALSO</dt>
<dd><p>req(1), spkac(1), x509(1), CA.pl(1), config(5), x509v3_config(5)
</p>
</dd>
<dt>COPYRIGHT</dt>
<dd><p>Copyright 2000-2018 The OpenSSL Project Authors. All Rights Reserved.
</p>
<p>Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
       this file except in compliance with the License.  You can obtain a copy
       in the file LICENSE in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.
</p></dd>
</dl>
<p>1.1.1a                            2018-11-20                             CA(1)
</p><hr>
<a name="X509"></a>
<div class="header">
<p>
Next: <a href="#req" accesskey="n" rel="next">req</a>, Previous: <a href="#CA" accesskey="p" rel="prev">CA</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>
<a name="X509-1"></a>
<h2 class="chapter">6 X509</h2>

<p>X509                             OpenSSL                            X509
</p><dl compact="compact">
<dt>NAME</dt>
<dd><p>openssl-x509, x509 - Утилита отображения и подписи сертификатов
</p>
</dd>
<dt>SYNOPSIS</dt>
<dd><p>openssl x509 [<a href="#x509-_002dhelp">-help</a>] [<a href="#x509-_002dinform-DER_007cPEM">-inform DER|PEM</a>] [<a href="#x509-_002doutform-DER_007cPEM">-outform DER|PEM</a>] [<a href="#x509-_002dkeyform-DER_007cPEM">-keyform DER|PEM</a>] [-CAform DER|PEM] [-CAkeyform DER|PEM] [<a href="#x509-_002din-filename">-in filename</a>] [<a href="#x509-_002dout-filename">-out filename</a>] [<a href="#x509-_002dserial">-serial</a>] [<a href="#x509-_002dhash">-hash</a>] [<a href="#x509-_002dsubject_005fhash">-subject_hash</a>] [<a href="#x509-_002dsubject_005fhash_005fold">-subject_hash_old</a>] [<a href="#x509-_002dissuer_005fhash">-issuer_hash</a>] [<a href="#x509-_002dissuer_005fhash_005fold">-issuer_hash_old</a>] [<a href="#x509-_002docspid">-ocspid</a>] [<a href="#x509-_002dsubject">-subject</a>] [<a href="#x509-_002dissuer">-issuer</a>] [<a href="#x509-_002dnameopt-option">-nameopt option</a>](NAMEOPT OPTIONS&mdash;[<a href="#x509-compat">compat</a>[<a href="#x509-RFC2253">RFC2253</a>][<a href="#x509-oneline">oneline</a>][<a href="#x509-multiline">multiline</a>][<a href="#x509-esc_005f2253">esc_2253</a>][<a href="#x509-esc_005f2254">esc_2254</a>][<a href="#x509-esc_005fctrl">esc_ctrl</a>][<a href="#x509-esc_005fmsb">esc_msb</a>][<a href="#x509-use_005fquote">use_quote</a>][<a href="#x509-utf8">utf8</a>][<a href="#x509-ignore_005ftype">ignore_type</a>][<a href="#x509-show_005ftype">show_type</a>][<a href="#x509-dump_005fder">dump_der</a>][<a href="#x509-dump_005fnostr">dump_nostr</a>][<a href="#x509-dump_005fall">dump_all</a>][<a href="#x509-dump_005funknown">dump_unknown</a>][<a href="sep_multiline.html#x509-sep_005fcomma_005fplus">sep_semi_plus_space</a> in <cite>, sep_comma_plus, sep_comma_plus_space, sep_semi_plus_space,sep_multiline</cite>][<a href="#x509-dn_005frev">dn_rev</a>][<a href="oid.html#x509-nofname">lname</a> in <cite>, nofname, sname, lname, oid</cite>][<a href="#x509-align">align</a>][<a href="#x509-space_005feq">space_eq</a>]]&mdash;NAMEOPT OPTIONS) [<a href="#x509-_002demail">-email</a>] [<a href="#x509-_002docsp_005furi">-ocsp_uri</a>] [<a href="#x509-_002dstartdate">-startdate</a>] [<a href="#x509-_002denddate">-enddate</a>] [<a href="#x509-_002dpurpose">-purpose</a>] [<a href="#x509-_002ddates">-dates</a>] [<a href="#x509-_002dcheckend-arg">-checkend arg</a>] [<a href="#x509-_002dmodulus">-modulus</a>] [<a href="#x509-_002dpubkey">-pubkey</a>] [<a href="#x509-_002dfingerprint">-fingerprint</a>] [<a href="#x509-_002dalias">-alias</a>] [<a href="#x509-_002dnoout">-noout</a>] [<a href="#x509-_002dtrustout">-trustout</a>] [<a href="#x509-_002dclrtrust">-clrtrust</a>] [<a href="#x509-_002dclrreject">-clrreject</a>] [<a href="#x509-_002daddtrust-arg">-addtrust arg</a>] [<a href="#x509-_002daddreject-arg">-addreject arg</a>] [<a href="#x509-_002dsetalias-arg">-setalias arg</a>] [<a href="#x509-_002ddays-arg">-days arg</a>] [<a href="#x509-_002dset_005fserial-n">-set_serial n</a>] [<a href="#x509-_002dsignkey-filename">-signkey filename</a>] [<a href="#x509-_002dpassin-arg">-passin arg</a>] [<a href="#x509-_002dx509toreq">-x509toreq</a>] [<a href="#x509-_002dreq">-req</a>] [<a href="#x509-_002dCA-filename">-CA filename</a>] [<a href="#x509-_002dCAkey-filename">-CAkey filename</a>] [<a href="#x509-_002dCAcreateserial">-CAcreateserial</a>] [<a href="#x509-_002dCAserial-filename">-CAserial filename</a>] [<a href="#x509-_002dforce_005fpubkey-key">-force_pubkey key</a>] [<a href="#x509-_002dtext">-text</a>] (TEXT OPTIONS&mdash; [[<a href="#x509-compatible">compatible</a>][<a href="#x509-no_005fheader">no_header</a>][<a href="#x509-no_005fversion">no_version</a>][<a href="#x509-no_005fserial">no_serial</a>][<a href="#x509-no_005fsigname">no_signame</a>][<a href="#x509-no_005fvalidity">no_validity</a>][<a href="#x509-no_005fsubject">no_subject</a>][<a href="#x509-no_005fissuer">no_issuer</a>][<a href="#x509-no_005fpubkey">no_pubkey</a>][<a href="#x509-no_005fsigdump">no_sigdump</a>][<a href="#x509-no_005faux">no_aux</a>][<a href="#x509-no_005fextensions">no_extensions</a>][<a href="#x509-ext_005fdefault">ext_default</a>][<a href="#x509-ext_005ferror">ext_error</a>][<a href="#x509-ext_005fparse">ext_parse</a>][<a href="#x509-ext_005fdump">ext_dump</a>][<a href="#x509-ca_005fdefault">ca_default</a>]] &mdash;TEXT OPTIONS) [<a href="#x509-_002dext-extensions">-ext extensions</a>] [<a href="#x509-_002dcertopt-option">-certopt option</a>] [<a href="#x509-_002dC">-C</a>] [<a href="#x509-_002ddigest">-digest</a>] [<a href="#x509-_002dclrext">-clrext</a>] [<a href="#x509-_002dextfile-filename">-extfile filename</a>] [<a href="#x509-_002dextensions-section">-extensions section</a>] [<a href="#x509-_002drand-file_002e_002e_002e">-rand file...</a>]  [<a href="#x509-_005b_002dwriterand-file_005d">[-writerand file]</a>] [<a href="#x509-_002dengine-id">-engine id</a>] [<a href="#x509-_002dpreserve_005fdates">-preserve_dates</a>]
</p>
</dd>
<dt>DESCRIPTION</dt>
<dd><p>Команда x509 - это утилита многоцелевого сертификата. Его можно
       использовать для отображения информации о сертификате, преобразования
       сертификатов в различные формы, подписания запросов на сертификаты,
       таких как &quot;mini CA&quot;, или редактирования настроек доверия сертификатов.
</p>
<p>Поскольку существует большое количество параметров, они будут разбиты
       на различные разделы.
</p>
</dd>
<dt>OPTIONS</dt>
<dd><p>Параметры ввода, вывода и общего назначения
</p><dl compact="compact">
<dt>-help <a name="x509-_002dhelp"></a></dt>
<dd><p>Распечатайте сообщение об использовании.
</p>
</dd>
<dt>-inform DER|PEM <a name="x509-_002dinform-DER_007cPEM"></a></dt>
<dd><p>Это указывает формат ввода, обычно команда ожидает сертификат X509,
           но это может измениться, если присутствуют другие параметры, такие
           как -req. Формат DER - это кодировка сертификата DER, а PEM -
           кодировка base64 кодировки DER с добавлением строк верхнего и
           нижнего колонтитула. Формат по умолчанию - PEM.
</p>
</dd>
<dt>-outform DER|PEM <a name="x509-_002doutform-DER_007cPEM"></a></dt>
<dd><p>Это определяет формат вывода, параметры имеют то же значение и значение
           по умолчанию, что и опция -inform.
</p>
</dd>
<dt>-in filename <a name="x509-_002din-filename"></a></dt>
<dd><p>Здесь указывается имя входного файла для чтения сертификата или
           стандартного ввода, если эта опция не указана.
</p>
</dd>
<dt>-out filename <a name="x509-_002dout-filename"></a></dt>
<dd><p>Это указывает имя выходного файла для записи или стандартный вывод
           по умолчанию.
</p>
</dd>
<dt>-digest <a name="x509-_002ddigest"></a></dt>
<dd><p>Дайджест для использования. Это влияет на любой параметр подписи или
           отображения, использующий дайджест сообщения, например параметры
           -fingerprint, -signkey и -CA. Можно использовать любой дайджест,
           поддерживаемый командой OpenSSL dgst. Если не указано иное,
           SHA1 используется с -fingerprint или используется дайджест по
           умолчанию для алгоритма подписи, обычно SHA256.
</p>
</dd>
<dt>-rand file... <a name="x509-_002drand-file_002e_002e_002e"></a></dt>
<dd><p>Файл или файлы, содержащие случайные данные, используемые для заполнения
           генератора случайных чисел. Можно указать несколько файлов, разделенных
           символом, зависящим от ОС. Разделителем является ; for MS-Windows,
           , for OpenVMS, и : для остальных.
</p>
</dd>
<dt>[-writerand file] <a name="x509-_005b_002dwriterand-file_005d"></a></dt>
<dd><p>Записывает случайные данные в указанный файл при выходе. Это может быть
           использовано с последующим флагом -rand.
</p>
</dd>
<dt>-engine id <a name="x509-_002dengine-id"></a></dt>
<dd><p>Указание обработчика (по его уникальной строке идентификатора) приведет
           к тому, что x509 попытается получить функциональную ссылку на указанный
           обработчик, тем самым инициализируя его при необходимости. Движок будет
           установлен по умолчанию для всех доступных алгоритмов.
</p>
</dd>
<dt>-preserve_dates <a name="x509-_002dpreserve_005fdates"></a></dt>
<dd><p>При подписании сертификата сохраняйте даты &quot;notBefore&quot; и &quot;notAfter&quot;
           вместо их настройки на текущее время и продолжительность. Не может
           использоваться с опцией -days.
</p></dd>
</dl>
</dd>
<dt>Display Options</dt>
<dd><p>Примечание: параметры -alias и -purpose также являются параметрами отображения,
       но описаны в разделе TRUST SETTINGS.
</p><dl compact="compact">
<dt>-text <a name="x509-_002dtext"></a></dt>
<dd><p>Распечатывает сертификат в текстовом виде. Выводятся полные сведения,
           включая открытый ключ, алгоритмы подписи, имена эмитента и субъекта,
           серийный номер, любые имеющиеся расширения и любые параметры доверия.
</p>
</dd>
<dt>-ext extensions <a name="x509-_002dext-extensions"></a></dt>
<dd><p>Распечатывает расширения сертификата в текстовом виде. Расширения
           указываются через запятую, например, &quot;subjectAltName,subjectKeyIdentifier&quot;.
           См. Страницу руководства x509v3_config для имен расширений.
</p>
</dd>
<dt>-certopt option <a name="x509-_002dcertopt-option"></a></dt>
<dd><p>Настройте формат вывода, используемый с -text. Аргументом опции может
           быть одна опция или несколько опций, разделенных запятыми. Переключатель
           -certopt также можно использовать более одного раза для установки нескольких
           параметров. Смотрите раздел TEXT OPTIONS для получения дополнительной
           информации.
</p>
</dd>
<dt>-noout <a name="x509-_002dnoout"></a></dt>
<dd><p>Эта опция предотвращает вывод закодированной версии запроса.
</p>
</dd>
<dt>-pubkey <a name="x509-_002dpubkey"></a></dt>
<dd><p>Выводит блок SubjectPublicKeyInfo сертификата в формате PEM.
</p>
</dd>
<dt>-modulus <a name="x509-_002dmodulus"></a></dt>
<dd><p>Эта опция выводит значение модуля открытого ключа, содержащегося в
           сертификате.
</p>
</dd>
<dt>-serial <a name="x509-_002dserial"></a></dt>
<dd><p>Выводит серийный номер сертификата.
</p>
</dd>
<dt>-subject_hash <a name="x509-_002dsubject_005fhash"></a></dt>
<dd><p>Выводит &quot;hash&quot; имени субъекта сертификата. Это используется в OpenSSL
           для формирования индекса, позволяющего искать сертификаты в каталоге
           по имени субъекта.
</p>
</dd>
<dt>-issuer_hash <a name="x509-_002dissuer_005fhash"></a></dt>
<dd><p>Выводит &quot;hash&quot; имени издателя сертификата.
</p>
</dd>
<dt>-ocspid <a name="x509-_002docspid"></a></dt>
<dd><p>Выводит значения хеша OCSP для имени субъекта и открытого ключа.
</p>
</dd>
<dt>-hash <a name="x509-_002dhash"></a></dt>
<dd><p>Синоним &quot;-subject_hash&quot; по причинам обратной совместимости.
</p>
</dd>
<dt>-subject_hash_old <a name="x509-_002dsubject_005fhash_005fold"></a></dt>
<dd><p>Выводит &quot;hash&quot; имени субъекта сертификата, используя более старый алгоритм,
           который использовался OpenSSL до версии 1.0.0.
</p>
</dd>
<dt>-issuer_hash_old <a name="x509-_002dissuer_005fhash_005fold"></a></dt>
<dd><p>Выводит &quot;hash&quot; имени издателя сертификата, используя более старый алгоритм,
           который использовался OpenSSL до версии 1.0.0.
</p>
</dd>
<dt>-subject <a name="x509-_002dsubject"></a></dt>
<dd><p>Выводит имя субъекта.
</p>
</dd>
<dt>-issuer <a name="x509-_002dissuer"></a></dt>
<dd><p>Выводит имя эмитента.
</p>
</dd>
<dt>-nameopt option <a name="x509-_002dnameopt-option"></a></dt>
<dd><p>Опция, которая определяет, как отображаются имена субъекта или эмитента.
           Аргументом опции может быть одна опция или несколько опций, разделенных
           запятыми. В качестве альтернативы опция -nameopt может использоваться
           более одного раза для установки нескольких параметров. Смотрите раздел
           NAME OPTIONS для получения дополнительной информации.
</p>
</dd>
<dt>-email <a name="x509-_002demail"></a></dt>
<dd><p>Выводит адреса электронной почты, если таковые имеются.
</p>
</dd>
<dt>-ocsp_uri <a name="x509-_002docsp_005furi"></a></dt>
<dd><p>Выводит адрес(а) респондента OCSP, если есть.
</p>
</dd>
<dt>-startdate <a name="x509-_002dstartdate"></a></dt>
<dd><p>Распечатывает дату начала сертификата, то есть дату notBefore.
</p>
</dd>
<dt>-enddate <a name="x509-_002denddate"></a></dt>
<dd><p>Распечатывает срок действия сертификата, то есть дату notAfter.
</p>
</dd>
<dt>-dates <a name="x509-_002ddates"></a></dt>
<dd><p>Распечатывает даты начала и окончания срока действия сертификата.
</p>
</dd>
<dt>-checkend arg <a name="x509-_002dcheckend-arg"></a></dt>
<dd><p>Проверяет, истекает ли срок действия сертификата в течение
           следующих arg секунд, и выходит ли он ненулевым, если да,
           истекает или ноль, если нет.
</p>
</dd>
<dt>-fingerprint <a name="x509-_002dfingerprint"></a></dt>
<dd><p>Вычисляет и выводит дайджест версии всего сертификата в кодировке
           DER (см. Параметры дайджеста). Это обычно называется &quot;fingerprint&quot;.
           Из-за характера дайджестов сообщений отпечаток сертификата
           является уникальным для этого сертификата, и два сертификата
           с одинаковым отпечатком могут считаться одинаковыми.
</p>
</dd>
<dt>-C <a name="x509-_002dC"></a>Это выводит сертификат в виде исходного файла C.</dt>
</dl>
</dd>
<dt>Trust Settings</dt>
<dd><p>Доверенный сертификат - это обычный сертификат, к которому прикреплено
       несколько дополнительных частей информации, таких как разрешенное
       и запрещенное использование сертификата и объект &quot;alias&quot;.
</p>
<p>Обычно, когда сертификат проверяется, по крайней мере один
       сертификат должен быть &quot;trusted&quot;. По умолчанию доверенный
       сертификат должен храниться локально и должен быть корневым CA:
       любая цепочка сертификатов, оканчивающаяся на этом CA,
       может быть использована для любых целей.
</p>
<p>Настройки Trust в настоящее время используются только с корневым CA.
       Они позволяют лучше контролировать цели, для которых может использоваться
       корень CA. Например, CA может быть доверенным для клиента SSL, но
       не для использования сервера SSL.
</p>
<p>См. Описание утилиты проверки для получения дополнительной информации
       о значении параметров доверия.
</p>
<p>Будущие версии OpenSSL будут распознавать параметры доверия для любого
       сертификата: не только для корневых CA.
</p><dl compact="compact">
<dt>-trustout <a name="x509-_002dtrustout"></a></dt>
<dd><p>Это заставляет x509 выводить доверенный сертификат. Может быть введен
           обычный или доверенный сертификат, но по умолчанию выводится обычный
           сертификат, а любые параметры доверия отбрасываются. С опцией
           -trustout выводится доверенный сертификат. Доверенный сертификат
           автоматически выводится при изменении любых параметров доверия.
</p>
</dd>
<dt>-setalias arg <a name="x509-_002dsetalias-arg"></a></dt>
<dd><p>Устанавливает псевдоним сертификата. Это позволит ссылаться на сертификат,
           используя псевдоним, например, &quot;Steve&rsquo;s Certificate&quot;.
</p>
</dd>
<dt>-alias <a name="x509-_002dalias"></a></dt>
<dd><p>Выводит псевдоним сертификата, если есть.
</p>
</dd>
<dt>-clrtrust <a name="x509-_002dclrtrust"></a></dt>
<dd><p>Удаляет все разрешенные или доверенные виды использования сертификата.
</p>
</dd>
<dt>-clrreject <a name="x509-_002dclrreject"></a></dt>
<dd><p>Удаляет все запрещенные или отклоненные использования сертификата.
</p>
</dd>
<dt>-addtrust arg <a name="x509-_002daddtrust-arg"></a></dt>
<dd><p>Добавляет доверенный сертификат использования. Здесь можно использовать
           любое имя объекта, но в настоящее время используются только
           clientAuth (SSL client use), serverAuth (SSL server use),
           emailProtection (S/MIME email) и anyExtendedKeyUsage. Начиная с
           OpenSSL 1.1.0, последний из этих блоков блокирует все цели при
           отклонении или разрешает все цели при наличии доверия. Другие
           приложения OpenSSL могут определять дополнительное использование.
</p>
</dd>
<dt>-addreject arg <a name="x509-_002daddreject-arg"></a></dt>
<dd><p>Добавляет запрещенное использование. Он принимает те же значения,
           что и опция -addtrust.
</p>
</dd>
<dt>-purpose <a name="x509-_002dpurpose"></a></dt>
<dd><p>Эта опция выполняет тестирование расширений сертификата и выводит
           результаты. Для более полного описания смотрите раздел
           CERTIFICATE EXTENSIONS.
</p></dd>
</dl>
</dd>
<dt>Signing Options</dt>
<dd><p>Утилита x509 может использоваться для подписи сертификатов и запросов:
       она может вести себя как &quot;mini CA&quot;.
</p><dl compact="compact">
<dt>-signkey filename <a name="x509-_002dsignkey-filename"></a></dt>
<dd><p>Эта опция заставляет входной файл быть самоподписанным, используя
           предоставленный закрытый ключ.
</p>
<p>Если входной файл является сертификатом, он устанавливает имя
           эмитента на имя субъекта (т.е. делает его самоподписанным),
           изменяет открытый ключ на предоставленное значение и изменяет
           даты начала и окончания. Дата начала устанавливается на текущее
           время, а дата окончания устанавливается на значение, определенное
           параметром -days. Любые расширения сертификата сохраняются, если
           не указана опция -clrext; это включает, например, любые
           существующие расширения идентификатора ключа.
</p>
<p>Если вход представляет собой запрос сертификата, то самозаверяющий
           сертификат создается с использованием предоставленного закрытого ключа
           с использованием имени субъекта в запросе.
</p>
</dd>
<dt>-passin arg <a name="x509-_002dpassin-arg"></a></dt>
<dd><p>Ключевой источник пароля. Для получения дополнительной информации о
           формате arg см. Раздел PASS PHRASE ARGUMENTS в openssl(1).
</p>
</dd>
<dt>-clrext <a name="x509-_002dclrext"></a></dt>
<dd><p>Удалите все расширения из сертификата. Эта опция используется, когда
           сертификат создается из другого сертификата (например, с опциями
           -signkey или -CA). Обычно все расширения сохраняются.
</p>
</dd>
<dt>-keyform PEM|DER <a name="x509-_002dkeyform-DER_007cPEM"></a></dt>
<dd><p>Определяет формат (DER или PEM) файла закрытого ключа, используемого
           в опции -signkey.
</p>
</dd>
<dt>-days arg <a name="x509-_002ddays-arg"></a></dt>
<dd><p>Задает количество дней, в течение которых сертификат действителен. По
           умолчанию 30 дней. Не может использоваться с опцией -preserve_dates.
</p>
</dd>
<dt>-x509toreq <a name="x509-_002dx509toreq"></a></dt>
<dd><p>Преобразует сертификат в запрос сертификата. Опция -signkey используется
           для передачи требуемого закрытого ключа.
</p>
</dd>
<dt>-req <a name="x509-_002dreq"></a></dt>
<dd><p>По умолчанию ожидается сертификат на входе. С этой опцией вместо этого
           ожидается запрос сертификата.
</p>
</dd>
<dt>-set_serial n <a name="x509-_002dset_005fserial-n"></a></dt>
<dd><p>Указывает серийный номер для использования. Эта опция может использоваться
           либо с опциями -signkey или -CA. Если используется вместе с опцией -CA,
           файл серийного номера (как указано в опциях -CAserial или -CAcreateserial)
           не используется.
</p>
<p>Серийный номер может быть десятичным или шестнадцатеричным
           (если ему предшествует 0x).
</p>
</dd>
<dt>-CA filename <a name="x509-_002dCA-filename"></a></dt>
<dd><p>Указывает сертификат CA, который будет использоваться для подписи. Когда
           эта опция присутствует, x509 ведет себя как &quot;mini CA&quot;. Входной файл
           подписывается этим CA с использованием этой опции: это означает, что
           его имя издателя установлено на имя субъекта CA, и он имеет цифровую
           подпись с использованием закрытого ключа CA.
</p>
<p>Эта опция обычно сочетается с опцией -req. Без опции -req вход является
           сертификатом, который должен быть самозаверяющим.
</p>
</dd>
<dt>-CAkey filename <a name="x509-_002dCAkey-filename"></a></dt>
<dd><p>Устанавливает закрытый ключ CA для подписи сертификата. Если эта опция
           не указана, предполагается, что закрытый ключ CA присутствует в файле
           сертификата CA.
</p>
</dd>
<dt>-CAserial filename <a name="x509-_002dCAserial-filename"></a></dt>
<dd><p>Устанавливает файл серийного номера CA для использования.
</p>
<p>Когда опция -CA используется для подписи сертификата, она использует
           серийный номер, указанный в файле. Этот файл состоит из одной строки,
           содержащей четное число шестнадцатеричных цифр с используемым серийным
           номером. После каждого использования серийный номер увеличивается и
           снова записывается в файл.
</p>
<p>Имя файла по умолчанию состоит из базового имени файла сертификата CA
           с добавлением &quot;.srl&quot;. Например, если файл сертификата CA называется
           &quot;mycacert.pem&quot;, он ожидает найти файл серийного номера с именем
           &quot;mycacert.srl&quot;.
</p>
</dd>
<dt>-CAcreateserial <a name="x509-_002dCAcreateserial"></a></dt>
<dd><p>С помощью этой опции файл серийного номера CA создается, если он не
           существует: он будет содержать серийный номер &quot;02&quot;, а подписываемый
           сертификат будет иметь 1 в качестве серийного номера. Если указана
           опция -CA и файл серийного номера не существует, генерируется
           случайное число; это рекомендуемая практика.
</p>
</dd>
<dt>-extfile filename <a name="x509-_002dextfile-filename"></a></dt>
<dd><p>Файл, содержащий расширения сертификата для использования. Если не
           указано иное, расширения не добавляются в сертификат.
</p>
</dd>
<dt>-extensions section <a name="x509-_002dextensions-section"></a></dt>
<dd><p>Раздел для добавления расширений сертификатов. Если эта опция не указана,
           то расширения должны содержаться либо в безымянном (по умолчанию) section,
           либо в section по умолчанию должна содержаться переменная с именем
           &quot;extensions&quot;, которая содержит section для использования. Обратитесь к
           странице справочника x509v3_config за подробностями формата раздела
           расширения.
</p>
</dd>
<dt>-force_pubkey key <a name="x509-_002dforce_005fpubkey-key"></a></dt>
<dd><p>Когда сертификат создан, установите его открытый ключ на ключ вместо
           ключа в сертификате или запросе сертификата. Эта опция полезна для
           создания сертификатов, где алгоритм обычно не может подписывать
           запросы, например, DH.
</p>
<p>Формат или ключ можно указать с помощью опции -keyform.
</p></dd>
</dl>
</dd>
<dt>Name Options</dt>
<dd><p>Параметр командной строки nameopt определяет способ отображения имен
       субъекта и эмитента. Если переключатель nameopt отсутствует,
       используется формат &quot;oneline&quot; по умолчанию, который совместим с
       предыдущими версиями OpenSSL. Каждый параметр подробно описан ниже,
       всем параметрам может предшествовать a- чтобы отключить параметр. Обычно
       будут использоваться только первые четыре.
</p><dl compact="compact">
<dt>compat <a name="x509-compat"></a></dt>
<dd><p>Используйте старый формат.
</p>
</dd>
<dt>RFC2253 <a name="x509-RFC2253"></a></dt>
<dd><p>Отображает имена, совместимые с RFC2253, эквивалентные esc_2253, esc_ctrl,
           esc_msb, utf8, dump_nostr, dump_unknown, dump_der, sep_comma_plus,
           dn_rev и sname.
</p>
</dd>
<dt>oneline <a name="x509-oneline"></a></dt>
<dd><p>Онлайновый формат, более читабельный, чем RFC2253. Это эквивалентно
           указанию параметров esc_2253, esc_ctrl, esc_msb, utf8, dump_nostr,
           dump_der, use_quote, sep_comma_plus_space, space_eq и sname. Это
           значение по умолчанию, при котором параметры имени не указываются явно.
</p>
</dd>
<dt>multiline <a name="x509-multiline"></a></dt>
<dd><p>Многострочный формат. Это эквивалентно esc_ctrl, esc_msb, sep_multiline,
           space_eq, lname и align.
</p>
</dd>
<dt>esc_2253 <a name="x509-esc_005f2253"></a></dt>
<dd><p>Экранируйте символы &quot;special&quot;, необходимые для RFC2253 в поле.
           Это ,+&quot;&lt;&gt;;. Кроме того, # экранируется в начале строки и пробел
           в начале или конце строки.
</p>
</dd>
<dt>esc_2254 <a name="x509-esc_005f2254"></a></dt>
<dd><p>Экранируйте символы &quot;special&quot;, необходимые для RFC2254 в поле. Это
           символ NUL, такой же, как и ()*.
</p>
</dd>
<dt>esc_ctrl <a name="x509-esc_005fctrl"></a></dt>
<dd><p>Побег управляющих персонажей. Это те, у которых значения ASCII меньше,
           чем 0x20 (пробел) и символ удаления (0x7f). Они экранируются с
           использованием записи RFC2253 /XX (где XX - две шестнадцатеричные
           цифры, представляющие значение символа).
</p>
</dd>
<dt>esc_msb <a name="x509-esc_005fmsb"></a></dt>
<dd><p>Экранировать символы с установленным MSB, то есть со значениями ASCII
           больше, чем 127.
</p>
</dd>
<dt>use_quote <a name="x509-use_005fquote"></a></dt>
<dd><p>Избегает некоторых символов, окружая всю строку символами &quot;, без
           опции все экранирование выполняется с помощью символа /.
</p>
</dd>
<dt>utf8 <a name="x509-utf8"></a></dt>
<dd><p>Сначала преобразуйте все строки в формат UTF8. Это требуется для
           RFC2253. Если вам повезло иметь совместимый с UTF8 терминал, то
           использование этой опции (а не установка esc_msb) может привести
           к правильному отображению многобайтовых (международных) символов.
           Если эта опция отсутствует, то многобайтовые символы больше 0xff
           будут представлены в формате /UXXXX для битов 16 и /WXXXXXXXX для
           битов 32. Кроме того, если эта опция отключена, любой
           UTF8Strings будет сначала преобразован в их символьную форму.
</p>
</dd>
<dt>ignore_type <a name="x509-ignore_005ftype"></a></dt>
<dd><p>Эта опция никак не пытается интерпретировать многобайтовые символы.
           То есть их октеты содержимого просто сбрасываются, как будто один
           октет представляет каждого символа. Это полезно для диагностических
           целей, но приведет к довольно странным результатам.
</p>
</dd>
<dt>show_type <a name="x509-show_005ftype"></a></dt>
<dd><p>Показать тип строки символов ASN1. Тип предшествует содержимому поля.
           Например, &quot;BMPSTRING: Hello World&quot;.
</p>
</dd>
<dt>dump_der <a name="x509-dump_005fder"></a></dt>
<dd><p>Когда эта опция установлена, любые поля, которые должны быть
           зашифрованы, будут выгружаться с использованием кодировки поля DER.
           В противном случае будут отображаться только октеты содержимого.
           Оба варианта используют формат RFC2253 #XXXX....
</p>
</dd>
<dt>dump_nostr <a name="x509-dump_005fnostr"></a></dt>
<dd><p>Дамп не символьных строковых типов (например, OCTET STRING), если
           эта опция не установлена, тогда не символьные строковые типы будут
           отображаться так, как если бы каждый октет содержимого представлял
           один символ.
</p>
</dd>
<dt>dump_all <a name="x509-dump_005fall"></a></dt>
<dd><p>Дамп всех полей. Эта опция при использовании с dump_der позволяет
           однозначно определить кодировку структуры DER.
</p>
</dd>
<dt>dump_unknown <a name="x509-dump_005funknown"></a></dt>
<dd><p>Дамп любого поля, OID которого не распознается OpenSSL.
</p>
</dd>
<dt>sep_comma_plus, sep_comma_plus_space, sep_semi_plus_space,sep_multiline <a name="x509-sep_005fcomma_005fplus_002c-sep_005fcomma_005fplus_005fspace_002c-sep_005fsemi_005fplus_005fspace_002csep_005fmultiline"></a></dt>
<dd><p>Эти параметры определяют разделители полей. Первый символ находится
           между RDNs, а второй между несколькими AVAs (множественные AVAs очень
           редки и их использование не рекомендуется). Опции, оканчивающиеся на
           &quot;space&quot;, дополнительно помещают пробел после разделителя, чтобы
           сделать его более читаемым. Объект sep_multiline использует символ
           перевода строки для разделителя RDN и интервал + для разделителя AVA.
           Он также выравнивает поля четырьмя символами. Если разделитель полей
           не указан, по умолчанию используется sep_comma_plus_space.
</p>
</dd>
<dt>dn_rev <a name="x509-dn_005frev"></a></dt>
<dd><p>Поменяйте местами поля DN. Это требуется для RFC2253. В качестве
           побочного эффекта это также меняет порядок краткого AVAs, но это
           допустимо.
</p>
</dd>
<dt>nofname, sname, lname, oid <a name="x509-nofname_002c-sname_002c-lname_002c-oid"></a></dt>
<dd><p>Эти параметры изменяют способ отображения имени поля. nofname
           вообще не отображает поле. sname использует форму &quot;short name&quot;
           (например, CN для commonName). lname использует длинную форму.
           oid представляет OID в числовой форме и полезен для диагностических
           целей.
</p>
</dd>
<dt>align <a name="x509-align"></a></dt>
<dd><p>Выровняйте значения полей для более удобочитаемого вывода.
           Используется только с sep_multiline.
</p>
</dd>
<dt>space_eq <a name="x509-space_005feq"></a></dt>
<dd><p>Размещает пробелы вокруг символа =, который следует за именем поля.
</p></dd>
</dl>
</dd>
<dt>Text Options</dt>
<dd><p>Наряду с настройкой формата вывода имени, также можно настроить
       фактические поля, напечатанные с использованием параметров certopt,
       когда присутствует текстовый параметр. Поведение по умолчанию -
       печать всех полей.
</p><dl compact="compact">
<dt>compatible <a name="x509-compatible"></a></dt>
<dd><p>Используйте старый формат. Это эквивалентно тому, что вообще не
           указывается никаких параметров вывода.
</p>
</dd>
<dt>no_header <a name="x509-no_005fheader"></a></dt>
<dd><p>Не печатайте информацию заголовка: это строки, обозначающие
           &quot;Certificate&quot; и &quot;Data&quot;.
</p>
</dd>
<dt>no_version <a name="x509-no_005fversion"></a></dt>
<dd><p>Не печатайте номер версии.
</p>
</dd>
<dt>no_serial <a name="x509-no_005fserial"></a></dt>
<dd><p>Не печатайте серийный номер.
</p>
</dd>
<dt>no_signame <a name="x509-no_005fsigname"></a></dt>
<dd><p>Не распечатывайте используемый алгоритм подписи.
</p>
</dd>
<dt>no_validity <a name="x509-no_005fvalidity"></a></dt>
<dd><p>Не печатайте валидность, это поля notBefore и notAfter.
</p>
</dd>
<dt>no_subject <a name="x509-no_005fsubject"></a></dt>
<dd><p>Не печатайте имя subject.
</p>
</dd>
<dt>no_issuer <a name="x509-no_005fissuer"></a></dt>
<dd><p>Не печатайте имя issuer.
</p>
</dd>
<dt>no_pubkey <a name="x509-no_005fpubkey"></a></dt>
<dd><p>Не распечатывайте public key.
</p>
</dd>
<dt>no_sigdump <a name="x509-no_005fsigdump"></a></dt>
<dd><p>Не распечатывайте шестнадцатеричный дамп подписи сертификата.
</p>
</dd>
<dt>no_aux <a name="x509-no_005faux"></a></dt>
<dd><p>Не распечатывайте информацию о доверии сертификата.
</p>
</dd>
<dt>no_extensions <a name="x509-no_005fextensions"></a></dt>
<dd><p>Не печатайте никаких расширений X509V3.
</p>
</dd>
<dt>ext_default <a name="x509-ext_005fdefault"></a></dt>
<dd><p>Сохранение поведения расширения по умолчанию: попытка
           распечатать неподдерживаемые расширения сертификата.
</p>
</dd>
<dt>ext_error <a name="x509-ext_005ferror"></a></dt>
<dd><p>Распечатайте сообщение об ошибке для неподдерживаемых
           расширений сертификата.
</p>
</dd>
<dt>ext_parse <a name="x509-ext_005fparse"></a></dt>
<dd><p>ASN1 анализирует неподдерживаемые расширения.
</p>
</dd>
<dt>ext_dump <a name="x509-ext_005fdump"></a></dt>
<dd><p>Hex dump неподдерживаемые расширения.
</p>
</dd>
<dt>ca_default <a name="x509-ca_005fdefault"></a></dt>
<dd><p>Значение, используемое утилитой ca, эквивалентно no_issuer,
           no_pubkey, no_header, и no_version.
</p></dd>
</dl>
</dd>
<dt>EXAMPLES</dt>
<dd><p>Примечание: в этих примерах &rsquo;\&rsquo; означает, что пример должен
       быть в одной строке.
</p><dl compact="compact">
<dt>Показать содержимое сертификата:</dt>
<dd>
<p>openssl x509 -in cert.pem -noout -text
</p>
</dd>
<dt>Показать расширение сертификата &quot;Subject Alternative Name&quot;:</dt>
<dd>
<p>openssl x509 -in cert.pem -noout -ext subjectAltName
</p>
</dd>
<dt>Показать больше расширений сертификата:</dt>
<dd>
<p>openssl x509 -in cert.pem -noout -ext subjectAltName,nsCertType
</p>
</dd>
<dt>Показать серийный номер сертификата:</dt>
<dd>
<p>openssl x509 -in cert.pem -noout -serial
</p>
</dd>
<dt>Вывести имя субъекта сертификата:</dt>
<dd>
<p>openssl x509 -in cert.pem -noout -subject
</p>
</dd>
<dt>Отобразить имя субъекта сертификата в форме RFC2253:</dt>
<dd>
<p>openssl x509 -in cert.pem -noout -subject -nameopt RFC2253
</p>
</dd>
<dt>Выведите имя субъекта сертификата в oneline форме на терминале, поддерживающем UTF8:</dt>
<dd>
<p>openssl x509 -in cert.pem -noout -subject -nameopt oneline,-esc_msb
</p>
</dd>
<dt>Покажите сертификат SHA1 по отпечатку пальца:</dt>
<dd>
<p>openssl x509 -sha1 -in cert.pem -noout -fingerprint
</p>
</dd>
<dt>Преобразовать сертификат из формата PEM в формат DER:</dt>
<dd>
<p>openssl x509 -in cert.pem -inform PEM -out cert.der -outform DER
</p>
</dd>
<dt>Преобразовать сертификат в запрос сертификата:</dt>
<dd>
<p>openssl x509 -x509toreq -in cert.pem -out req.pem -signkey key.pem
</p>
</dd>
<dt>Преобразуйте запрос сертификата в самоподписанный сертификат, используя расширения для CA:</dt>
<dd>
<p>openssl x509 -req -in careq.pem -extfile openssl.cnf -extensions v3_ca \<br>
               -signkey key.pem -out cacert.pem
</p>
</dd>
<dt>Подпишите запрос на сертификат, используя вышеуказанный сертификат CA, и добавьте расширения сертификата пользователя:</dt>
<dd>
<p>openssl x509 -req -in req.pem -extfile openssl.cnf -extensions v3_usr \<br>
               -CA cacert.pem -CAkey key.pem -CAcreateserial
</p>
</dd>
<dt>Установите сертификат как надежный для использования клиентом SSL и измените его псевдоним на &quot;Steve&rsquo;s Class 1 CA&quot;</dt>
<dd>
<p>openssl x509 -in cert.pem -addtrust clientAuth \<br>
               -setalias &quot;Steve&rsquo;s Class 1 CA&quot; -out trust.pem
</p></dd>
</dl>
</dd>
<dt>NOTES</dt>
<dd><dl compact="compact">
<dt>Формат PEM использует строки верхнего и нижнего колонтитула:</dt>
<dd>
<p>&mdash;&ndash;BEGIN CERTIFICATE&mdash;&ndash;
        &mdash;&ndash;END CERTIFICATE&mdash;&ndash;
</p>
</dd>
<dt>он также будет обрабатывать файлы, содержащие:</dt>
<dd>
<p>&mdash;&ndash;BEGIN X509 CERTIFICATE&mdash;&ndash;
        &mdash;&ndash;END X509 CERTIFICATE&mdash;&ndash;
</p>
</dd>
<dt>Доверенные сертификаты имеют строки</dt>
<dd>
<p>&mdash;&ndash;BEGIN TRUSTED CERTIFICATE&mdash;&ndash;
        &mdash;&ndash;END TRUSTED CERTIFICATE&mdash;&ndash;
</p></dd>
</dl>
<p>Преобразование в формат UTF8, используемый с опциями имени,
       предполагает, что T61Strings использует набор символов
       ISO8859-1. Это неправильно, но Netscape и MSIE делают это так же,
       как и многие сертификаты. Поэтому, хотя это неверно, более
       вероятно, что большинство сертификатов будет отображаться правильно
</p>
<p>Опция -email ищет имя субъекта и расширение альтернативного имени
       субъекта. Будут распечатаны только уникальные адреса электронной почты:
       один и тот же адрес не будет напечатан более одного раза.
</p>
</dd>
<dt>CERTIFICATE EXTENSIONS</dt>
<dd><p>Опция -purpose проверяет расширения сертификата и определяет, для чего
       сертификат может использоваться. Фактические проверки довольно сложны
       и включают различные способы взлома и обходные пути для обработки
       поврежденных сертификатов и программного обеспечения.
</p>
<p>Тот же код используется при проверке недоверенных сертификатов в цепочках,
       поэтому этот раздел полезен, если цепочка отклоняется кодом проверки.
</p>
<p>Флаг CA расширения basicConstraints используется для определения, может ли
       сертификат использоваться в качестве CA. Если флаг CA имеет значение true,
       то это CA, если флаг CA имеет значение false, то это не CA. Все CAs должны
       иметь флаг CA, установленный в true.
</p>
<p>Если расширение basicConstraints отсутствует, то сертификат считается
       &quot;possible CA&quot;, другие расширения проверяются в соответствии с
       предполагаемым использованием сертификата. В этом случае выдается
       предупреждение, потому что сертификат на самом деле не должен
       рассматриваться как CA: однако он может быть CA для работы с неработающим
       программным обеспечением.
</p>
<p>Если сертификат является сертификатом V1 (и, следовательно, не имеет
       расширений) и самоподписан, предполагается, что он также является CA, но
       снова выдается предупреждение: это позволяет обойти проблему с корнями
       Verisign, которые являются самозаверяющими сертификатами V1 ,
</p>
<p>Если расширение keyUsage присутствует, тогда применяются дополнительные
       ограничения на использование сертификата. Сертификат CA должен иметь
       установленный бит keyCertSign, если присутствует расширение keyUsage.
</p>
<p>Расширение использования расширенного ключа накладывает дополнительные
       ограничения на использование сертификата. Если это расширение присутствует
       (критическое или нет), ключ может использоваться только для указанных целей.
</p>
<p>Полное описание каждого теста приведено ниже. Комментарии относительно базовых
       ограничений и сертификатов keyUsage и V1, приведенные выше, относятся ко всем
       сертификатам CA.
</p><dl compact="compact">
<dt>SSL Client</dt>
<dd><p>Расширение расширенного использования ключа должно отсутствовать или
           включать &quot;web client authentication&quot; OID. keyUsage должен отсутствовать
           или должен иметь установленный бит digitalSignature. Тип сертификата
           Netscape должен отсутствовать или в нем должен быть установлен бит
           клиента SSL.
</p>
</dd>
<dt>SSL Client CA</dt>
<dd><p>Расширение расширенного использования ключа должно отсутствовать или
           включать &quot;web client authentication&quot; OID. Тип сертификата Netscape должен
           отсутствовать или должен иметь установленный бит SSL CA: это используется
           в качестве обходного пути, если расширение basicConstraints отсутствует.
</p>
</dd>
<dt>SSL Server</dt>
<dd><p>Расширение расширенного использования ключа должно отсутствовать или
           включать &quot;web server authentication&quot; и / или один из SGC OIDs. keyUsage
           должен отсутствовать или должен иметь digitalSignature, установленный
           keyEncipherment или оба установленных бита. Тип сертификата Netscape
           должен отсутствовать или иметь установленный бит сервера SSL.
</p>
</dd>
<dt>SSL Server CA</dt>
<dd><p>Расширение расширенного использования ключа должно отсутствовать или
           включать &quot;web server authentication&quot; и / или один из SGC OIDs. Тип
           сертификата Netscape должен отсутствовать или должен быть установлен
           бит SSL CA: это используется в качестве обходного пути, если расширение
           basicConstraints отсутствует.
</p>
</dd>
<dt>Netscape SSL Server</dt>
<dd><p>Чтобы клиенты Netscape SSL могли подключаться к серверу SSL, он должен
           иметь установленный бит keyEncipherment, если присутствует расширение
           keyUsage. Это не всегда верно, потому что некоторые комплекты шифров
           используют ключ для цифровой подписи. В остальном он такой же, как
           обычный сервер SSL.
</p>
</dd>
<dt>Common S/MIME Client Tests</dt>
<dd><p>Расширение расширенного использования ключа должно отсутствовать или
           включать &quot;email protection&quot; OID. Тип сертификата Netscape должен
           отсутствовать или должен иметь установленный бит S/MIME. Если бит типа
           S/MIME не установлен в типе сертификата Netscape, тогда бит клиента SSL
           допускается в качестве альтернативы, но отображается предупреждение: это
           связано с тем, что некоторые сертификаты Verisign не устанавливают бит
           S/MIME.
</p>
</dd>
<dt>S/MIME Signing</dt>
<dd><p>В дополнение к обычным тестам клиента S/MIME необходимо установить бит
           digitalSignature или бит nonRepudiation, если присутствует расширение keyUsage.
</p>
</dd>
<dt>S/MIME Encryption</dt>
<dd><p>В дополнение к обычным тестам S/MIME должен быть установлен бит
           keyEncipherment, если присутствует расширение keyUsage.
</p>
</dd>
<dt>S/MIME CA</dt>
<dd><p>Расширение расширенного использования ключа должно отсутствовать или
           включать &quot;email protection&quot; OID. Тип сертификата Netscape должен
           отсутствовать или должен иметь установленный бит S/MIME CA: это
           используется как обходной путь, если расширение basicConstraints
           отсутствует.
</p>
</dd>
<dt>CRL Signing</dt>
<dd><p>Расширение keyUsage должно отсутствовать или в нем должен быть
           установлен бит подписи CRL.
</p>
</dd>
<dt>CRL Signing CA</dt>
<dd><p>Применяются обычные тесты CA. За исключением этого случая должно
           присутствовать расширение basicConstraints.
</p></dd>
</dl>
</dd>
<dt>BUGS</dt>
<dd><p>Расширения в сертификатах не переносятся в запросы сертификатов и наоборот.
</p>
<p>Можно создать недействительные сертификаты или запросы, указав неправильный
       закрытый ключ или в некоторых случаях используя несовместимые параметры: они
       должны быть проверены.
</p>
<p>Должны быть опции для явной установки таких вещей, как даты начала и окончания,
       а не смещение от текущего времени.
</p>
</dd>
<dt>SEE ALSO</dt>
<dd><p>req(1), ca(1), genrsa(1), gendsa(1), verify(1), x509v3_config(5)
</p>
</dd>
<dt>HISTORY</dt>
<dd><p>Алгоритм хеширования, использовавшийся в параметрах -subject_hash и
       -issuer_hash до OpenSSL 1.0.0, был основан на устаревшем алгоритме MD5 и
       кодировании различаемого имени. В OpenSSL 1.0.0 и более поздних версиях он
       основан на канонической версии DN с использованием SHA1. Это означает, что
       любые каталоги, использующие старую форму, должны перестраивать свои ссылки,
       используя c_rehash или аналогичные.
</p>
</dd>
<dt>COPYRIGHT</dt>
<dd><p>Copyright 2000-2018 The OpenSSL Project Authors. All Rights Reserved.
</p><br>
<p>Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
       this file except in compliance with the License.  You can obtain a copy
       in the file LICENSE in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.
</p><br>
<p>1.1.1a                            2018-11-20                           X509(1)
</p></dd>
</dl>
<hr>
<a name="req"></a>
<div class="header">
<p>
Next: <a href="#ASN1PARSE" accesskey="n" rel="next">ASN1PARSE</a>, Previous: <a href="#X509" accesskey="p" rel="prev">X509</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>
<a name="req-1"></a>
<h2 class="chapter">7 req</h2>
<p>REQ(1)                              OpenSSL                             REQ(1)
</p><dl compact="compact">
<dt>NAME</dt>
<dd><p>openssl-req, req - PKCS#10 сертификат запроса и утилита
       генерации сертификата
</p>
</dd>
<dt>SYNOPSIS</dt>
<dd><p>openssl req [<a href="#req-_002dhelp">-help</a>] [<a href="#req-_002dinform-DER_007cPEM">-inform DER|PEM</a>] [<a href="#req-_002doutform-DER_007cPEM">-outform DER|PEM</a>] [<a href="#req-_002din-filename">-in filename</a>] [<a href="#req-_002dpassin-arg">-passin arg</a>] [<a href="#req-_002dout-filename">-out filename</a>] [<a href="#req-_002dpassout-arg">-passout arg</a>] [<a href="#req-_002dtext">-text</a>] [<a href="#req-_002dpubkey">-pubkey</a>] [<a href="#req-_002dnoout">-noout</a>] [<a href="#req-_002dverify">-verify</a>] [<a href="#req-_002dmodulus">-modulus</a>] [<a href="#req-_002dnew">-new</a>] [<a href="#req-_002drand-file_002e_002e_002e">-rand file...</a>] [<a href="#req-_005b_002dwriterand-file_005d">[-writerand file]</a>] [<a href="#req-_002dnewkey-arg">-newkey arg</a>] [<a href="#req-rsa_003anbits">-newkey rsa:bits</a>] [<a href="#req-_002dnewkey-alg_003afile">-newkey alg:file</a>] [<a href="#req-_002dpkeyopt-opt_003avalue">-pkeyopt opt:value</a>] [<a href="#req-_002dnodes">-nodes</a>] [<a href="#req-_002dkey-filename">-key filename</a>] [<a href="#req-_002dkeyform-PEM_007cDER">-keyform PEM|DER</a>] [<a href="#req-_002dkeyout-filename">-keyout filename</a>] [<a href="#req-_002dkeygen_005fengine-id">-keygen_engine id</a>] [<a href="#req-_002ddigest">-digest</a>] [<a href="#req-_002dconfig-filename">-config filename</a>] [<a href="#req-_002dmultivalue_002drdn">-multivalue-rdn</a>] [<a href="#req-_002dx509">-x509</a>] [<a href="#req-_002ddays-n">-days n</a>] [<a href="#req-_002dset_005fserial-n">-set_serial n</a>] [<a href="#req-_002dnewhdr">-newhdr</a>] [<a href="#req-_002daddext-ext">-addext ext</a>] [<a href="#req-_002dextensions-section">-extensions section</a>] [<a href="#req-_002dreqexts-section">-reqexts section</a>] [<a href="#req-_002dprecert">-precert</a>] [<a href="#req-_002dutf8">-utf8</a>] [<a href="#req-_002dnameopt-option">-nameopt option</a>] [<a href="#req-_002dreqopt">-reqopt</a>] [<a href="#req-_002dsubject">-subject</a>] [<a href="#req-_002dsubj-arg">-subj arg</a>] [<a href="#req-_002dbatch">-batch</a>] [<a href="#req-_002dverbose">-verbose</a>] [<a href="#req-_002dengine-id">-engine id</a>]
</p>
</dd>
<dt>DESCRIPTION</dt>
<dd><p>Команда req в первую очередь создает и обрабатывает запросы сертификатов
       в формате PKCS#10. Кроме того, она может создавать самозаверяющие
       сертификаты для использования в качестве например корневых CA.
</p>
</dd>
<dt>OPTIONS</dt>
<dd><dl compact="compact">
<dt>-help <a name="req-_002dhelp"></a></dt>
<dd><p>Распечатайте сообщение об использовании.
</p>
</dd>
<dt>-inform DER|PEM <a name="req-_002dinform-DER_007cPEM"></a></dt>
<dd><p>Это определяет формат ввода. Опция DER использует закодированную
           форму ASN1 DER, совместимую с PKCS#10. Форма PEM является форматом
           по умолчанию: она состоит из формата DER base64, закодированного
           с дополнительными строками верхнего и нижнего колонтитула.
</p>
</dd>
<dt>-outform DER|PEM <a name="req-_002doutform-DER_007cPEM"></a></dt>
<dd><p>Это определяет формат вывода, параметры имеют то же значение и
           значение по умолчанию, что и опция -inform.
</p>
</dd>
<dt>-in filename <a name="req-_002din-filename"></a></dt>
<dd><p>Здесь указывается имя входного файла для чтения запроса или стандартный
           ввод, если эта опция не указана. Запрос читается только в том случае,
           если не указаны параметры создания (-new и -newkey).
</p>
</dd>
<dt>-passin arg <a name="req-_002dpassin-arg"></a></dt>
<dd><p>Источник пароля входного файла. Для получения дополнительной информации
           о формате arg см. Раздел PASS PHRASE ARGUMENTS в openssl (1).
</p>
</dd>
<dt>-out filename <a name="req-_002dout-filename"></a></dt>
<dd><p>Это указывает имя выходного файла для записи или стандартный вывод
           по умолчанию.
</p>
</dd>
<dt>-passout arg <a name="req-_002dpassout-arg"></a></dt>
<dd><p>Исходный файл с паролем источника. Для получения дополнительной
           информации о формате arg см. Раздел PASS PHRASE ARGUMENTS в openssl (1).
</p>
</dd>
<dt>-text <a name="req-_002dtext"></a></dt>
<dd><p>Распечатывает запрос сертификата в текстовом виде.
</p>
</dd>
<dt>-subject <a name="req-_002dsubject"></a></dt>
<dd><p>Распечатывает тему запроса (или сертификат subject, если указан -x509)
</p>
</dd>
<dt>-pubkey <a name="req-_002dpubkey"></a></dt>
<dd><p>Выводит открытый ключ.
</p>
</dd>
<dt>-noout <a name="req-_002dnoout"></a></dt>
<dd><p>Эта опция предотвращает вывод закодированной версии запроса.
</p>
</dd>
<dt>-modulus <a name="req-_002dmodulus"></a></dt>
<dd><p>Эта опция выводит значение модуля открытого ключа, содержащегося в запросе.
</p>
</dd>
<dt>-verify <a name="req-_002dverify"></a></dt>
<dd><p>Проверяет подпись на запросе.
</p>
</dd>
<dt>-new <a name="req-_002dnew"></a></dt>
<dd><p>Эта опция генерирует новый запрос сертификата. Он запросит
           у пользователя соответствующие значения поля. Фактические
           запрашиваемые поля и их максимальный и минимальный размеры
           указываются в файле конфигурации и любых запрошенных расширениях.
</p>
<p>Если опция -key не используется, она сгенерирует новый закрытый
           ключ RSA, используя информацию, указанную в файле конфигурации.
</p>
</dd>
<dt>-rand file... <a name="req-_002drand-file_002e_002e_002e"></a></dt>
<dd><p>Файл или файлы, содержащие случайные данные, используемые для
           заполнения генератора случайных чисел. Можно указать несколько
           файлов, разделенных символом, зависящим от ОС. Разделителем
           является (;) для MS-Windows, (,) для OpenVMS, и (:) для других.
</p>
</dd>
<dt>[-writerand file] <a name="req-_005b_002dwriterand-file_005d"></a></dt>
<dd><p>Записывает случайные данные в указанный файл при выходе. Это может
           быть использовано с последующим флагом -rand.
</p>
</dd>
<dt>-newkey arg <a name="req-_002dnewkey-arg"></a></dt>
<dd><p>Эта опция создает новый запрос сертификата и новый закрытый ключ.
           Аргумент принимает одну из нескольких форм. rsa:nbits <a name="req-rsa_003anbits"></a>,
           где nbits - это количество битов, генерирует ключ RSA размером nbit. Если
           nbits не указан, т.е. указан -newkey rsa, используется размер ключа
           по умолчанию, указанный в файле конфигурации.
</p>
<p>Все остальные алгоритмы поддерживают форму -newkey alg:file <a name="req-_002dnewkey-alg_003afile"></a>, где
           файл может быть файлом параметров алгоритма, созданным командой
           genpkey -genparam или сертификатом X.509 для ключа с
           соответствующим алгоритмом.
</p>
<p>param:file генерирует ключ, используя файл параметров или файл
           сертификата, алгоритм определяется параметрами. algname:file
           использует алгоритм algname и файл параметров file:, оба алгоритма
           должны совпадать, иначе возникает ошибка. algname просто использует
           алгоритм algname, а параметры, если необходимо, должны быть указаны
           через параметр -pkeyopt.
</p>
<p>dsa:filename генерирует ключ DSA, используя параметры в имени файла
           filenameфайла. ec: filename генерирует ключ EC (может использоваться
           как с алгоритмами ECDSA, так и с ECDH), gost2001:filename генерирует
           ключ GOST R 34.10-2001 (требуется механизм ccgost, настроенный в
           файле конфигурации). Если указан только gost2001, набор параметров
           должен быть указан как -pkeyopt paramset:X
</p>
</dd>
<dt>-pkeyopt opt:value <a name="req-_002dpkeyopt-opt_003avalue"></a></dt>
<dd><p>Установите опцию алгоритма открытого ключа opt в значение. Точный
           набор поддерживаемых параметров зависит от используемого алгоритма
           открытого ключа и его реализации. Смотрите KEY GENERATION OPTIONS
           на странице руководства genpkey для более подробной информации.
</p>
</dd>
<dt>-key filename <a name="req-_002dkey-filename"></a></dt>
<dd><p>Это указывает файл для чтения закрытого ключа из. Он также принимает
           закрытые ключи формата PKCS#8 для файлов формата PEM.
</p>
</dd>
<dt>-keyform PEM|DER <a name="req-_002dkeyform-PEM_007cDER"></a></dt>
<dd><p>Формат файла закрытого ключа, указанный в аргументе -key. PEM является
           значением по умолчанию.
</p>
</dd>
<dt>-keyout filename <a name="req-_002dkeyout-filename"></a></dt>
<dd><p>Это дает имя файла для записи недавно созданного закрытого ключа.
           Если эта опция не указана, то используется имя файла, присутствующее
           в файле конфигурации.
</p>
</dd>
<dt>-nodes <a name="req-_002dnodes"></a></dt>
<dd><p>Если указан этот параметр, то при создании закрытого ключа он не
           будет зашифрован.
</p>
</dd>
<dt>-digest <a name="req-_002ddigest"></a></dt>
<dd><p>Здесь указывается дайджест сообщения для подписи запроса. Можно
           использовать любой дайджест, поддерживаемый командой OpenSSL dgst.
           Это переопределяет алгоритм дайджеста, указанный в файле конфигурации.
</p>
<p>Некоторые алгоритмы с открытым ключом могут отменять этот выбор.
           Например, сигнатуры DSA всегда используют сигнатуры SHA1, GOST R 34.10,
           всегда используют GOST R 34.11-94 (-md_gost94), Ed25519 и Ed448,
           никогда не используют дайджест.
</p>
</dd>
<dt>-config filename <a name="req-_002dconfig-filename"></a></dt>
<dd><p>Это позволяет указать альтернативный файл конфигурации. Optional;
           для описания значения по умолчанию, см. &quot;COMMAND SUMMARY&quot; в openssl.
</p>
</dd>
<dt>-subj arg <a name="req-_002dsubj-arg"></a></dt>
<dd><p>Устанавливает имя субъекта для нового запроса или заменяет имя
           субъекта при обработке запроса. Объект arg должен быть
           отформатирован как /type0=value0/type1=value1/type2=.....
           Символы ключевых слов могут быть экранированы / (backslash), и
           пробел сохраняется. Пустые значения разрешены, но соответствующий
           тип не будет включен в запрос.
</p>
</dd>
<dt>-multivalue-rdn <a name="req-_002dmultivalue_002drdn"></a></dt>
<dd><p>Эта опция заставляет аргумент -subj интерпретироваться с полной
           поддержкой многозначного RDN. Пример:
</p>
<p>/DC=org/DC=OpenSSL/DC=users/UID=123456+CN=John Doe
</p>
<p>Если -multi-rdn не используется, тогда значением UID является
           123456+CN=John Doe.
</p>
</dd>
<dt>-x509 <a name="req-_002dx509"></a></dt>
<dd><p>Эта опция выводит самозаверяющий сертификат вместо запроса
           сертификата. Обычно это используется для создания тестового
           сертификата или самозаверяющего корневого объекта CA. Добавленные
           в сертификат расширения (если таковые имеются) указываются в
           файле конфигурации. Если не указано использование опции
           set_serial, для серийного номера будет использоваться
           большое случайное число.
</p>
<p>Если существующий запрос указан с помощью опции -in, он
           преобразуется в самозаверяющий сертификат, в противном случае
           создается новый запрос.
</p>
</dd>
<dt>-days n <a name="req-_002ddays-n"></a></dt>
<dd><p>Когда используется опция -x509, это указывает количество дней для
           сертификации сертификата, в противном случае он игнорируется.
           n должно быть положительным целым числом. По умолчанию 30 дней.
</p>
</dd>
<dt>-set_serial n <a name="req-_002dset_005fserial-n"></a></dt>
<dd><p>Серийный номер для использования при выводе самозаверяющего
           сертификата. Это может быть указано как десятичное значение
           или шестнадцатеричное значение, если ему предшествует 0x.
</p>
</dd>
<dt>-addext ext <a name="req-_002daddext-ext"></a></dt>
<dd><p>Добавьте конкретное расширение к сертификату (если присутствует
           опция -x509) или запрос сертификата. Аргумент должен иметь форму
           пары key=value, как это будет отображаться в файле конфигурации.
</p>
<p>Эта опция может быть дана несколько раз.
</p>
</dd>
<dt>-extensions section <a name="req-_002dextensions-section"></a></dt>
<dt>-reqexts section <a name="req-_002dreqexts-section"></a></dt>
<dd>            
<p>Эти параметры указывают альтернативный объект sections, который
           включает расширения сертификата (если присутствует параметр -x509)
           или расширения запроса сертификата. Это позволяет использовать
           несколько разных разделов в одном и том же файле конфигурации
           для указания запросов для различных целей.
</p>
</dd>
<dt>-precert <a name="req-_002dprecert"></a></dt>
<dd><p>Расширение будет добавлено к сертификату, что сделает его
           &quot;pre-certificate&quot; (смотри RFC6962). Это может быть отправлено
           в журналы прозрачности сертификата для получения подписанных
           временных отметок сертификата (SCTs). Эти SCTs могут быть затем
           встроены в предварительный сертификат как расширение перед удалением
           и подписанием сертификата.
</p>
<p>Это подразумевает флаг -new.
</p>
</dd>
<dt>-utf8 <a name="req-_002dutf8"></a></dt>
<dd><p>Эта опция заставляет значения полей интерпретироваться как строки
           UTF8, по умолчанию они интерпретируются как ASCII. Это означает,
           что значения полей, запрашиваемые из терминала или полученные из
           файла конфигурации, должны быть действительными строками UTF8.
</p>
</dd>
<dt>-nameopt option <a name="req-_002dnameopt-option"></a></dt>
<dd><p>Опция, которая определяет, как отображаются имена subject или
           issuer. Аргумент option может быть одним или несколькими параметрами,
           разделенными запятыми. В качестве альтернативы переключатель -nameopt
           может использоваться более одного раза для установки нескольких
           параметров. Смотрите страницу руководства x509 для деталей.
</p>
</dd>
<dt>-reqopt <a name="req-_002dreqopt"></a></dt>
<dd><p>Настройте формат вывода, используемый с -text. Аргументом опции
           может быть одна опция или несколько опций, разделенных запятыми.
</p>
<p>Смотрите обсуждение параметра -certopt в команде x509.
</p>
</dd>
<dt>-newhdr <a name="req-_002dnewhdr"></a></dt>
<dd><p>Добавляет слово NEW в заголовок файла и строки нижнего колонтитула
           в выводимом запросе. Некоторое программное обеспечение
           (сервер сертификатов Netscape) и некоторое CAs нуждаются
           в этом.
</p>
</dd>
<dt>-batch <a name="req-_002dbatch"></a></dt>
<dd><p>Неинтерактивный режим.
</p>
</dd>
<dt>-verbose <a name="req-_002dverbose"></a></dt>
<dd><p>Распечатайте дополнительную информацию о выполняемых операциях.
</p>
</dd>
<dt>-engine id <a name="req-_002dengine-id"></a></dt>
<dd><p>Указание механизма (по его уникальной строке идентификатора)
           приведет к тому, что req попытается получить функциональную
           ссылку на указанный механизм, тем самым инициализируя его при
           необходимости. Движок будет установлен по умолчанию для всех
           доступных алгоритмов.
</p>
</dd>
<dt>-keygen_engine id <a name="req-_002dkeygen_005fengine-id"></a></dt>
<dd><p>Определяет механизм (его уникальной строкой идентификатора),
           который будет использоваться для операций генерации ключа.
</p></dd>
</dl>
</dd>
<dt>CONFIGURATION FILE FORMAT</dt>
<dd><p>Параметры конфигурации указаны в разделе req файла конфигурации.
       Как и во всех файлах конфигурации, если в конкретном разделе не
       указано значение (то есть req), то выполняется поиск и в
       исходном безымянном разделе или разделе по умолчанию.
</p>
<p>Доступные варианты подробно описаны ниже.
</p><dl compact="compact">
<dt>input_password output_password</dt>
<dd><p>Пароли для входного файла закрытого ключа (если есть) и
           выходного файла закрытого ключа (если он будет создан).
           Параметры командной строки passin и passout переопределяют
           значения файла конфигурации.
</p>
</dd>
<dt>default_bits</dt>
<dd><p>Определяет размер ключа по умолчанию в битах.
</p>
<p>Эта опция используется вместе с опцией -new для генерации нового
           ключа. Его можно переопределить, указав явный размер ключа в опции
           -newkey. Наименьший принятый размер ключа составляет 512 бит. Если
           размер ключа не указан, то используется 2048 бит.
</p>
</dd>
<dt>default_keyfile</dt>
<dd><p>Это имя файла по умолчанию для записи закрытого ключа. Если не
           указано, ключ записывается в стандартный вывод. Это может быть
           отменено с помощью опции -keyout.
</p>
</dd>
<dt>oid_file</dt>
<dd><p>Это указывает на файл, содержащий дополнительные OBJECT IDENTIFIERS.
           Каждая строка файла должна состоять из числовой формы идентификатора
           объекта, за которым следует пробел, затем короткое имя, затем пробел и,
           наконец, длинное имя.
</p>
</dd>
<dt>oid_section</dt>
<dd><p>Это указывает на раздел в файле конфигурации, содержащий дополнительные
           идентификаторы объекта. Каждая строка должна состоять из короткого имени
           идентификатора объекта, затем = и числовой формы. Короткие и длинные имена
           одинаковы при использовании этой опции.
</p>
</dd>
<dt>RANDFILE</dt>
<dd><p>При запуске указанный файл загружается в генератор случайных чисел, а при
           выходе в него записывается 256 байт. Используется для генерации закрытого ключа.
</p>
</dd>
<dt>encrypt_key</dt>
<dd><p>Если для этого параметра установлено значение no, то, если сгенерирован закрытый
           ключ, он не шифруется. Это эквивалентно опции командной строки -nodes. Для
           совместимости encrypt_rsa_key является эквивалентной опцией.
</p>
</dd>
<dt>default_md</dt>
<dd><p>Эта опция указывает алгоритм дайджеста для использования. Можно использовать
           любой дайджест, поддерживаемый командой OpenSSL dgst. Эта опция может быть
           переопределена в командной строке. Некоторые алгоритмы подписывания
           (Ed25519 и Ed448) будут игнорировать любой дайджест, который был установлен.
</p>
</dd>
<dt>string_mask</dt>
<dd><p>Эта опция маскирует использование определенных типов строк в определенных полях.
           Большинству пользователей не нужно менять эту опцию.
</p>
<p>Он может быть установлен на несколько значений по умолчанию, который также
           является параметром по умолчанию, который использует PrintableStrings, T61Strings
           и BMPStrings, если используется значение pkix, тогда будет использоваться только
           PrintableStrings и BMPStrings. Это следует за рекомендацией PKIX в RFC2459. Если
           используется опция utf8only, то будет использоваться только UTF8Strings: это
           рекомендация PKIX в RFC2459 после 2003 года. Наконец, опция nombstr просто
           использует PrintableStrings и T61Strings: у определенного программного обеспечения
           есть проблемы с BMPStrings и UTF8Strings: в частности, Netscape.
</p>
</dd>
<dt>req_extensions</dt>
<dd><p>Здесь указывается раздел файла конфигурации, содержащий список расширений для
           добавления в запрос сертификата. Это может быть отменено переключателем командной
           строки -reqexts. См. Страницу руководства x509v3_config для получения подробной
           информации о формате раздела расширения.
</p>
</dd>
<dt>x509_extensions</dt>
<dd><p>Здесь указывается раздел файла конфигурации, содержащий список расширений для
           добавления в сертификат, сгенерированный при использовании переключателя -x509.
           Это может быть отменено переключателем командной строки -extensions.
</p>
</dd>
<dt>prompt</dt>
<dd><p>Если установлено значение no, это отключает запрос полей сертификата и просто
           принимает значения из файла конфигурации напрямую. Это также изменяет ожидаемый
           формат разделов отличительного имени и атрибутов.
</p>
</dd>
<dt>utf8</dt>
<dd><p>Если установлено значение yes, то значения полей будут интерпретироваться как
           строки UTF8, по умолчанию они интерпретируются как ASCII. Это означает, что
           значения полей, запрашиваемые из терминала или полученные из файла конфигурации,
           должны быть действительными строками UTF8.
</p>
</dd>
<dt>attributes</dt>
<dd><p>Это определяет раздел, содержащий любые атрибуты запроса: его формат такой же, как
           у distinguished_name. Обычно они могут содержать типы challengePassword и
           unstructuredName. В настоящее время они игнорируются утилитами подписывания
           запросов OpenSSL, но некоторые CA могут захотеть их.
</p>
</dd>
<dt>distinguished_name</dt>
<dd><p>Здесь указывается раздел, содержащий поля различающихся имен, которые необходимо
           запрашивать при создании сертификата или запроса сертификата. Формат описан в
           следующем разделе.
</p></dd>
</dl>
</dd>
<dt>DISTINGUISHED NAME AND ATTRIBUTE SECTION FORMAT</dt>
<dd><p>ФОРМАТ ОТЛИЧИТЕЛЬНОГО ИМЕНИ И АТРИБУТА
</p><div class="display">
<pre class="display">       Существует два отдельных формата для разделов с выделенными именами и атрибутами.
       Если опция приглашения установлена ​​в no, то эти разделы просто состоят из имен
       полей и значений: например,

        CN=My Name
        OU=My Organization
        emailAddress=someone@somewhere.org

       Это позволяет внешним программам (GUI based) сгенерировать файл шаблона со всеми
       именами и значениями полей и просто передать его в req. Пример такого типа файла
       конфигурации содержится в разделе EXAMPLES.

       В качестве альтернативы, если опция подсказки отсутствует или не установлена ​​в no,
       тогда файл содержит информацию о подсказке поля. Он состоит из строк вида:

        fieldName=&quot;prompt&quot;
        fieldName_default=&quot;default field value&quot;
        fieldName_min= 2
        fieldName_max= 4

       &quot;fieldName&quot; - это используемое имя поля, например, commonName (или CN). Строка
       &quot;prompt&quot; используется, чтобы попросить пользователя ввести соответствующие данные.
       Если пользователь ничего не вводит, то используется значение по умолчанию, если
       значение по умолчанию отсутствует, тогда поле опускается. Поле все еще может быть
       опущено, если присутствует значение по умолчанию, если пользователь просто
       вводит символ &rsquo;.&rsquo;.

       Количество вводимых символов должно быть между fieldName_min и fieldName_max limits:
       могут быть дополнительные ограничения в зависимости от используемого поля
       (например, countryName может быть длиной всего два символа и должен
       помещаться в PrintableString).

       Некоторые поля (такие как organizationName) могут использоваться более одного
       раза в DN. Это создает проблему, потому что файлы конфигурации не распознают
       одно и то же имя, встречающееся дважды. Чтобы избежать этой проблемы, если
       fieldName содержит несколько символов, за которыми следует полная остановка,
       они будут игнорироваться. Так, например, второй organizationName можно
       ввести, называя его &quot;1.organizationName&quot;.

       Фактически разрешенными именами полей являются любые короткие или длинные
       идентификаторы объектов. Они скомпилированы в OpenSSL и включают обычные
       значения, такие как commonName, countryName, localityName, organizationName,
       organizationalUnitName, stateOrProvinceName. Кроме того, emailAddress включает
       в себя,также имя, фамилию, инициалы givenName и dnQualifier.

       Дополнительные идентификаторы объекта могут быть определены с помощью
       параметров oid_file или oid_section в файле конфигурации. Любые
       дополнительные поля будут обрабатываться так, как если бы они
       были объектами DirectoryString.
</pre></div>
</dd>
<dt>EXAMPLES</dt>
<dd>
<p>Изучите и подтвердите запрос сертификата:
</p><blockquote>
<p>openssl req -in req.pem -text -verify -noout
</p></blockquote>
<p>Создайте закрытый ключ, а затем сгенерируйте запрос сертификата из него:
</p><blockquote>
<p>openssl genrsa -out key.pem 2048
        openssl req -new -key key.pem -out req.pem
</p></blockquote>
<p>То же самое, но только с использованием req:
</p><blockquote>
<p>openssl req -newkey rsa:2048 -keyout key.pem -out req.pem
</p></blockquote>
<p>Создайте самоподписанный корневой сертификат:
</p><blockquote>
<p>openssl req -x509 -newkey rsa:2048 -keyout key.pem -out req.pem
</p></blockquote>
<p>Пример файла, на который указывает опция oid_file:
</p><blockquote>
<p>1.2.3.4        shortName       A longer Name
        1.2.3.6        otherName       Other longer Name
</p></blockquote>
<p>Пример раздела, на который указывает oid_section, использующий
       расширение переменной:
</p><blockquote>
<p>testoid1=1.2.3.5
        testoid2=${testoid1}.6
</p></blockquote>
<p>Пример файла конфигурации, запрашивающий значения полей:
</p><div class="display">
<pre class="display">        [ req ]
        default_bits           = 2048
        default_keyfile        = privkey.pem
        distinguished_name     = req_distinguished_name
        attributes             = req_attributes
        req_extensions         = v3_ca

        dirstring_type = nobmp

        [ req_distinguished_name ]
        countryName                    = Country Name (2 letter code)
        countryName_default            = AU
        countryName_min                = 2
        countryName_max                = 2

        localityName                   = Locality Name (eg, city)

        organizationalUnitName         = Organizational Unit Name (eg, section)

        commonName                     = Common Name (eg, YOUR name)
        commonName_max                 = 64

        emailAddress                   = Email Address
        emailAddress_max               = 40

        [ req_attributes ]
        challengePassword              = A challenge password
        challengePassword_min          = 4
        challengePassword_max          = 20

        [ v3_ca ]

        subjectKeyIdentifier=hash
        authorityKeyIdentifier=keyid:always,issuer:always
        basicConstraints = critical, CA:true
</pre></div>
<p>Пример конфигурации, содержащий все значения полей:
</p><div class="display">
<pre class="display">        RANDFILE               = $ENV::HOME/.rnd

        [ req ]
        default_bits           = 2048
        default_keyfile        = keyfile.pem
        distinguished_name     = req_distinguished_name
        attributes             = req_attributes
        prompt                 = no
        output_password        = mypass

        [ req_distinguished_name ]
        C                      = GB
        ST                     = Test State or Province
        L                      = Test Locality
        O                      = Organization Name
        OU                     = Organizational Unit Name
        CN                     = Common Name
        emailAddress           = test@email.address

        [ req_attributes ]
        challengePassword              = Пароль для вызова
</pre></div>
<p>Пример предоставления наиболее распространенных атрибутов
       (subject и extensions) в командной строке:
</p><div class="display">
<pre class="display">        openssl req -new -subj &quot;/C=GB/CN=foo&quot; \
                         -addext &quot;subjectAltName = DNS:foo.co.uk&quot; \
                         -addext &quot;certificatePolicies = 1.2.3.4&quot; \
                         -newkey rsa:2048 -keyout key.pem -out req.pem
</pre></div>
</dd>
<dt>NOTES</dt>
<dd><div class="display">
<pre class="display">       Строки верхнего и нижнего колонтитула в формате PEM обычно:

        &mdash;&ndash;BEGIN CERTIFICATE REQUEST&mdash;&ndash;
        &mdash;&ndash;END CERTIFICATE REQUEST&mdash;&ndash;

       Некоторое программное обеспечение (некоторые версии сервера сертификатов
       Netscape) вместо этого требует:

        &mdash;&ndash;BEGIN NEW CERTIFICATE REQUEST&mdash;&ndash;
        &mdash;&ndash;END NEW CERTIFICATE REQUEST&mdash;&ndash;

       который производится с опцией -newhdr, но в остальном совместим. Любая
       форма принимается прозрачно на входе.

       Запросы на сертификат, сгенерированные Xenroll с MSIE, имеют добавленные
       расширения. Он включает в себя расширение keyUsage, которое определяет
       тип ключа (только для подписи или общего назначения) и любой дополнительный
       OIDs, введенный сценарием в расширение extendedKeyUsage.
</pre></div>
</dd>
<dt>DIAGNOSTICS</dt>
<dd>
<p>Следующие сообщения часто спрашивают о:
</p><blockquote>
<p>Using configuration from /some/path/openssl.cnf
               Unable to load config info<br>
               (Использование конфигурации из /some/path/openssl.cnf
               Невозможно загрузить информацию о конфигурации)
</p></blockquote>
<p>Это сопровождается некоторое время спустя...
</p><blockquote>
<p>unable to find &rsquo;distinguished_name&rsquo; in config
               problems making Certificate Request<br>
               (не удается найти &rsquo;distinguished_name&rsquo; проблема d
               конфигурации, делающих Certificate Request)
</p></blockquote>
<p>Первое сообщение об ошибке - ключ: он не может найти файл
       конфигурации! Некоторым операциям (например, проверка запроса
       сертификата) не требуется файл конфигурации, поэтому его использование
       не является обязательным. Однако для создания сертификатов или
       запросов необходим файл конфигурации. Это можно рассматривать
       как ошибку.
</p>
<p>Еще одно загадочное сообщение это:
</p><div class="display">
<pre class="display">               Attributes:
                   a0:00
</pre></div>
<p>это отображается, когда атрибуты отсутствуют, и запрос включает в
       себя правильную пустую структуру SET OF (кодировка DER которой -
       0xa0 0x00). Если вы просто видите:
</p><div class="display">
<pre class="display">               Attributes:
</pre></div>
<p>тогда SET OF отсутствует и кодировка технически недопустима (но это
       допустимо). См. Описание параметра командной строки -asn1-kludge
       для получения дополнительной информации..
</p>
</dd>
<dt>BUGS</dt>
<dd>
<p>OpenSSL не работает с T61Strings (он же TeletexStrings): он эффективно
       обрабатывает их, поскольку ISO-8859-1 (Latin 1), Netscape и MSIE ведут
       себя одинаково. Это может вызвать проблемы, если вам нужны символы,
       которых нет в PrintableStrings, и вы не хотите или не можете
       использовать BMPStrings.
</p>
<p>Как следствие обработки T61String, единственный правильный способ
       представления акцентированных символов в OpenSSL - это использование
       BMPString: к сожалению, в настоящее время Netscape подавляет их. Если
       вам нужно использовать акцентированные символы с Netscape и MSIE, вам
       необходимо использовать недействительную форму T61String.
</p>
<p>Текущие побуждения не очень дружелюбны. Это не позволяет вам подтвердить
       то, что вы только что ввели. Другие вещи, такие как расширения в запросах
       сертификатов, статически определены в файле конфигурации. Некоторые из них:
       например, адрес электронной почты в subjectAltName должен быть введен
       пользователем.
</p>
</dd>
<dt>SEE ALSO</dt>
<dd><p>x509(1), ca(1), genrsa(1), gendsa(1), config(5), x509v3_config(5)
</p>
</dd>
<dt>COPYRIGHT</dt>
<dd><p>Copyright 2000-2018 The OpenSSL Project Authors. All Rights Reserved.
</p>
<p>Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
       this file except in compliance with the License.  You can obtain a copy
       in the file LICENSE in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.
</p></dd>
</dl>
<p>1.1.1a                            2018-11-20                            REQ(1)
</p><hr>
<a name="ASN1PARSE"></a>
<div class="header">
<p>
Next: <a href="#CIPHERS" accesskey="n" rel="next">CIPHERS</a>, Previous: <a href="#req" accesskey="p" rel="prev">req</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>
<a name="ASN1PARSE-1"></a>
<h2 class="chapter">8 ASN1PARSE</h2>
<dl compact="compact">
<dt>NAME</dt>
<dd><p>openssl-asn1parse, asn1parse - ASN.1 инструмент разбора
</p>
</dd>
<dt>SYNOPSIS</dt>
<dd><p>openssl asn1parse [<a href="#asn1parse-_002dhelp">-help</a>] [<a href="#asn1parse-_002dinform-DER_007cPEM">-inform DER|PEM</a>] [<a href="#asn1parse-_002din-filename">-in filename</a>] [<a href="#asn1parse-_002dout-filename">-out filename</a>] [<a href="#asn1parse-_002dnoout">-noout</a>] [<a href="#asn1parse-_002doffset-number">-offset number</a>] [<a href="#asn1parse-_002dlength-number">-length number</a>] [<a href="#asn1parse-_002di">-i</a>] [<a href="#asn1parse-_002doid-filename">-oid filename</a>] [<a href="#asn1parse-_002ddump">-dump</a>] [<a href="#asn1parse-_002ddlimit-num">-dlimit num</a>] [<a href="#asn1parse-_002dstrparse-offset">-strparse offset</a>] [<a href="-genstr string.html#asn1parse-_002dgenstr-string">-genconf file</a> in <cite>-genconf file</cite>] [<a href="#asn1parse-_002dstrictpem">-strictpem</a>] [<a href="#asn1parse-_002ditem-name">-item name</a>]
</p>
</dd>
<dt>DESCRIPTION</dt>
<dd><p>Команда asn1parse - это диагностическая утилита, которая может анализировать
       структуры ASN.1. Его также можно использовать для извлечения данных из данных
       в формате ASN.1.
</p>
</dd>
<dt>OPTIONS</dt>
<dd><dl compact="compact">
<dt>-help <a name="asn1parse-_002dhelp"></a></dt>
<dd><p>Распечатайте сообщение об использовании.
</p>
</dd>
<dt>-inform DER|PEM <a name="asn1parse-_002dinform-DER_007cPEM"></a></dt>
<dd><p>Формат ввода. DER - это двоичный формат, а PEM (по умолчанию) кодируется
           в base64.
</p>
</dd>
<dt>-in filename <a name="asn1parse-_002din-filename"></a></dt>
<dd><p>Входной файл, по умолчанию это стандартный ввод.
</p>
</dd>
<dt>-out filename <a name="asn1parse-_002dout-filename"></a></dt>
<dd><p>Выходной файл для размещения данных в формате DER. Если этот параметр
           отсутствует, данные не будут выводиться. Это наиболее полезно в
           сочетании с опцией -strparse.
</p>
</dd>
<dt>-noout <a name="asn1parse-_002dnoout"></a></dt>
<dd><p>Не выводить проанализированную версию входного файла.
</p>
</dd>
<dt>-offset number <a name="asn1parse-_002doffset-number"></a></dt>
<dd><p>Начальное смещение для начала разбора, по умолчанию - начало файла.
</p>
</dd>
<dt>-length number <a name="asn1parse-_002dlength-number"></a></dt>
<dd><p>Количество байтов для анализа, по умолчанию - до конца файла.
</p>
</dd>
<dt>-i <a name="asn1parse-_002di"></a></dt>
<dd><p>Отступы выводятся в соответствии с &quot;depth&quot; структур.
</p>
</dd>
<dt>-oid filename <a name="asn1parse-_002doid-filename"></a></dt>
<dd><p>Файл, содержащий дополнительный объект OBJECT IDENTIFIERs (OIDs).
           Формат этого файла описан в разделе NOTES ниже.
</p>
</dd>
<dt>-dump <a name="asn1parse-_002ddump"></a></dt>
<dd><p>Дамп неизвестных данных в шестнадцатеричном формате.
</p>
</dd>
<dt>-dlimit num <a name="asn1parse-_002ddlimit-num"></a></dt>
<dd><p>Подобно -dump, но выводятся только первые num байтов.
</p>
</dd>
<dt>-strparse offset <a name="asn1parse-_002dstrparse-offset"></a></dt>
<dd><p>Проанализируйте содержимое октетов объекта ASN.1, начиная со
           смещения. Эта опция может быть использована несколько раз для
           &quot;drill down&quot; во вложенных структурах.
</p>
</dd>
<dt>-genstr string, -genconf file <a name="asn1parse-_002dgenstr-string_002c-_002dgenconf-file"></a></dt>
<dd><p>Генерируйте закодированные данные на основе строки, файла или
           обоих, используя формат ASN1_generate_nconf. Если присутствует
           только файл, то строка получается из секции по умолчанию с
           именем asn1. Закодированные данные передаются через
           синтаксический анализатор ASN1 и распечатываются так, как если
           бы они были получены из файла, поэтому содержимое может быть
           проверено и записано в файл с использованием опции out.
</p></dd>
<dt>-strictpem <a name="asn1parse-_002dstrictpem"></a></dt>
<dd><p>Если эта опция используется, то -inform будет игнорироваться.
           Без этой опции любые данные во входном файле формата PEM будут
           обрабатываться как закодированные в base64 и обработанные
           независимо от того, имеют ли они нормальные маркеры PEM BEGIN
           и END или нет. Эта опция игнорирует любые данные до начала
           маркера BEGIN или после маркера END в файле PEM.
</p></dd>
<dt>-item name <a name="asn1parse-_002ditem-name"></a></dt>
<dd><p>Попытайтесь декодировать и распечатать данные как имя ASN1_ITEM.
           Это может быть использовано для распечатки полей любой
           поддерживаемой структуры ASN.1, если тип известен.
</p></dd>
</dl>
</dd>
<dt>Output</dt>
<dd><div class="display">
<pre class="display">         Вывод, как правило, будет содержать такие строки:

         0:d=0  hl=4 l= 681 cons: SEQUENCE

       .....

         229:d=3  hl=3 l= 141 prim: BIT STRING
         373:d=2  hl=3 l= 162 cons: cont [ 3 ]
         376:d=3  hl=3 l= 159 cons: SEQUENCE
         379:d=4  hl=2 l=  29 cons: SEQUENCE
         381:d=5  hl=2 l=   3 prim: OBJECT            :X509v3 Subject Key Identifier
         386:d=5  hl=2 l=  22 prim: OCTET STRING
         410:d=4  hl=2 l= 112 cons: SEQUENCE
         412:d=5  hl=2 l=   3 prim: OBJECT            :X509v3 Authority Key Identifier
         417:d=5  hl=2 l= 105 prim: OCTET STRING
         524:d=4  hl=2 l=  12 cons: SEQUENCE

       .....

       Этот пример является частью самозаверяющего сертификата. Каждая
       строка начинается со смещения в десятичном формате.
       d=XX указывает текущую глубину. Глубина увеличивается в рамках
       любого объекта SET или SEQUENCE.
       hl=XX дает длину заголовка (тег и длина октетов) текущего типа.
       l=XX дает длину содержимого октетов.

       Опцию -i можно использовать, чтобы сделать вывод более читабельным.

       Некоторое знание структуры ASN.1 необходимо для интерпретации вывода.

       В этом примере BIT STRING со смещением 229 является открытым
       ключом сертификата. Содержимое этого октета будет содержать
       информацию открытого ключа. Это можно проверить, используя
       опцию -strparse 229, чтобы получить:

           0:d=0  hl=3 l= 137 cons: SEQUENCE
           3:d=1  hl=3 l= 129 prim: INTEGER           :E5D21E1F5C8D208EA7A2166C7FAF9F6BDF2059669C60876DDB70840F1A5AAFA59699FE471F379F1DD6A487E7D5409AB6A88D4A9746E24B91D8CF55DB3521015460C8EDE44EE8A4189F7A7BE77D6CD3A9AF2696F486855CF58BF0EDF2B4068058C7A947F52548DDF7E15E96B385F86422BEA9064A3EE9E1158A56E4A6F47E5897
         135:d=1  hl=2 l=   3 prim: INTEGER           :010001
</pre></div>
</dd>
<dt>NOTES</dt>
<dd><p>Если OID не является частью внутренней таблицы OpenSSL&rsquo;s, она будет
       представлена ​​в числовой форме (например, 1.2.3.4). Файл, переданный
       параметру -oid, позволяет включить дополнительный OIDs. Каждая строка
       состоит из трех столбцов, первый столбец - это OID в числовом формате,
       за которым следует пробел. Второй столбец - это &quot;short name&quot;,
       представляющий собой одно слово, за которым следует пробел. Последний
       столбец - это остальная часть строки, это &quot;long name&quot;.
       Вывод asn1parse long name. Пример:
</p><div class="display">
<pre class="display">       &quot;1.2.3.4       shortName       A long name&quot;
</pre></div>
</dd>
<dt>EXAMPLES</dt>
<dd><div class="display">
<pre class="display">       Разобрать файл:

        openssl asn1parse -in file.pem

       Разобрать файл DER:

        openssl asn1parse -inform DER -in file.der

       Генерация простого UTF8String:

        openssl asn1parse -genstr &rsquo;UTF8:Hello World&rsquo;

       Создайте и запишите UTF8String, не печатайте проанализированный вывод:

        openssl asn1parse -genstr &rsquo;UTF8:Hello World&rsquo; -noout -out utf8.der

       Создайте, используя файл конфигурации:

        openssl asn1parse -genconf asn1.cnf -noout -out asn1.der

       Пример файла конфигурации:

        asn1=SEQUENCE:seq_sect

        [seq_sect]

        field1=BOOL:TRUE
        field2=EXP:0, UTF8:some random string
</pre></div>
</dd>
<dt>BUGS</dt>
<dd><p>Должны быть варианты изменения формата выходных строк. Вывод некоторых
       типов ASN.1 плохо обрабатывается (если вообще обрабатывается).
</p>
</dd>
<dt>SEE ALSO</dt>
<dd><p>ASN1_generate_nconf(3)
</p>
</dd>
<dt>COPYRIGHT</dt>
<dd><p>Copyright 2000-2017 The OpenSSL Project Authors. All Rights Reserved.
</p>
<p>Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use this file except in
       compliance with the License.  You can obtain a copy in the file LICENSE in the source
       distribution or at &lt;https://www.openssl.org/source/license.html&gt;.
</p></dd>
</dl>
<p>1.1.1a                                        2018-11-20                                  ASN1PARSE(1)
</p><hr>
<a name="CIPHERS"></a>
<div class="header">
<p>
Next: <a href="#CMS" accesskey="n" rel="next">CMS</a>, Previous: <a href="#ASN1PARSE" accesskey="p" rel="prev">ASN1PARSE</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>
<a name="CIPHERS-1"></a>
<h2 class="chapter">9 CIPHERS</h2>
<dl compact="compact">
<dt>NAME</dt>
<dd><p>openssl-ciphers, ciphers - Инструмент отображения и шифрования SSL
</p>
</dd>
<dt>SYNOPSIS</dt>
<dd><p>openssl ciphers [<a href="#chiphers-_002dhelp">-help</a>] [<a href="#chiphers-_002ds">-s</a>] [<a href="#chiphers-_002dv">-v</a>] [<a href="#chiphers-_002dV">-V</a>] [<a href="#cms-_005b_002dtls1_005f3_005d-_005b_002dtls1_005f2_005d-_005b_002dtls1_005f1_005d-_005b_002dtls1_005d-_005b_002dssl3_005d">[-tls1_3] [-tls1_2] [-tls1_1] [-tls1] [-ssl3]</a>] [<a href="#chiphers-_002dpsk">-psk</a>] [<a href="#chiphers-_002dsrp">-srp</a>] [<a href="#chiphers-_002dstdname">-stdname</a>] [<a href="#chiphers-_002dconvert-name">-convert name</a>] [<a href="#chiphers-_002dciphersuites-val">-ciphersuites val</a>] [<a href="#chiphers-cipherlist">cipherlist</a>]
</p>
</dd>
<dt>DESCRIPTION</dt>
<dd><p>Команда ciphers преобразует текстовые списки шифров OpenSSL в упорядоченные
       списки предпочтений шифров SSL. Он может использоваться в качестве
       инструмента тестирования для определения соответствующего списка шифров.
</p>
</dd>
<dt>OPTIONS</dt>
<dd><dl compact="compact">
<dt>-help <a name="chiphers-_002dhelp"></a></dt>
<dd><p>Распечатать сообщение об использовании.
</p>
</dd>
<dt>-s <a name="chiphers-_002ds"></a></dt>
<dd><p>Перечислять только поддерживаемые шифры: те, которые соответствуют уровню
           безопасности, а также минимальной и максимальной версии протокола. Это ближе
           к фактическому списку шифров, который будет поддерживать приложение.
</p>
<p>Шифры PSK и SRP не включены по умолчанию: для их включения требуется -psk
           или -srp.
</p>
<p>Это также не меняет список поддерживаемых алгоритмов подписи по умолчанию.
</p>
<p>На сервере список поддерживаемых шифров может также исключать другие шифры
           в зависимости от настроенных сертификатов и наличия параметров DH.
</p>
<p>Если этот параметр не используется, будут перечислены все шифры, которые
           соответствуют списку шифров.
</p>
</dd>
<dt>-psk <a name="chiphers-_002dpsk"></a></dt>
<dd><p>В сочетании с -s включает в себя наборы шифров, которые требуют PSK.
</p>
</dd>
<dt>-srp <a name="chiphers-_002dsrp"></a></dt>
<dd><p>В сочетании с -s включает в себя наборы шифров, которые требуют SRP.
</p>
</dd>
<dt>-v <a name="chiphers-_002dv"></a></dt>
<dd><p>Подробный вывод: для каждого набора шифров перечислите подробности,
           предоставленные SSL_CIPHER_description.
</p>
</dd>
<dt>-V <a name="chiphers-_002dV"></a></dt>
<dd><p>Подобно -v, но включите официальные значения набора шифров в
           шестнадцатеричном виде.
</p>
</dd>
<dt>[-tls1_3] [-tls1_2] [-tls1_1] [-tls1] [-ssl3] <a name="cms-_005b_002dtls1_005f3_005d-_005b_002dtls1_005f2_005d-_005b_002dtls1_005f1_005d-_005b_002dtls1_005d-_005b_002dssl3_005d"></a></dt>
<dd><p>В сочетании с опцией -s, перечислите шифры, которые можно было бы
           использовать, если был согласован указанный протокол. Обратите
           внимание, что не все протоколы и флаги могут быть доступны, в
           зависимости от того, как был построен OpenSSL.
</p>
</dd>
<dt>-stdname <a name="chiphers-_002dstdname"></a></dt>
<dd><p>Каждый набор шифров должен предшествовать стандартному названию.
</p>
</dd>
<dt>-convert name <a name="chiphers-_002dconvert-name"></a></dt>
<dd><p>Преобразуйте стандартное имя шифра в его имя OpenSSL.
</p>
</dd>
<dt>-ciphersuites val <a name="chiphers-_002dciphersuites-val"></a></dt>
<dd><p>Устанавливает список шифров TLSv1.3. Этот список будет объединен
           с любыми настроенными наборами шифров TLSv1.2 и ниже. Формат этого
           списка - это простой список разделенных двоеточиями (&quot;:&quot;) имен
           шифровальных наборов TLSv1.3. По умолчанию это значение:
</p>
<p>TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256
</p>
</dd>
<dt>cipherlist <a name="chiphers-cipherlist"></a></dt>
<dd><p>Список зашифрованных наборов шифров TLSv1.2 и ниже для преобразования
           в список предпочтений шифров. Этот список будет объединен с любыми
           настроенными наборами шифров TLSv1.3. Если он не включен, то будет
           использоваться список шифров по умолчанию. Формат описан ниже.
</p></dd>
</dl>
</dd>
<dt>CIPHER LIST FORMAT</dt>
<dd><p>Список шифров состоит из одной или нескольких строк шифров, разделенных
       двоеточиями. Запятые или пробелы также являются приемлемыми разделителями,
       но обычно используются двоеточия.
</p>
<p>Фактическая строка шифра может принимать несколько различных форм.
</p>
<p>Он может состоять из одного набора шифров, такого как RC4-SHA.
</p>
<p>Он может представлять список наборов шифров, содержащих определенный
       алгоритм, или наборов шифров определенного типа. Например, SHA1 представляет
       все наборы шифров с использованием алгоритма дайджеста SHA1, а SSLv3
       представляет все алгоритмы SSL v3.
</p>
<p>Списки наборов шифров могут быть объединены в одну строку шифра с
       использованием символа +. Это используется как логическая операция. Например,
       SHA1+DES представляет все наборы шифров, содержащие алгоритмы SHA1 и DES.
</p>
<p>Каждой строке шифра могут предшествовать символы !, - или +.
</p>
<p>Если используется !, то шифры навсегда удаляются из списка. Удаленные
       шифры никогда не могут появиться в списке, даже если они указаны явно.
</p>
<p>Если используется -, то шифры удаляются из списка, но некоторые или все
       шифры могут быть добавлены снова более поздними опциями.
</p>
<p>Если используется +, то шифры перемещаются в конец списка. Эта опция не
       добавляет новые шифры, она просто перемещает соответствующие существующие.
</p>
<p>Если ни один из символов не присутствует, то строка просто интерпретируется
       как список шифров, добавляемых в текущий список предпочтений. Если список
       содержит какие-либо уже существующие шифры, они будут игнорироваться, то
       есть они не будут перемещены в конец списка.
</p>
<p>Строка шифра @STRENGTH может использоваться в любой точке для сортировки
       текущего списка шифров в порядке длины ключа алгоритма шифрования.
</p>
<p>Зашифрованная строка @SECLEVEL=n может использоваться в любой точке для
       установки уровня безопасности n., должно быть числом от нуля до пяти
       включительно.  SSL_CTX_set_security_level для описания того, что означает
       каждый уровень.
</p>
<p>Список шифров может иметь префикс с ключевым словом DEFAULT, который
       включает список шифров по умолчанию, как определено ниже. В отличие от
       строк шифрования, этот префикс не может быть объединен с другими строками,
       использующими символ +. Например, DEFAULT+DES недействителен.
</p>
<p>Содержимое списка по умолчанию определяется во время компиляции и обычно
       соответствует ALL:!COMPLEMENTOFDEFAULT:!eNULL..
</p>
</dd>
<dt>CIPHER STRINGS</dt>
<dd><p>Ниже приведен список всех разрешенных строк шифра и их значения.
</p><dl compact="compact">
<dt>COMPLEMENTOFDEFAULT</dt>
<dd><p>Шифры включены в ALL, но не включены по умолчанию. В настоящее время
           это включает в себя все RC4 и анонимные шифры. Обратите внимание, что
           это правило не распространяется на eNULL, который не включен в ALL (при
           необходимости используйте COMPLEMENTOFALL). Обратите внимание, что
           наборы шифров на основе RC4 не встроены в OpenSSL по умолчанию (см.
           Параметр enable-weak-ssl-ciphers для Configure).
</p>
<p>Наборы шифров ALL All, кроме шифров eNULL (которые должны быть явно включены
       при необходимости). Начиная с OpenSSL 1.0.0, наборы шифров ALL разумно
       упорядочены по умолчанию.
</p>
</dd>
<dt>COMPLEMENTOFALL</dt>
<dd><p>Наборы шифров, не включенные ALL, в настоящее время eNULL.
</p>
</dd>
<dt>HIGH</dt>
<dd><p>Комплекты шифрования &quot;High&quot;. В настоящее время это означает, что ключи
           с длиной ключа более 128 битов и некоторые наборы шифров с 128-битными
           ключами.
</p>
</dd>
<dt>MEDIUM</dt>
<dd><p>Комплекты шифрования &quot;Medium&quot;, в настоящее время некоторые из них
           используют 128-битное шифрование.
</p>
</dd>
<dt>LOW</dt>
<dd><p>Комплекты шифрования &quot;Low&quot;, в настоящее время использующие 64 или
           56-битные алгоритмы шифрования, но исключающие комплекты шифров
           экспорта Все эти наборы шифров были удалены с OpenSSL 1.1.0.
</p>
</dd>
<dt>eNULL, NULL</dt>
<dd><p>Шифры &quot;NULL&quot;, которые не предлагают шифрование. Поскольку они вообще
           не обеспечивают шифрование и представляют угрозу безопасности, они
           не включаются ни через строки шифрования DEFAULT, ни через ALL.
           Будьте осторожны при построении списков шифров из примитивов
           lower-level, таких как kRSA или aECDSA, поскольку они перекрываются
           с шифрами eNULL. Если есть сомнения, включите !eNULL в свой список
           шифров.
</p>
</dd>
<dt>aNULL</dt>
<dd><p>Наборы шифров, не предлагающие аутентификацию. В настоящее время это
           анонимные алгоритмы DH и анонимные алгоритмы ECDH. Эти комплекты шифров
           уязвимы для атак «человек посередине», поэтому их использование не
           рекомендуется. Они исключены из шифров DEFAULT, но включены в шифры ALL.
           Будьте осторожны при построении списков шифров из примитивов lower-level,
           таких как kDHE или AES, поскольку они перекрываются с шифрами aNULL. Если
           сомневаетесь, включите !aNULL в свой список шифров.
</p>
</dd>
<dt>kRSA, aRSA, RSA</dt>
<dd><p>Наборы шифров, использующие обмен ключами RSA или аутентификацию. RSA
           является псевдонимом для kRSA.
</p>
</dd>
<dt>kDHr, kDHd, kDH</dt>
<dd><p>Наборы шифров, использующие статическое соглашение о ключах DH и
           сертификаты DH, подписанные CAs ключами RSA и DSS или любым из них
           соответственно. Все эти наборы шифров были удалены в OpenSSL 1.1.0.
</p>
</dd>
<dt>kDHE, kEDH, DH</dt>
<dd><p>Наборы шифров с использованием эфемерного ключевого соглашения DH,
           включая анонимные наборы шифров.
</p>
</dd>
<dt>DHE, EDH</dt>
<dd><p>Наборы шифров с использованием аутентифицированного эфемерного
           ключевого соглашения DH.
</p>
</dd>
<dt>ADH</dt>
<dd><p>Анонимные наборы шифров DH, обратите внимание, что они не включают
           анонимные наборы шифров Elliptic Curve DH (ECDH).
</p>
</dd>
<dt>kEECDH, kECDHE, ECDH</dt>
<dd><p>Наборы шифров с использованием эфемерного ключевого соглашения ECDH,
           включая анонимные наборы шифров.
</p>
</dd>
<dt>ECDHE, EECDH</dt>
<dd><p>Наборы шифров с использованием аутентифицированного эфемерного
           ключевого соглашения ECDH.
</p>
</dd>
<dt>AECDH</dt>
<dd><p>Анонимный набор шифров Elliptic Curve Diffie-Hellman.
</p>
</dd>
<dt>aDSS, DSS</dt>
<dd><p>Наборы шифров, использующие аутентификацию DSS, то есть сертификаты
           содержат ключи DSS.
</p>
</dd>
<dt>aDH</dt>
<dd><p>Наборы шифров эффективно используют аутентификацию DH, то есть
           сертификаты содержат ключи DH. Все эти наборы шифров были удалены в
           OpenSSL 1.1.0.
</p>
</dd>
<dt>aECDSA, ECDSA</dt>
<dd><p>Наборы шифров, использующие аутентификацию ECDSA, то есть сертификаты
           содержат ключи ECDSA.
</p>
</dd>
<dt>TLSv1.2, TLSv1.0, SSLv3</dt>
<dd><p>Перечисляет наборы шифров, которые поддерживаются только по крайней мере
           в TLS v1.2, TLS v1.0 или SSL v3.0 соответственно. Примечание: нет
           никаких наборов шифров, специфичных для TLS v1.1. Поскольку это только
           минимальная версия, если, например, согласован TLSv1.0, доступны оба
           набора шифров: TLSv1.0 и SSLv3.0.
</p>
<p>Примечание: эти строки шифров не изменяют согласованную версию SSL или TLS,
           они влияют только на список доступных наборов шифров.
</p>
</dd>
<dt>AES128, AES256, AES</dt>
<dd><p>наборы шифров, использующие 128-битный AES, 256-битный AES или 128 или
           256-битный AES.
</p>
</dd>
<dt>AESGCM</dt>
<dd><p>AES в Galois Counter Mode (GCM): эти наборы шифров поддерживаются
           только в TLS v1.2.
</p>
</dd>
<dt>AESCCM, AESCCM8</dt>
<dd><p>AES в Cipher Block Chaining - Message Authentication Mode (CCM): эти наборы
           шифров поддерживаются только в TLS v1.2. AESCCM ссылается на наборы шифров
           CCM с использованием 16 и 8-октетного Integrity Check Value (ICV), тогда
           как AESCCM8 ссылается только на 8-октетный ICV.
</p>
</dd>
<dt>ARIA128, ARIA256, ARIA</dt>
<dd><p>Наборы шифров используют 128-битный ARIA, 256-битный ARIA или 128 или
           256-битный ARIA.
</p>
</dd>
<dt>CAMELLIA128, CAMELLIA256, CAMELLIA</dt>
<dd><p>Наборы шифров используют 128-битный CAMELLIA, 256-битный CAMELLIA или 128
           или 256-битный CAMELLIA.
</p>
</dd>
<dt>CHACHA20</dt>
<dd><p>Наборы шифров с использованием ChaCha20.
</p>
</dd>
<dt>3DES</dt>
<dd><p>Наборы шифров с использованием тройного DES.
</p>
</dd>
<dt>DES</dt>
<dd><p>Наборы шифров, использующие DES (не тройной DES). Все эти
           наборы шифров были удалены в OpenSSL 1.1.0.
</p>
</dd>
<dt>RC4</dt>
<dd><p>Наборы шифров с использованием RC4.
</p>
</dd>
<dt>RC2</dt>
<dd><p>Наборы шифров с использованием RC2.
</p>
</dd>
<dt>IDEA</dt>
<dd><p>Наборы шифров с использованием IDEA.
</p>
</dd>
<dt>SEED</dt>
<dd><p>Наборы шифров с использованием SEED.
</p>
</dd>
<dt>MD5</dt>
<dd><p>Наборы шифров с использованием MD5.
</p>
</dd>
<dt>SHA1, SHA</dt>
<dd><p>Наборы шифров с использованием SHA1.
</p>
</dd>
<dt>SHA256, SHA384</dt>
<dd><p>Наборы шифров с использованием SHA256 или SHA384.
</p>
</dd>
<dt>aGOST</dt>
<dd><p>Наборы шифров, использующие для аутентификации GOST R 34.10
           (2001 или 94) (требуется механизм, поддерживающий алгоритмы GOST).
</p>
</dd>
<dt>aGOST01</dt>
<dd><p>Наборы шифров с использованием аутентификации GOST R 34.10-2001.
</p>
</dd>
<dt>kGOST</dt>
<dd><p>Наборы шифров, использующие обмен ключами VKO 34.10, указанный в RFC 4357.
</p>
</dd>
<dt>GOST94</dt>
<dd><p>Наборы шифров, использующие HMAC на основе GOST R 34.11-94.
</p>
</dd>
<dt>GOST89MAC</dt>
<dd><p>Наборы шифров, использующие GOST 28147-89 MAC вместо HMAC.
</p>
</dd>
<dt>PSK</dt>
<dd><p>Все комплекты шифров используют общие ключи (PSK).
</p>
</dd>
<dt>kPSK, kECDHEPSK, kDHEPSK, kRSAPSK</dt>
<dd><p>Наборы шифров с использованием обмена ключами PSK, ECDHE_PSK, DHE_PSK
           или RSA_PSK.
</p>
</dd>
<dt>aPSK</dt>
<dd><p>Наборы шифров, использующие аутентификацию PSK (в настоящее время все
           режимы PSK, кроме RSA_PSK).
</p>
</dd>
<dt>SUITEB128, SUITEB128ONLY, SUITEB192</dt>
<dd><p>Включает режим работы набора B, используя 128 (разрешающий 192-битный
           режим для однорангового узла) 128-битный (не допускающий 192-битный для
           однорангового узла) или 192-битный уровень безопасности соответственно.
           Если используются эти строки шифров, они должны появиться первыми в
           списке шифров, а все, что после них, игнорируется. Настройка режима
           Suite B имеет дополнительные последствия, необходимые для соблюдения
           RFC6460. В частности, поддерживаемые алгоритмы подписи сокращены для
           поддержки только ECDSA и SHA256 или SHA384, могут использоваться только
           эллиптические кривые P-256 и P-384, и допустимы только два комплекта
           шифров (ECDHE-ECDSA-AES128-GCM-SHA256 и ECDHE-ECDSA-AES256-GCM-SHA384),
           соответствующих B.
</p></dd>
</dl>
</dd>
<dt>CIPHER SUITE NAMES</dt>
<dd><p>В следующих списках приведены имена наборов шифров SSL или TLS из
       соответствующей спецификации и их эквиваленты OpenSSL. Следует отметить,
       что несколько имен наборов шифров не включают используемую аутентификацию,
       например, DES-CBC3-SHA. В этих случаях используется аутентификация RSA.
</p><dl compact="compact">
<dt>SSL v3.0 наборы шифров</dt>
<dd><p>SSL_RSA_WITH_NULL_MD5                   NULL-MD5
        SSL_RSA_WITH_NULL_SHA                   NULL-SHA
        SSL_RSA_WITH_RC4_128_MD5                RC4-MD5
        SSL_RSA_WITH_RC4_128_SHA                RC4-SHA
        SSL_RSA_WITH_IDEA_CBC_SHA               IDEA-CBC-SHA
        SSL_RSA_WITH_3DES_EDE_CBC_SHA           DES-CBC3-SHA
</p>
<p>SSL_DH_DSS_WITH_3DES_EDE_CBC_SHA        DH-DSS-DES-CBC3-SHA
        SSL_DH_RSA_WITH_3DES_EDE_CBC_SHA        DH-RSA-DES-CBC3-SHA
        SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA       DHE-DSS-DES-CBC3-SHA
        SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA       DHE-RSA-DES-CBC3-SHA
</p>
<p>SSL_DH_anon_WITH_RC4_128_MD5            ADH-RC4-MD5
        SSL_DH_anon_WITH_3DES_EDE_CBC_SHA       ADH-DES-CBC3-SHA
</p>
<p>SSL_FORTEZZA_KEA_WITH_NULL_SHA          Not implemented.
        SSL_FORTEZZA_KEA_WITH_FORTEZZA_CBC_SHA  Not implemented.
        SSL_FORTEZZA_KEA_WITH_RC4_128_SHA       Not implemented.
</p>
</dd>
<dt>TLS v1.0 наборы шифров</dt>
<dd><p>TLS_RSA_WITH_NULL_MD5                   NULL-MD5
        TLS_RSA_WITH_NULL_SHA                   NULL-SHA
        TLS_RSA_WITH_RC4_128_MD5                RC4-MD5
        TLS_RSA_WITH_RC4_128_SHA                RC4-SHA
        TLS_RSA_WITH_IDEA_CBC_SHA               IDEA-CBC-SHA
        TLS_RSA_WITH_3DES_EDE_CBC_SHA           DES-CBC3-SHA
</p>
<p>TLS_DH_DSS_WITH_3DES_EDE_CBC_SHA        Not implemented.
        TLS_DH_RSA_WITH_3DES_EDE_CBC_SHA        Not implemented.
        TLS_DHE_DSS_WITH_3DES_EDE_CBC_SHA       DHE-DSS-DES-CBC3-SHA
        TLS_DHE_RSA_WITH_3DES_EDE_CBC_SHA       DHE-RSA-DES-CBC3-SHA
</p>
<p>TLS_DH_anon_WITH_RC4_128_MD5            ADH-RC4-MD5
        TLS_DH_anon_WITH_3DES_EDE_CBC_SHA       ADH-DES-CBC3-SHA
</p>
</dd>
<dt>AES наборы шифров от RFC3268, расширяющие TLS v1.0</dt>
<dd><p>TLS_RSA_WITH_AES_128_CBC_SHA            AES128-SHA
        TLS_RSA_WITH_AES_256_CBC_SHA            AES256-SHA
</p>
<p>TLS_DH_DSS_WITH_AES_128_CBC_SHA         DH-DSS-AES128-SHA
        TLS_DH_DSS_WITH_AES_256_CBC_SHA         DH-DSS-AES256-SHA
        TLS_DH_RSA_WITH_AES_128_CBC_SHA         DH-RSA-AES128-SHA
        TLS_DH_RSA_WITH_AES_256_CBC_SHA         DH-RSA-AES256-SHA
</p>
<p>TLS_DHE_DSS_WITH_AES_128_CBC_SHA        DHE-DSS-AES128-SHA
        TLS_DHE_DSS_WITH_AES_256_CBC_SHA        DHE-DSS-AES256-SHA
        TLS_DHE_RSA_WITH_AES_128_CBC_SHA        DHE-RSA-AES128-SHA
        TLS_DHE_RSA_WITH_AES_256_CBC_SHA        DHE-RSA-AES256-SHA
</p>
<p>TLS_DH_anon_WITH_AES_128_CBC_SHA        ADH-AES128-SHA
        TLS_DH_anon_WITH_AES_256_CBC_SHA        ADH-AES256-SHA
</p>
</dd>
<dt>Camellia наборы шифров от RFC4132, расширяющие TLS v1.0</dt>
<dd><p>TLS_RSA_WITH_CAMELLIA_128_CBC_SHA      CAMELLIA128-SHA
        TLS_RSA_WITH_CAMELLIA_256_CBC_SHA      CAMELLIA256-SHA
</p>
<p>TLS_DH_DSS_WITH_CAMELLIA_128_CBC_SHA   DH-DSS-CAMELLIA128-SHA
        TLS_DH_DSS_WITH_CAMELLIA_256_CBC_SHA   DH-DSS-CAMELLIA256-SHA
        TLS_DH_RSA_WITH_CAMELLIA_128_CBC_SHA   DH-RSA-CAMELLIA128-SHA
        TLS_DH_RSA_WITH_CAMELLIA_256_CBC_SHA   DH-RSA-CAMELLIA256-SHA
</p>
<p>TLS_DHE_DSS_WITH_CAMELLIA_128_CBC_SHA  DHE-DSS-CAMELLIA128-SHA
        TLS_DHE_DSS_WITH_CAMELLIA_256_CBC_SHA  DHE-DSS-CAMELLIA256-SHA
        TLS_DHE_RSA_WITH_CAMELLIA_128_CBC_SHA  DHE-RSA-CAMELLIA128-SHA
        TLS_DHE_RSA_WITH_CAMELLIA_256_CBC_SHA  DHE-RSA-CAMELLIA256-SHA
</p>
<p>TLS_DH_anon_WITH_CAMELLIA_128_CBC_SHA  ADH-CAMELLIA128-SHA
        TLS_DH_anon_WITH_CAMELLIA_256_CBC_SHA  ADH-CAMELLIA256-SHA
</p>
</dd>
<dt>SEED наборы шифров от RFC4162, расширяющие TLS v1.0</dt>
<dd><p>TLS_RSA_WITH_SEED_CBC_SHA              SEED-SHA
</p>
<p>TLS_DH_DSS_WITH_SEED_CBC_SHA           DH-DSS-SEED-SHA
        TLS_DH_RSA_WITH_SEED_CBC_SHA           DH-RSA-SEED-SHA
</p>
<p>TLS_DHE_DSS_WITH_SEED_CBC_SHA          DHE-DSS-SEED-SHA
        TLS_DHE_RSA_WITH_SEED_CBC_SHA          DHE-RSA-SEED-SHA
</p>
<p>TLS_DH_anon_WITH_SEED_CBC_SHA          ADH-SEED-SHA
</p>
</dd>
<dt>GOST наборы шифров от draft-chudov-cryptopro-cptls, расширяющие TLS v1.0</dt>
<dd><p>Примечание: эти шифры требуют механизма, который включает в себя
       криптографические алгоритмы GOST, такие как механизм ccgost,
       включенный в дистрибутив OpenSSL.
</p>
<p>TLS_GOSTR341094_WITH_28147_CNT_IMIT GOST94-GOST89-GOST89
        TLS_GOSTR341001_WITH_28147_CNT_IMIT GOST2001-GOST89-GOST89
        TLS_GOSTR341094_WITH_NULL_GOSTR3411 GOST94-NULL-GOST94
        TLS_GOSTR341001_WITH_NULL_GOSTR3411 GOST2001-NULL-GOST94
</p>
</dd>
<dt>Дополнительный Экспорт 1024 и другие комплекты шифров</dt>
<dd><p>Примечание: эти шифры также можно использовать в SSL v3.
</p>
<p>TLS_DHE_DSS_WITH_RC4_128_SHA            DHE-DSS-RC4-SHA
</p>
</dd>
<dt>Наборы шифров эллиптической кривой.</dt>
<dd><p>TLS_ECDHE_RSA_WITH_NULL_SHA             ECDHE-RSA-NULL-SHA
        TLS_ECDHE_RSA_WITH_RC4_128_SHA          ECDHE-RSA-RC4-SHA
        TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA     ECDHE-RSA-DES-CBC3-SHA
        TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA      ECDHE-RSA-AES128-SHA
        TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA      ECDHE-RSA-AES256-SHA
</p>
<p>TLS_ECDHE_ECDSA_WITH_NULL_SHA           ECDHE-ECDSA-NULL-SHA
        TLS_ECDHE_ECDSA_WITH_RC4_128_SHA        ECDHE-ECDSA-RC4-SHA
        TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA   ECDHE-ECDSA-DES-CBC3-SHA
        TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA    ECDHE-ECDSA-AES128-SHA
        TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA    ECDHE-ECDSA-AES256-SHA
</p>
<p>TLS_ECDH_anon_WITH_NULL_SHA             AECDH-NULL-SHA
        TLS_ECDH_anon_WITH_RC4_128_SHA          AECDH-RC4-SHA
        TLS_ECDH_anon_WITH_3DES_EDE_CBC_SHA     AECDH-DES-CBC3-SHA
        TLS_ECDH_anon_WITH_AES_128_CBC_SHA      AECDH-AES128-SHA
        TLS_ECDH_anon_WITH_AES_256_CBC_SHA      AECDH-AES256-SHA
</p>
</dd>
<dt>TLS v1.2 наборы шифров</dt>
<dd><p>TLS_RSA_WITH_NULL_SHA256                  NULL-SHA256
</p>
<p>TLS_RSA_WITH_AES_128_CBC_SHA256           AES128-SHA256
        TLS_RSA_WITH_AES_256_CBC_SHA256           AES256-SHA256
        TLS_RSA_WITH_AES_128_GCM_SHA256           AES128-GCM-SHA256
        TLS_RSA_WITH_AES_256_GCM_SHA384           AES256-GCM-SHA384
</p>
<p>TLS_DH_RSA_WITH_AES_128_CBC_SHA256        DH-RSA-AES128-SHA256
        TLS_DH_RSA_WITH_AES_256_CBC_SHA256        DH-RSA-AES256-SHA256
        TLS_DH_RSA_WITH_AES_128_GCM_SHA256        DH-RSA-AES128-GCM-SHA256
        TLS_DH_RSA_WITH_AES_256_GCM_SHA384        DH-RSA-AES256-GCM-SHA384
</p>
<p>TLS_DH_DSS_WITH_AES_128_CBC_SHA256        DH-DSS-AES128-SHA256
        TLS_DH_DSS_WITH_AES_256_CBC_SHA256        DH-DSS-AES256-SHA256
        TLS_DH_DSS_WITH_AES_128_GCM_SHA256        DH-DSS-AES128-GCM-SHA256
        TLS_DH_DSS_WITH_AES_256_GCM_SHA384        DH-DSS-AES256-GCM-SHA384
</p>
<p>TLS_DHE_RSA_WITH_AES_128_CBC_SHA256       DHE-RSA-AES128-SHA256
        TLS_DHE_RSA_WITH_AES_256_CBC_SHA256       DHE-RSA-AES256-SHA256
        TLS_DHE_RSA_WITH_AES_128_GCM_SHA256       DHE-RSA-AES128-GCM-SHA256
        TLS_DHE_RSA_WITH_AES_256_GCM_SHA384       DHE-RSA-AES256-GCM-SHA384
</p>
<p>TLS_DHE_DSS_WITH_AES_128_CBC_SHA256       DHE-DSS-AES128-SHA256
        TLS_DHE_DSS_WITH_AES_256_CBC_SHA256       DHE-DSS-AES256-SHA256
        TLS_DHE_DSS_WITH_AES_128_GCM_SHA256       DHE-DSS-AES128-GCM-SHA256
        TLS_DHE_DSS_WITH_AES_256_GCM_SHA384       DHE-DSS-AES256-GCM-SHA384
</p>
<p>TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256     ECDHE-RSA-AES128-SHA256
        TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384     ECDHE-RSA-AES256-SHA384
        TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256     ECDHE-RSA-AES128-GCM-SHA256
        TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384     ECDHE-RSA-AES256-GCM-SHA384
</p>
<p>TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256   ECDHE-ECDSA-AES128-SHA256
        TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384   ECDHE-ECDSA-AES256-SHA384
        TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256   ECDHE-ECDSA-AES128-GCM-SHA256
        TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384   ECDHE-ECDSA-AES256-GCM-SHA384
</p>
<p>TLS_DH_anon_WITH_AES_128_CBC_SHA256       ADH-AES128-SHA256
        TLS_DH_anon_WITH_AES_256_CBC_SHA256       ADH-AES256-SHA256
        TLS_DH_anon_WITH_AES_128_GCM_SHA256       ADH-AES128-GCM-SHA256
        TLS_DH_anon_WITH_AES_256_GCM_SHA384       ADH-AES256-GCM-SHA384
</p>
<p>RSA_WITH_AES_128_CCM                      AES128-CCM
        RSA_WITH_AES_256_CCM                      AES256-CCM
        DHE_RSA_WITH_AES_128_CCM                  DHE-RSA-AES128-CCM
        DHE_RSA_WITH_AES_256_CCM                  DHE-RSA-AES256-CCM
        RSA_WITH_AES_128_CCM_8                    AES128-CCM8
        RSA_WITH_AES_256_CCM_8                    AES256-CCM8
        DHE_RSA_WITH_AES_128_CCM_8                DHE-RSA-AES128-CCM8
        DHE_RSA_WITH_AES_256_CCM_8                DHE-RSA-AES256-CCM8
        ECDHE_ECDSA_WITH_AES_128_CCM              ECDHE-ECDSA-AES128-CCM
        ECDHE_ECDSA_WITH_AES_256_CCM              ECDHE-ECDSA-AES256-CCM
        ECDHE_ECDSA_WITH_AES_128_CCM_8            ECDHE-ECDSA-AES128-CCM8
        ECDHE_ECDSA_WITH_AES_256_CCM_8            ECDHE-ECDSA-AES256-CCM8
</p>
</dd>
<dt>ARIA наборы шифров от RFC6209, расширяющие TLS v1.2</dt>
<dd><p>Примечание: режимы CBC, упомянутые в этом RFC, не поддерживаются.
</p>
<p>TLS_RSA_WITH_ARIA_128_GCM_SHA256          ARIA128-GCM-SHA256
        TLS_RSA_WITH_ARIA_256_GCM_SHA384          ARIA256-GCM-SHA384
        TLS_DHE_RSA_WITH_ARIA_128_GCM_SHA256      DHE-RSA-ARIA128-GCM-SHA256
        TLS_DHE_RSA_WITH_ARIA_256_GCM_SHA384      DHE-RSA-ARIA256-GCM-SHA384
        TLS_DHE_DSS_WITH_ARIA_128_GCM_SHA256      DHE-DSS-ARIA128-GCM-SHA256
        TLS_DHE_DSS_WITH_ARIA_256_GCM_SHA384      DHE-DSS-ARIA256-GCM-SHA384
        TLS_ECDHE_ECDSA_WITH_ARIA_128_GCM_SHA256  ECDHE-ECDSA-ARIA128-GCM-SHA256
        TLS_ECDHE_ECDSA_WITH_ARIA_256_GCM_SHA384  ECDHE-ECDSA-ARIA256-GCM-SHA384
        TLS_ECDHE_RSA_WITH_ARIA_128_GCM_SHA256    ECDHE-ARIA128-GCM-SHA256
        TLS_ECDHE_RSA_WITH_ARIA_256_GCM_SHA384    ECDHE-ARIA256-GCM-SHA384
        TLS_PSK_WITH_ARIA_128_GCM_SHA256          PSK-ARIA128-GCM-SHA256
        TLS_PSK_WITH_ARIA_256_GCM_SHA384          PSK-ARIA256-GCM-SHA384
        TLS_DHE_PSK_WITH_ARIA_128_GCM_SHA256      DHE-PSK-ARIA128-GCM-SHA256
        TLS_DHE_PSK_WITH_ARIA_256_GCM_SHA384      DHE-PSK-ARIA256-GCM-SHA384
        TLS_RSA_PSK_WITH_ARIA_128_GCM_SHA256      RSA-PSK-ARIA128-GCM-SHA256
        TLS_RSA_PSK_WITH_ARIA_256_GCM_SHA384      RSA-PSK-ARIA256-GCM-SHA384
</p>
</dd>
<dt>Camellia HMAC-Based наборы шифров от RFC6367, расширяющие TLS v1.2</dt>
<dd><p>TLS_ECDHE_ECDSA_WITH_CAMELLIA_128_CBC_SHA256 ECDHE-ECDSA-CAMELLIA128-SHA256
        TLS_ECDHE_ECDSA_WITH_CAMELLIA_256_CBC_SHA384 ECDHE-ECDSA-CAMELLIA256-SHA384
        TLS_ECDHE_RSA_WITH_CAMELLIA_128_CBC_SHA256   ECDHE-RSA-CAMELLIA128-SHA256
        TLS_ECDHE_RSA_WITH_CAMELLIA_256_CBC_SHA384   ECDHE-RSA-CAMELLIA256-SHA384
</p>
</dd>
<dt>Набор ключей с предварительным общим ключом (PSK)</dt>
<dd><p>PSK_WITH_NULL_SHA                         PSK-NULL-SHA
        DHE_PSK_WITH_NULL_SHA                     DHE-PSK-NULL-SHA
        RSA_PSK_WITH_NULL_SHA                     RSA-PSK-NULL-SHA
</p>
<p>PSK_WITH_RC4_128_SHA                      PSK-RC4-SHA
        PSK_WITH_3DES_EDE_CBC_SHA                 PSK-3DES-EDE-CBC-SHA
        PSK_WITH_AES_128_CBC_SHA                  PSK-AES128-CBC-SHA
        PSK_WITH_AES_256_CBC_SHA                  PSK-AES256-CBC-SHA
</p>
<p>DHE_PSK_WITH_RC4_128_SHA                  DHE-PSK-RC4-SHA
        DHE_PSK_WITH_3DES_EDE_CBC_SHA             DHE-PSK-3DES-EDE-CBC-SHA
        DHE_PSK_WITH_AES_128_CBC_SHA              DHE-PSK-AES128-CBC-SHA
        DHE_PSK_WITH_AES_256_CBC_SHA              DHE-PSK-AES256-CBC-SHA
</p>
<p>RSA_PSK_WITH_RC4_128_SHA                  RSA-PSK-RC4-SHA
        RSA_PSK_WITH_3DES_EDE_CBC_SHA             RSA-PSK-3DES-EDE-CBC-SHA
        RSA_PSK_WITH_AES_128_CBC_SHA              RSA-PSK-AES128-CBC-SHA
        RSA_PSK_WITH_AES_256_CBC_SHA              RSA-PSK-AES256-CBC-SHA
</p>
<p>PSK_WITH_AES_128_GCM_SHA256               PSK-AES128-GCM-SHA256
        PSK_WITH_AES_256_GCM_SHA384               PSK-AES256-GCM-SHA384
        DHE_PSK_WITH_AES_128_GCM_SHA256           DHE-PSK-AES128-GCM-SHA256
        DHE_PSK_WITH_AES_256_GCM_SHA384           DHE-PSK-AES256-GCM-SHA384
        RSA_PSK_WITH_AES_128_GCM_SHA256           RSA-PSK-AES128-GCM-SHA256
        RSA_PSK_WITH_AES_256_GCM_SHA384           RSA-PSK-AES256-GCM-SHA384
</p>
<p>PSK_WITH_AES_128_CBC_SHA256               PSK-AES128-CBC-SHA256
        PSK_WITH_AES_256_CBC_SHA384               PSK-AES256-CBC-SHA384
        PSK_WITH_NULL_SHA256                      PSK-NULL-SHA256
        PSK_WITH_NULL_SHA384                      PSK-NULL-SHA384
        DHE_PSK_WITH_AES_128_CBC_SHA256           DHE-PSK-AES128-CBC-SHA256
        DHE_PSK_WITH_AES_256_CBC_SHA384           DHE-PSK-AES256-CBC-SHA384
        DHE_PSK_WITH_NULL_SHA256                  DHE-PSK-NULL-SHA256
        DHE_PSK_WITH_NULL_SHA384                  DHE-PSK-NULL-SHA384
        RSA_PSK_WITH_AES_128_CBC_SHA256           RSA-PSK-AES128-CBC-SHA256
        RSA_PSK_WITH_AES_256_CBC_SHA384           RSA-PSK-AES256-CBC-SHA384
        RSA_PSK_WITH_NULL_SHA256                  RSA-PSK-NULL-SHA256
        RSA_PSK_WITH_NULL_SHA384                  RSA-PSK-NULL-SHA384
        PSK_WITH_AES_128_GCM_SHA256               PSK-AES128-GCM-SHA256
        PSK_WITH_AES_256_GCM_SHA384               PSK-AES256-GCM-SHA384
</p>
<p>ECDHE_PSK_WITH_RC4_128_SHA                ECDHE-PSK-RC4-SHA
        ECDHE_PSK_WITH_3DES_EDE_CBC_SHA           ECDHE-PSK-3DES-EDE-CBC-SHA
        ECDHE_PSK_WITH_AES_128_CBC_SHA            ECDHE-PSK-AES128-CBC-SHA
        ECDHE_PSK_WITH_AES_256_CBC_SHA            ECDHE-PSK-AES256-CBC-SHA
        ECDHE_PSK_WITH_AES_128_CBC_SHA256         ECDHE-PSK-AES128-CBC-SHA256
        ECDHE_PSK_WITH_AES_256_CBC_SHA384         ECDHE-PSK-AES256-CBC-SHA384
        ECDHE_PSK_WITH_NULL_SHA                   ECDHE-PSK-NULL-SHA
        ECDHE_PSK_WITH_NULL_SHA256                ECDHE-PSK-NULL-SHA256
        ECDHE_PSK_WITH_NULL_SHA384                ECDHE-PSK-NULL-SHA384
</p>
<p>PSK_WITH_CAMELLIA_128_CBC_SHA256          PSK-CAMELLIA128-SHA256
        PSK_WITH_CAMELLIA_256_CBC_SHA384          PSK-CAMELLIA256-SHA384
</p>
<p>DHE_PSK_WITH_CAMELLIA_128_CBC_SHA256      DHE-PSK-CAMELLIA128-SHA256
        DHE_PSK_WITH_CAMELLIA_256_CBC_SHA384      DHE-PSK-CAMELLIA256-SHA384
</p>
<p>RSA_PSK_WITH_CAMELLIA_128_CBC_SHA256      RSA-PSK-CAMELLIA128-SHA256
        RSA_PSK_WITH_CAMELLIA_256_CBC_SHA384      RSA-PSK-CAMELLIA256-SHA384
</p>
<p>ECDHE_PSK_WITH_CAMELLIA_128_CBC_SHA256    ECDHE-PSK-CAMELLIA128-SHA256
        ECDHE_PSK_WITH_CAMELLIA_256_CBC_SHA384    ECDHE-PSK-CAMELLIA256-SHA384
</p>
<p>PSK_WITH_AES_128_CCM                      PSK-AES128-CCM
        PSK_WITH_AES_256_CCM                      PSK-AES256-CCM
        DHE_PSK_WITH_AES_128_CCM                  DHE-PSK-AES128-CCM
        DHE_PSK_WITH_AES_256_CCM                  DHE-PSK-AES256-CCM
        PSK_WITH_AES_128_CCM_8                    PSK-AES128-CCM8
        PSK_WITH_AES_256_CCM_8                    PSK-AES256-CCM8
        DHE_PSK_WITH_AES_128_CCM_8                DHE-PSK-AES128-CCM8
        DHE_PSK_WITH_AES_256_CCM_8                DHE-PSK-AES256-CCM8
</p>
</dd>
<dt>ChaCha20-Poly1305 наборы шифров, расширяющие TLS v1.2</dt>
<dd><p>TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256      ECDHE-RSA-CHACHA20-POLY1305
        TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256    ECDHE-ECDSA-CHACHA20-POLY1305
        TLS_DHE_RSA_WITH_CHACHA20_POLY1305_SHA256        DHE-RSA-CHACHA20-POLY1305
        TLS_PSK_WITH_CHACHA20_POLY1305_SHA256            PSK-CHACHA20-POLY1305
        TLS_ECDHE_PSK_WITH_CHACHA20_POLY1305_SHA256      ECDHE-PSK-CHACHA20-POLY1305
        TLS_DHE_PSK_WITH_CHACHA20_POLY1305_SHA256        DHE-PSK-CHACHA20-POLY1305
        TLS_RSA_PSK_WITH_CHACHA20_POLY1305_SHA256        RSA-PSK-CHACHA20-POLY1305
</p>
</dd>
<dt>TLS v1.3 наборы шифров</dt>
<dd><p>TLS_AES_128_GCM_SHA256                     TLS_AES_128_GCM_SHA256
        TLS_AES_256_GCM_SHA384                     TLS_AES_256_GCM_SHA384
        TLS_CHACHA20_POLY1305_SHA256               TLS_CHACHA20_POLY1305_SHA256
        TLS_AES_128_CCM_SHA256                     TLS_AES_128_CCM_SHA256
        TLS_AES_128_CCM_8_SHA256                   TLS_AES_128_CCM_8_SHA256
</p>
</dd>
<dt>Старые имена, используемые OpenSSL</dt>
<dd><p>Следующие имена принимаются старыми версиями:
</p>
<p>SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA    EDH-RSA-DES-CBC3-SHA (DHE-RSA-DES-CBC3-SHA)
        SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA    EDH-DSS-DES-CBC3-SHA (DHE-DSS-DES-CBC3-SHA)
</p></dd>
</dl>
</dd>
<dt>NOTES</dt>
<dd><p>Некоторые скомпилированные версии OpenSSL могут не включать все перечисленные
       здесь шифры, потому что некоторые шифры были исключены во время компиляции.
</p>
</dd>
<dt>EXAMPLES</dt>
<dd><div class="display">
<pre class="display">       Подробный список всех шифров OpenSSL, включая шифры NULL:

        openssl ciphers -v &rsquo;ALL:eNULL&rsquo;

       Включите все шифры, кроме NULL и anonymous DH, затем отсортируйте по силе:

        openssl ciphers -v &rsquo;ALL:!ADH:@STRENGTH&rsquo;

       Включите все шифры, кроме шифрования без шифрования (eNULL) или без
       аутентификации (aNULL):

        openssl ciphers -v &rsquo;ALL:!aNULL&rsquo;

       Включайте только шифры 3DES, а затем ставьте последние шифры RSA:

        openssl ciphers -v &rsquo;3DES:+RSA&rsquo;

       Включите все шифры RC4, но оставьте их без аутентификации:

        openssl ciphers -v &rsquo;RC4:!COMPLEMENTOFDEFAULT&rsquo;

       Включите все шифры с аутентификацией RSA, но оставьте шифры без шифрования.

        openssl ciphers -v &rsquo;RSA:!COMPLEMENTOFALL&rsquo;

       Установите уровень безопасности 2 и отобразите все шифры в
       соответствии с уровнем 2:

        openssl ciphers -s -v &rsquo;ALL:@SECLEVEL=2&rsquo;
</pre></div>
</dd>
<dt>SEE ALSO</dt>
<dd><p>s_client(1), s_server(1), ssl(7)
</p>
</dd>
<dt>HISTORY</dt>
<dd><p>Параметр -V для команды шифров был добавлен в OpenSSL 1.0.0.
</p>
<p>-stdname доступно только если OpenSSL построен с включенной трассировкой
       (enable-ssl-trace аргумент в Configur)e до OpenSSL 1.1.1.
</p>
<p>-convert был добавлен в OpenSSL 1.1.1 .
</p>
</dd>
<dt>COPYRIGHT</dt>
<dd><p>Copyright 2000-2018 The OpenSSL Project Authors. All Rights Reserved.
</p>
<p>Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use this
       file except in compliance with the License.  You can obtain a copy in the
       file LICENSE in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.
</p></dd>
</dl>
<p>1.1.1a                                      2018-11-20                                  CIPHERS(1)
</p><hr>
<a name="CMS"></a>
<div class="header">
<p>
Next: <a href="#CRL" accesskey="n" rel="next">CRL</a>, Previous: <a href="#CIPHERS" accesskey="p" rel="prev">CIPHERS</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>
<a name="CMS-1"></a>
<h2 class="chapter">10 CMS</h2>
<dl compact="compact">
<dt>NAME</dt>
<dd><p>openssl-cms, cms - CMS утилита
</p>
</dd>
<dt>SYNOPSIS</dt>
<dd><p>openssl cms [<a href="#cms-_002dhelp">-help</a>] [<a href="#cms-_002dencrypt">-encrypt</a>] [<a href="#cms-_002ddecrypt">-decrypt</a>] [<a href="#cms-_002dsign">-sign</a>] [<a href="#cms-_002dverify">-verify</a>] [<a href="#cms-_002dcmsout">-cmsout</a>] [<a href="#cms-_002dresign">-resign</a>] [<a href="#cms-_002ddata_005fcreate">-data_create</a>] [<a href="#cms-_002ddata_005fout">-data_out</a>] [<a href="#cms-_002ddigest_005fcreate">-digest_create</a>] [<a href="#cms-_002ddigest_005fverify">-digest_verify</a>] [<a href="#cms-_002dcompress">-compress</a>] [<a href="#cms-_002duncompress">-uncompress</a>] [<a href="#cms-_002dEncryptedData_005fencrypt">-EncryptedData_encrypt</a>] [<a href="#cms-_002dsign_005freceipt">-sign_receipt</a>] [<a href="#cms-_002dverify_005freceipt-receipt">-verify_receipt receipt</a>] [<a href="#cms-_002din-filename">-in filename</a>] [<a href="#cms-_002dinform-SMIME_007cPEM_007cDER">-inform SMIME|PEM|DER</a>] [<a href="#cms-_002drctform-SMIME_007cPEM_007cDER">-rctform SMIME|PEM|DER</a>] [<a href="#cms-_002dout-filename">-out filename</a>] [<a href="#cms-_002doutform-SMIME_007cPEM_007cDER">-outform SMIME|PEM|DER</a>] [<a href="#cms-_002dstream-_002dindef-_002dnoindef">-stream -indef -noindef</a>] [<a href="#cms-_002dnoindef">-noindef</a>] [<a href="#cms-_002dcontent-filename">-content filename</a>] [<a href="#cms-_002dtext">-text</a>] [<a href="#cms-_002dnoout">-noout</a>] [<a href="#cms-_002dprint">-print</a>] [<a href="#cms-_002dCAfile-file">-CAfile file</a>] [<a href="#cms-_002dCApath-dir">-CApath dir</a>] [<a href="#cms-_002dno_002dCAfile">-no-CAfile</a>] [<a href="#cms-_002dno_002dCApath">-no-CApath</a>] [<a href="#cms-_005b_002dattime_005d-_005b_002dcheck_005fss_005fsig_005d-_005b_002dcrl_005fcheck_005d-_005b_002dcrl_005fcheck_005fall_005d-_005b_002dexplicit_005fpolicy_005d-_005b_002dextended_005fcrl_005d-_005b_002dignore_005fcritical_005d-_005b_002dinhibit_005fany_005d-_005b_002dinhibit_005fmap_005d-_005b_002dno_005falt_005fchains_005d-_005b_002dno_005fcheck_005ftime_005d-_005b_002dpartial_005fchain_005d-_005b_002dpolicy_005d-_005b_002dpolicy_005fcheck_005d-_005b_002dpolicy_005fprint_005d-_005b_002dpurpose_005d-_005b_002dsuiteB_005f128_005d-_005b_002dsuiteB_005f128_005fonly_005d-_005b_002dsuiteB_005f192_005d-_005b_002dtrusted_005ffirst_005d-_005b_002duse_005fdeltas_005d-_005b_002dauth_005flevel_005d-_005b_002dverify_005fdepth_005d-_005b_002dverify_005femail_005d-_005b_002dverify_005fhostname_005d-_005b_002dverify_005fip_005d-_005b_002dverify_005fname_005d-_005b_002dx509_005fstrict_005d">[-attime] [-check_ss_sig] [-crl_check] [-crl_check_all] [-explicit_policy] [-extended_crl] [-ignore_critical] [-inhibit_any] [-inhibit_map] [-no_alt_chains] [-no_check_time] [-partial_chain] [-policy] [-policy_check] [-policy_print] [-purpose] [-suiteB_128] [-suiteB_128_only] [-suiteB_192] [-trusted_first] [-use_deltas] [-auth_level] [-verify_depth] [-verify_email] [-verify_hostname] [-verify_ip] [-verify_name] [-x509_strict]</a>] [<a href="#cms-_002dmd-digest">-md digest</a>] [<a href="#cms-_002dcipher">-cipher</a>] [<a href="#cms-_002dnointern">-nointern</a>] [<a href="#cms-_002dnoverify">-noverify</a>] [<a href="#cms-_002dnocerts">-nocerts</a>] [<a href="#cms-_002dnoattr">-noattr</a>] [<a href="#cms-_002dnosmimecap">-nosmimecap</a>] [<a href="#cms-_002dbinary">-binary</a>] [<a href="#cms-_002dcrlfeol">-crlfeol</a>] [<a href="#cms-_002dasciicrlf">-asciicrlf</a>] [<a href="#cms-_002dnodetach">-nodetach</a>] [<a href="#cms-_002dcertfile-file">-certfile file</a>] [<a href="#cms-_002dcertsout-file">-certsout file</a>] [<a href="#cms-_002dsigner-file">-signer file</a>] [<a href="#cms-_002drecip-file">-recip file</a>] [<a href="#cms-_002dkeyid">-keyid</a>] [<a href="#cms-_005b_002dreceipt_005frequest_005fall_005d-_005b_002dreceipt_005frequest_005ffirst_005d">[-receipt_request_all] [-receipt_request_first]</a>] [<a href="#cms-_002dreceipt_005frequest_005ffrom-emailaddress">-receipt_request_from emailaddress</a>] [<a href="#cms-_002dreceipt_005frequest_005fto-emailaddress">-receipt_request_to emailaddress</a>] [<a href="#cms-_002dreceipt_005frequest_005fprint">-receipt_request_print</a>] [<a href="#cms-_002dsecretkey-key">-secretkey key</a>] [<a href="#cms-_002dsecretkeyid-id">-secretkeyid id</a>] [<a href="#cms-_002decontent_005ftype-type">-econtent_type type</a>] [<a href="#cms-_002dinkey-file">-inkey file</a>] [<a href="#cms-_002dkeyopt-name_003aopt">-keyopt name:opt</a>] [<a href="#cms-_002dpassin-arg">-passin arg</a>] [<a href="#cms-_002drand-file_002e_002e_002e">-rand file...</a>] [<a href="#cms-_005b_002dwriterand-file_005d">[-writerand file]</a>] [<a href="#cms-cert_002epem_002e_002e_002e">cert.pem...</a>] [&lsquo;-subject&rsquo; in <cite>-to, -from, -subject</cite>]...
</p>
</dd>
<dt>DESCRIPTION</dt>
<dd><p>Команда cms обрабатывает почту S/MIME v3.1. Может шифровать, расшифровывать,
       подписывать и проверять, сжимать и распаковывать сообщения S/MIME.
</p>
</dd>
<dt>OPTIONS</dt>
<dd><p>Существует четырнадцать опций операций, которые устанавливают тип выполняемой
       операции. Значение других параметров зависит от типа операции.
</p><dl compact="compact">
<dt>-help <a name="cms-_002dhelp"></a></dt>
<dd><p>Распечатайте сообщение об использовании.
</p>
</dd>
<dt>-encrypt <a name="cms-_002dencrypt"></a></dt>
<dd><p>Шифровать почту для заданных сертификатов получателей. Входной файл - это
           сообщение, которое необходимо зашифровать. Выходной файл - это зашифрованная
           почта в формате MIME. Фактический тип CMS - это &lt;B&gt;EnvelopedData&lt;B&gt;.
</p>
<p>Обратите внимание, что для сертификата получателя не выполняется проверка отзыва,
           поэтому, если этот ключ был скомпрометирован, другие могут иметь возможность
           расшифровать текст.
</p>
</dd>
<dt>-decrypt <a name="cms-_002ddecrypt"></a></dt>
<dd><p>Расшифруйте почту, используя предоставленный сертификат и закрытый ключ. Ожидает
           зашифрованное почтовое сообщение в формате MIME для входного файла. Расшифрованное
           письмо записывается в выходной файл.
</p>
</dd>
<dt>-debug_decrypt</dt>
<dd><p>Эта опция устанавливает флаг CMS_DEBUG_DECRYPT. Эту опцию следует использовать с
           осторожностью: Раздел примечаний ниже.
</p>
</dd>
<dt>-sign <a name="cms-_002dsign"></a></dt>
<dd><p>Подпишите почту используя предоставленный сертификат и закрытый ключ. Входной файл -
           это сообщение, которое нужно подписать. Подписанное сообщение в формате MIME
           записывается в выходной файл.
</p>
</dd>
<dt>-verify <a name="cms-_002dverify"></a></dt>
<dd><p>Проверьте подписанную почту. Ожидает подписанное почтовое сообщение на входе и
           выводит подписанные данные. Поддерживается как открытый текст, так и
           непрозрачная подпись.
</p>
</dd>
<dt>-cmsout <a name="cms-_002dcmsout"></a></dt>
<dd><p>Принимает входное сообщение и записывает структуру CMS в кодировке PEM.
</p>
</dd>
<dt>-resign <a name="cms-_002dresign"></a></dt>
<dd><p>Отказаться от сообщения: принять существующее сообщение и одного или
           нескольких новых подписантов.
</p>
</dd>
<dt>-data_create <a name="cms-_002ddata_005fcreate"></a></dt>
<dd><p>Создайте тип данных CMS.
</p>
</dd>
<dt>-data_out <a name="cms-_002ddata_005fout"></a></dt>
<dd><p>Тип данных и вывод содержимого.
</p>
</dd>
<dt>-digest_create <a name="cms-_002ddigest_005fcreate"></a></dt>
<dd><p>Создайте тип DigestedData CMS.
</p>
</dd>
<dt>-digest_verify <a name="cms-_002ddigest_005fverify"></a></dt>
<dd><p>Проверьте тип CMS DigestedData и выведите содержимое.
</p>
</dd>
<dt>-compress <a name="cms-_002dcompress"></a></dt>
<dd><p>Создайте тип CMS CompressedData. Чтобы эта опция работала, OpenSSL должен быть
           скомпилирован с поддержкой zlib, иначе он выдаст ошибку.
</p>
</dd>
<dt>-uncompress <a name="cms-_002duncompress"></a></dt>
<dd><p>Распакуйте тип CMS CompressedData и выведите содержимое. Чтобы эта опция
           работала, OpenSSL должен быть скомпилирован с поддержкой zlib, иначе он
           выдаст ошибку.
</p>
</dd>
<dt>-EncryptedData_encrypt <a name="cms-_002dEncryptedData_005fencrypt"></a></dt>
<dd><p>Зашифруйте содержимое, используя предоставленный симметричный ключ и алгоритм,
           используя тип CMS EncryptedData, и выведите содержимое.
</p>
</dd>
<dt>-sign_receipt <a name="cms-_002dsign_005freceipt"></a></dt>
<dd><p>Генерация и вывод подписанной квитанции за предоставленное сообщение. Входное
           сообщение должно содержать подписанный запрос на получение. В остальном
           функциональность аналогична операции -sign.
</p>
</dd>
<dt>-verify_receipt receipt <a name="cms-_002dverify_005freceipt-receipt"></a></dt>
<dd><p>Проверьте подписанную квитанцию ​​в квитанции имени файла. Входное сообщение
           должно содержать исходный запрос на получение. В остальном функциональность
           аналогична операции -verify.
</p>
</dd>
<dt>-in filename <a name="cms-_002din-filename"></a></dt>
<dd><p>Входное сообщение должно быть зашифровано или подписано или сообщение
           должно быть расшифровано или проверено.
</p>
</dd>
<dt>-inform SMIME|PEM|DER <a name="cms-_002dinform-SMIME_007cPEM_007cDER"></a></dt>
<dd><p>Это определяет формат ввода для структуры CMS. По умолчанию используется
           SMIME, который читает сообщение в формате S/MIME. PEM и формат DER изменяют
           это, ожидая вместо структуры CMS формата PEM и DER. В настоящее время это
           влияет только на формат ввода структуры CMS, если структура CMS не вводится
           (например, с помощью -encrypt или -sign), эта опция не действует.
</p>
</dd>
<dt>-rctform SMIME|PEM|DER <a name="cms-_002drctform-SMIME_007cPEM_007cDER"></a></dt>
<dd><p>Укажите формат для подписанной квитанции для использования с
           операцией -receipt_verify.
</p>
</dd>
<dt>-out filename <a name="cms-_002dout-filename"></a></dt>
<dd><p>Текст сообщения, который был расшифрован или проверен, или выходное сообщение
           формата MIME, которое было подписано или проверено.
</p>
</dd>
<dt>-outform SMIME|PEM|DER <a name="cms-_002doutform-SMIME_007cPEM_007cDER"></a></dt>
<dd><p>Это определяет выходной формат для структуры CMS. По умолчанию используется SMIME,
           который записывает сообщение в формате S/MIME. Формат PEM и DER измените это,
           чтобы вместо этого записать структуры CMS формата PEM и DER. В настоящее время
           это влияет только на формат вывода структуры CMS, если структура CMS не выводится
           (например, с помощью -verify или -decrypt), эта опция не действует.
</p>
</dd>
<dt>-stream -indef -noindef <a name="cms-_002dstream-_002dindef-_002dnoindef"></a></dt>
<dd><p>Параметры -stream и -indef эквивалентны и позволяют потоковую передачу I/O для
           операций кодирования. Это позволяет обрабатывать данные за один проход без
           необходимости хранить все содержимое в памяти, потенциально поддерживая очень
           большие файлы. Потоковая передача автоматически устанавливается для подписи
           S/MIME с отсоединенными данными, если выходной формат - SMIME, в настоящее
           время он отключен по умолчанию для всех других операций.
</p>
</dd>
<dt>-noindef <a name="cms-_002dnoindef"></a></dt>
<dd><p>Отключите потоковую передачу I/O, где она будет производить кодирование
           неопределенной длины. Эта опция в настоящее время не имеет никакого эффекта.
           В будущем потоковая передача будет включена по умолчанию для всех
           соответствующих операций, и эта опция отключит ее.
</p>
</dd>
<dt>-content filename <a name="cms-_002dcontent-filename"></a></dt>
<dd><p>Это указывает файл, содержащий отсоединенное содержимое, это полезно только
           с командой -verify. Это возможно только в том случае, если структура CMS
           использует отдельную форму подписи, в которую не входит содержимое. Эта опция
           переопределит любой контент, если формат ввода - S/MIME, и он использует тип
           контента multipart/signed MIME.
</p>
</dd>
<dt>-text <a name="cms-_002dtext"></a></dt>
<dd><p>Эта опция добавляет текстовые заголовки (text/plain) MIME к предоставленному
           сообщению при шифровании или подписании. При расшифровке или проверке он
           удаляет заголовки текста: если дешифрованное или проверенное сообщение не
           относится к типу MIME text/plain, то возникает ошибка.
</p>
</dd>
<dt>-noout <a name="cms-_002dnoout"></a></dt>
<dd><p>Для операции -cmsout не выводите проанализированную структуру CMS. Это полезно
           в сочетании с опцией -print или если проверяется синтаксис структуры CMS.
</p>
</dd>
<dt>-print <a name="cms-_002dprint"></a></dt>
<dd><p>Для операции -cmsout распечатайте все поля структуры CMS. Это в основном полезно
           для тестирования.
</p>
</dd>
<dt>-CAfile file <a name="cms-_002dCAfile-file"></a></dt>
<dd><p>Файл, содержащий доверенные сертификаты CA, используемый только с -verify.
</p>
</dd>
<dt>-CApath dir <a name="cms-_002dCApath-dir"></a></dt>
<dd><p>Каталог, содержащий доверенные сертификаты CA, используется только с -verify.
           Этот каталог должен быть стандартным каталогом сертификатов: то есть хеш
           каждого имени субъекта (используя x509 -hash) должен быть связан с
           каждым сертификатом.
</p>
</dd>
<dt>-no-CAfile <a name="cms-_002dno_002dCAfile"></a></dt>
<dd><p>Не загружайте доверенные сертификаты CA из расположения файла по умолчанию
</p>
</dd>
<dt>-no-CApath <a name="cms-_002dno_002dCApath"></a></dt>
<dd><p>Не загружайте доверенные сертификаты CA из каталога по умолчанию
</p>
</dd>
<dt>-md digest <a name="cms-_002dmd-digest"></a></dt>
<dd><p>Дайджест алгоритм для использования при подписании или отставке.
           Если он отсутствует, будет использован алгоритм дайджеста по
           умолчанию для ключа подписи (обычно SHA1).
</p>
</dd>
<dt>-cipher <a name="cms-_002dcipher"></a></dt>
<dd><p>Алгоритм шифрования для использования. Например тройной DES (168 bits)
           - -des3 или 256 bit AES - -aes256. Любое стандартное имя алгоритма
           (как используется функцией EVP_get_cipherbyname()) также может быть
           использовано перед чертой, например, -aes-128-cbc. Смотрите в enc(1)
           список шифров, поддерживаемых вашей версией OpenSSL.
</p>
<p>Если не указано, используется тройной DES. Используется только с
           командами -encrypt и -EncryptedData_create.
</p>
</dd>
<dt>-nointern <a name="cms-_002dnointern"></a></dt>
<dd><p>При проверке сообщения обычно проверяются сертификаты (если таковые
           имеются), включенные в сообщение, для сертификата подписи. С этой
           опцией используются только сертификаты, указанные в опции -certfile.
           Однако предоставленные сертификаты могут использоваться как
           ненадежные CAs.
</p>
</dd>
<dt>-noverify <a name="cms-_002dnoverify"></a></dt>
<dd><p>Не проверяйте сертификат подписавшего подписанного сообщения.
</p>
</dd>
<dt>-nocerts <a name="cms-_002dnocerts"></a></dt>
<dd><p>При подписании сообщения сертификат подписывающего лица обычно включается
           в эту опцию и исключается. Это уменьшит размер подписанного сообщения, но
           у верификатора должна быть локально доступная копия сертификата подписавшего
           (например, переданная с использованием опции -certfile).
</p>
</dd>
<dt>-noattr <a name="cms-_002dnoattr"></a></dt>
<dd><p>Обычно, когда сообщение подписано, включается набор атрибутов, которые
           включают время подписания и поддерживаемые симметричные алгоритмы. С этой
           опцией они не включены.
</p>
</dd>
<dt>-nosmimecap <a name="cms-_002dnosmimecap"></a></dt>
<dd><p>Исключите список поддерживаемых алгоритмов из подписанных атрибутов,
           другие опции, такие как время подписания и тип контента, все еще включены.
</p>
</dd>
<dt>-binary <a name="cms-_002dbinary"></a></dt>
<dd><p>Обычно входное сообщение преобразуется в формат &quot;canonical&quot;, который
           эффективно использует CR и LF в качестве конца строки: как того требует
           спецификация S/MIME. Когда эта опция присутствует, перевод не происходит.
           Это полезно при обработке двоичных данных, которые могут быть не в
           формате MIME.
</p>
</dd>
<dt>-crlfeol <a name="cms-_002dcrlfeol"></a></dt>
<dd><p>Обычно выходной файл использует один LF в качестве конца строки. Когда
           эта опция присутствует, вместо нее используется CRLF.
</p>
</dd>
<dt>-asciicrlf <a name="cms-_002dasciicrlf"></a></dt>
<dd><p>При подписании используйте формат канонизации ASCII CRLF. Это удаляет
           конечные пробелы из всех строк, удаляет конечные пустые строки в EOF и
           устанавливает тип инкапсулированного содержимого. Эта опция обычно
           используется с отдельным контентом и выходным форматом подписи DER. Этот
           параметр обычно не требуется при проверке, поскольку он включается
           автоматически, если обнаружен формат инкапсулированного содержимого.
</p>
</dd>
<dt>-nodetach <a name="cms-_002dnodetach"></a></dt>
<dd><p>При подписании сообщения используйте непрозрачную подпись: эта форма более
           устойчива к переводу почтовыми ретрансляторами, но не может быть прочитана
           почтовыми агентами, которые не поддерживают S/MIME. Без этой опции
           используется подписание открытого текста с типом MIME multipart/signed.
</p>
</dd>
<dt>-certfile file <a name="cms-_002dcertfile-file"></a></dt>
<dd><p>Позволяет указать дополнительные сертификаты. При подписании они будут
           включены в сообщение. При проверке их будут искать сертификаты подписавшихся.
           Сертификаты должны быть в формате PEM.
</p>
</dd>
<dt>-certsout file <a name="cms-_002dcertsout-file"></a></dt>
<dd><p>Все сертификаты, содержащиеся в сообщении, записываются в файл.
</p>
</dd>
<dt>-signer file <a name="cms-_002dsigner-file"></a></dt>
<dd><p>Сертификат подписи при подписании или отставке сообщения, этот параметр можно
           использовать несколько раз, если требуется более одного подписывающего лица.
           Если сообщение проверяется, сертификаты подписывающих будут записаны в этот файл,
           если проверка прошла успешно.
</p>
</dd>
<dt>-recip file <a name="cms-_002drecip-file"></a></dt>
<dd><p>При расшифровке сообщения указывается сертификат получателя. Сертификат должен
           соответствовать одному из получателей сообщения, иначе возникает ошибка.
</p>
<p>При шифровании сообщения эта опция может использоваться несколько раз для
           указания каждого получателя. Эта форма должна использоваться, если требуются
           настраиваемые параметры (например, для указания RSA-OAEP).
</p>
<p>Эта опция поддерживает только сертификаты, содержащие ключи RSA, Diffie-Hellman или EC.
</p>
</dd>
<dt>-keyid <a name="cms-_002dkeyid"></a></dt>
<dd><p>Используйте идентификатор ключа субъекта для идентификации сертификатов
           вместо имени эмитента и серийного номера. Поставляемый сертификат
           должен включать расширение идентификатора ключа субъекта.
           Поддерживается опциями -sign и -encrypt.
</p>
</dd>
<dt>[-receipt_request_all] [-receipt_request_first] <a name="cms-_005b_002dreceipt_005frequest_005fall_005d-_005b_002dreceipt_005frequest_005ffirst_005d"></a></dt>
<dd><p>Для опции -sign включите подписанный запрос на получение. Укажите, что
           запросы должны предоставляться всеми получателями или получателями
           первого уровня (теми, которые отправлены по почте напрямую, а не из
           списка рассылки). Проигнорировать это, включить-receipt_request_from.
</p>
</dd>
<dt>-receipt_request_from emailaddress <a name="cms-_002dreceipt_005frequest_005ffrom-emailaddress"></a></dt>
<dd><p>Для опции -sign включите подписанный запрос на получение. Добавьте явный
           адрес электронной почты, где должны быть предоставлены квитанции.
</p>
</dd>
<dt>-receipt_request_to emailaddress <a name="cms-_002dreceipt_005frequest_005fto-emailaddress"></a></dt>
<dd><p>Добавьте явный адрес электронной почты, на который должны быть
           отправлены подписанные квитанции. Эта опция должна, но предоставляется, если
           подписанный чек запрашивается.
</p>
</dd>
<dt>-receipt_request_print <a name="cms-_002dreceipt_005frequest_005fprint"></a></dt>
<dd><p>Для операции -verify распечатайте содержимое любых подписанных запросов
           на получение.
</p>
</dd>
<dt>-secretkey key <a name="cms-_002dsecretkey-key"></a></dt>
<dd><p>Укажите симметричный ключ для использования. Ключ должен быть предоставлен
           в шестнадцатеричном формате и соответствовать используемому алгоритму.
           Поддерживается параметрами -EncryptedData_encrypt -EncryptedData_decrypt,
           -encrypt и -decrypt. При использовании с -encrypt или -decrypt предоставленный
           ключ используется для упаковки или разворачивания ключа шифрования содержимого
           с использованием ключа AES типа KEKRecipientInfo.
</p>
</dd>
<dt>-secretkeyid id <a name="cms-_002dsecretkeyid-id"></a></dt>
<dd><p>Идентификатор ключа для предоставленного симметричного ключа для типа
           KEKRecipientInfo. Эта опция должна присутствовать, если опция -secretkey
           используется с -encrypt. В операциях -decrypt идентификатор используется
           для определения местоположения соответствующего ключа, если он не указан,
           тогда делается попытка расшифровать любые структуры KEKRecipientInfo.
</p>
</dd>
<dt>-econtent_type type <a name="cms-_002decontent_005ftype-type"></a></dt>
<dd><p>Установите тип инкапсулированного содержимого, если он не указан, используется
           тип данных. Аргументом типа может быть любое допустимое имя OID в текстовом или
           числовом формате.
</p>
</dd>
<dt>-inkey file <a name="cms-_002dinkey-file"></a></dt>
<dd><p>Закрытый ключ для использования при подписании или расшифровке. Это должно
           соответствовать соответствующему сертификату. Если эта опция не указана, то
           закрытый ключ должен быть включен в файл сертификата, указанный в файле -recip
           или -signer. При подписании эту опцию можно использовать несколько раз для
           указания последовательных ключей.
</p>
</dd>
<dt>-keyopt name:opt <a name="cms-_002dkeyopt-name_003aopt"></a></dt>
<dd><p>Для подписи и шифрования эту опцию можно использовать несколько раз,
           чтобы установить индивидуальные параметры для предыдущего ключа или
           сертификата. В настоящее время его можно использовать для установки
           RSA-PSS для подписи, RSA-OAEP для шифрования или для изменения
           параметров по умолчанию для ECDH.
</p>
</dd>
<dt>-passin arg <a name="cms-_002dpassin-arg"></a></dt>
<dd><p>Источник пароля закрытого ключа. Для получения дополнительной
           информации о формате arg см. Раздел PASS PHRASE ARGUMENTS в openssl.
</p>
</dd>
<dt>-rand file... <a name="cms-_002drand-file_002e_002e_002e"></a></dt>
<dd><p>Файл или файлы, содержащие случайные данные, используемые для заполнения
           генератора случайных чисел. Можно указать несколько файлов, разделенных
           символом, зависящим от ОС.  Разделитель &rsquo;;&rsquo; для MS-Windows, &rsquo;,&rsquo; для
           OpenVMS, и &rsquo;:&rsquo; для остальных.
</p>
</dd>
<dt>[-writerand file] <a name="cms-_005b_002dwriterand-file_005d"></a></dt>
<dd><p>Записывает случайные данные в указанный файл при выходе. Это может быть
           использовано с последующим -rand флагом.
</p>
</dd>
<dt>cert.pem... <a name="cms-cert_002epem_002e_002e_002e"></a></dt>
<dd><p>Один или несколько сертификатов получателей сообщения:
           используется при шифровании сообщения.
</p>
</dd>
<dt>-to, -from, -subject <a name="cms-_002dto_002c-_002dfrom_002c-_002dsubject"></a></dt>
<dd><p>Соответствующие заголовки почты. Они включены за пределы подписанной
           части сообщения, поэтому они могут быть включены вручную. При
           подписании многие почтовые клиенты S/MIME проверяют, совпадают
           ли адреса электронной почты сертификата подписчиков с адресом From :.
</p>
<p>[-attime] [-check_ss_sig] [-crl_check] [-crl_check_all] [-explicit_policy] [-extended_crl] [-ignore_critical] [-inhibit_any] [-inhibit_map] [-no_alt_chains] [-no_check_time] [-partial_chain] [-policy] [-policy_check] [-policy_print] [-purpose] [-suiteB_128] [-suiteB_128_only] [-suiteB_192] [-trusted_first] [-use_deltas] [-auth_level] [-verify_depth] [-verify_email] [-verify_hostname] [-verify_ip] [-verify_name] [-x509_strict] <a name="cms-_005b_002dattime_005d-_005b_002dcheck_005fss_005fsig_005d-_005b_002dcrl_005fcheck_005d-_005b_002dcrl_005fcheck_005fall_005d-_005b_002dexplicit_005fpolicy_005d-_005b_002dextended_005fcrl_005d-_005b_002dignore_005fcritical_005d-_005b_002dinhibit_005fany_005d-_005b_002dinhibit_005fmap_005d-_005b_002dno_005falt_005fchains_005d-_005b_002dno_005fcheck_005ftime_005d-_005b_002dpartial_005fchain_005d-_005b_002dpolicy_005d-_005b_002dpolicy_005fcheck_005d-_005b_002dpolicy_005fprint_005d-_005b_002dpurpose_005d-_005b_002dsuiteB_005f128_005d-_005b_002dsuiteB_005f128_005fonly_005d-_005b_002dsuiteB_005f192_005d-_005b_002dtrusted_005ffirst_005d-_005b_002duse_005fdeltas_005d-_005b_002dauth_005flevel_005d-_005b_002dverify_005fdepth_005d-_005b_002dverify_005femail_005d-_005b_002dverify_005fhostname_005d-_005b_002dverify_005fip_005d-_005b_002dverify_005fname_005d-_005b_002dx509_005fstrict_005d"></a>           Установите различные параметры проверки цепочки сертификатов. Смотрите
           страницу руководства verify(1) для подробностей.
</p></dd>
</dl>
</dd>
<dt>NOTES</dt>
<dd><p>Сообщение MIME должно быть отправлено без каких-либо пустых строк
       между заголовками и выходными данными. Некоторые почтовые программы
       автоматически добавляют пустую строку. Отправка почты напрямую в
       sendmail - один из способов достижения правильного формата.
</p>
<p>Поставляемое сообщение, которое должно быть подписано или зашифровано,
       должно включать необходимые заголовки MIME, иначе многие клиенты S/MIME
       не будут отображать его должным образом (если вообще будут). Вы можете
       использовать опцию -text для автоматического добавления заголовков
       простого текста.
</p>
<p>Сообщение &quot;signed and encrypted&quot; - это сообщение, в котором подписанное
       сообщение затем шифруется. Это может быть сделано путем шифрования уже
       подписанного сообщения: см. Раздел примеров.
</p>
<p>Эта версия программы позволяет только одного подписавшего на сообщение,
       но она будет проверять нескольких подписчиков на полученных сообщениях.
       Некоторые клиенты S/MIME задыхаются, если сообщение содержит несколько
       подписчиков. Можно подписывать сообщения &quot;in parallel&quot;, подписав
       уже подписанное сообщение.
</p>
<p>Параметры -encrypt и -decrypt отражают обычное использование в клиентах
       S/MIME. Строго говоря, они обрабатывают данные в оболочке CMS:
       зашифрованные данные CMS используются для других целей.
</p>
<p>Опция -resign использует существующий дайджест сообщения при добавлении
       нового подписавшего. Это означает, что атрибуты должны присутствовать по
       крайней мере в одном существующем подписывающем лице, использующем тот
       же дайджест сообщения, иначе эта операция завершится неудачно.
</p>
<p>Параметры -stream и -indef включают потоковую поддержку I/O. В
       результате кодирование происходит в BER с использованием созданного
       кодирования неопределенной длины, а не в DER. Потоковая передача
       поддерживается для операции -encrypt и операции -sign, если
       содержимое не отсоединено.
</p>
<p>Потоковая передача всегда используется для операции -sign с
       отсоединенными данными, но, поскольку контент больше не является
       частью структуры CMS, кодировка остается DER.
</p>
<p>Если опция -decrypt используется без сертификата получателя, то
       делается попытка определить местонахождение получателя, попробовав
       каждого потенциального получателя по очереди, используя
       предоставленный закрытый ключ. Чтобы предотвратить атаку MMA (атака
       Блейхенбахера на заполнение PKCS #1 v1.5 RSA), все получатели
       проверяются, и если ни один из получателей не соответствует
       сообщению, это &quot;decrypted&quot; с использованием случайного ключа,
       который обычно выводит мусор. Опцию -debug_decrypt можно использовать
       для отключения защиты от атаки MMA и возврата ошибки, если не
       удается найти получателя: эту опцию следует использовать с
       осторожностью. Для более полного
       описания см. CMS_decrypt).
</p>
</dd>
<dt>EXIT CODES</dt>
<dd><div class="display">
<pre class="display">       0   Операция прошла полностью успешно.

       1   Произошла ошибка при разборе параметров команды.

       2   Один из входных файлов не может быть прочитан.

       3   Произошла ошибка при создании файла CMS или при чтении сообщения MIME.

       4   Произошла ошибка при расшифровке или проверке сообщения.

       5   Сообщение было проверено правильно, но при записи сертификатов
       подписавших произошла ошибка.
</pre></div>
</dd>
<dt>COMPATIBILITY WITH PKCS#7 format.</dt>
<dd><p>Утилита smime может обрабатывать только старый формат PKCS#7. Утилита cms
       поддерживает формат синтаксиса криптографических сообщений. Использование
       некоторых функций приведет к сообщениям, которые не могут быть обработаны
       приложениями, которые поддерживают только старый формат. Это подробно
       описано ниже.
</p>
<p>Использование опции -keyid с -sign или -encrypt.
</p>
<p>Опция -outform PEM использует разные заголовки.
</p>
<p>Опция -compress.
</p>
<p>Опция -secretkey при использовании с -encrypt.
</p>
<p>Использование PSS с -sign.
</p>
<p>Использование ключей OAEP или non-RSA с помощью -encrypt.
</p>
<p>Кроме того, тип -EncryptedData_create и -data_create не может
       быть обработан более старой командой smime.
</p>
</dd>
<dt>EXAMPLES</dt>
<dd><div class="display">
<pre class="display">       Создать текстовое подписанное сообщение:

        openssl cms -sign -in message.txt -text -out mail.msg \
               -signer mycert.pem

       Создать непрозрачное подписанное сообщение

        openssl cms -sign -in message.txt -text -out mail.msg -nodetach \
               -signer mycert.pem

       Создайте подписанное сообщение, добавьте несколько дополнительных
       сертификатов и прочитайте закрытый ключ из другого файла:

        openssl cms -sign -in in.txt -text -out mail.msg \
               -signer mycert.pem -inkey mykey.pem -certfile mycerts.pem

       Создайте подписанное сообщение с двумя подписавшими, используйте
       идентификатор ключа:

        openssl cms -sign -in message.txt -text -out mail.msg \
               -signer mycert.pem -signer othercert.pem -keyid

       Отправьте подписанное сообщение под Unix напрямую в sendmail,
       включая заголовки:

        openssl cms -sign -in in.txt -text -signer mycert.pem \
               -from steve@openssl.org -to someone@somewhere \
               -subject &quot;Signed message&quot; | sendmail someone@somewhere

       Проверьте сообщение и извлеките сертификат подписавшего в
       случае успеха:

        openssl cms -verify -in mail.msg -signer user.pem -out signedtext.txt

       Отправить зашифрованную почту, используя тройной DES:

        openssl cms -encrypt -in in.txt -from steve@openssl.org \
               -to someone@somewhere -subject &quot;Encrypted message&quot; \
               -des3 user.pem -out mail.msg

       Подпишите и зашифруйте почту:

        openssl cms -sign -in ml.txt -signer my.pem -text \
               | openssl cms -encrypt -out mail.msg \
               -from steve@openssl.org -to someone@somewhere \
               -subject &quot;Signed and Encrypted message&quot; -des3 user.pem

       Примечание. Команда шифрования не включает параметр -text, поскольку
       зашифрованное сообщение уже имеет заголовки MIME.

       Расшифровать почту:

        openssl cms -decrypt -in mail.msg -recip mycert.pem -inkey key.pem

       Вывод из подписи формы Netscape представляет собой структуру PKCS#7
       с отдельным форматом подписи. Вы можете использовать эту программу
       для проверки подписи строкой, оборачивая закодированную структуру
       base64 и окружая ее:

        &mdash;&ndash;BEGIN PKCS7&mdash;&ndash;
        &mdash;&ndash;END PKCS7&mdash;&ndash;

       и с помощью команды,

        openssl cms -verify -inform PEM -in signature.pem -content content.txt

       в качестве альтернативы вы можете base64 декодировать подпись и использовать

        openssl cms -verify -inform DER -in signature.der -content content.txt

       Создайте зашифрованное сообщение, используя 128-битный Camellia:

        openssl cms -encrypt -in plain.txt -camellia128 -out mail.msg cert.pem

       Добавить подписанта в существующее сообщение:

        openssl cms -resign -in mail.msg -signer newsign.pem -out mail2.msg

       Подпишите почту используя RSA-PSS:

        openssl cms -sign -in message.txt -text -out mail.msg \
               -signer mycert.pem -keyopt rsa_padding_mode:pss

       Создать зашифрованную почту, используя RSA-OAEP:

        openssl cms -encrypt -in plain.txt -out mail.msg \
               -recip cert.pem -keyopt rsa_padding_mode:oaep

       Используйте SHA256 KDF с сертификатом ECDH:

        openssl cms -encrypt -in plain.txt -out mail.msg \
               -recip ecdhcert.pem -keyopt ecdh_kdf_md:sha256
</pre></div>
</dd>
<dt>BUGS</dt>
<dd><p>Синтаксический анализатор MIME не очень умен: он, кажется,
       обрабатывает большинство сообщений, которые я на него
       бросил, но может задушить другие.
</p>
<p>В настоящее время код будет записывать только сертификат
       подписавшего в файл: если подписчик имеет отдельный
       сертификат шифрования, его необходимо извлечь вручную.
       Должна быть какая-то эвристика, которая определяет
       правильный сертификат шифрования.
</p>
<p>В идеале должна поддерживаться база данных сертификатов для
       каждого адреса электронной почты.
</p>
<p>В настоящее время в коде не учитываются разрешенные алгоритмы
       симметричного шифрования, указанные в подписанном атрибуте
       SMIMECapabilities. это означает, что пользователь должен
       вручную включить правильный алгоритм шифрования. Он должен
       хранить список разрешенных шифров в базе данных и
       использовать только их.
</p>
<p>Проверка сертификата подписи не производится.
</p>
</dd>
<dt>HISTORY</dt>
<dd><div class="display">
<pre class="display">       Использование нескольких параметров -signer и команды -resign
       были впервые добавлены в OpenSSL 1.0.0.

       Опция keyopt была впервые добавлена ​​в OpenSSL 1.0.2.

       Поддержка RSA-OAEP и RSA-PSS была впервые добавлена ​​в OpenSSL 1.0.2.

       Использование ключей non-RSA с -encrypt и -decrypt было впервые
       добавлено в OpenSSL 1.0.2.

       Параметры -no_alt_chains были впервые добавлены в OpenSSL 1.0.2b.
</pre></div>
</dd>
<dt>COPYRIGHT</dt>
<dd><p>Copyright 2008-2018 The OpenSSL Project Authors. All Rights Reserved.
</p>
<p>Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use this file except in
       compliance with the License.  You can obtain a copy in the file LICENSE in the source
       distribution or at &lt;https://www.openssl.org/source/license.html&gt;.
</p></dd>
</dl>
<p>1.1.1a                                      2018-11-20                                      CMS(1)
</p><hr>
<a name="CRL"></a>
<div class="header">
<p>
Next: <a href="#CRL2PKCS7" accesskey="n" rel="next">CRL2PKCS7</a>, Previous: <a href="#CMS" accesskey="p" rel="prev">CMS</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>
<a name="CRL-1"></a>
<h2 class="chapter">11 CRL</h2>
<dl compact="compact">
<dt>NAME</dt>
<dd><p>openssl-crl, crl - CRL утилита
</p>
</dd>
<dt>SYNOPSIS</dt>
<dd><p>openssl crl [<a href="#crl-_002dhelp">-help</a>] [<a href="#crl-_002dinform-DER_007cPEM">-inform DER|PEM</a>] [<a href="#crl-_002doutform-DER_007cPEM">-outform DER|PEM</a>] [<a href="#crl-_002dtext">-text</a>] [<a href="#crl-_002din-filename">-in filename</a>] [<a href="#crl-_002dout-filename">-out filename</a>] [<a href="#crl-_002dnameopt-option">-nameopt option</a>] [<a href="#crl-_002dnoout">-noout</a>] [<a href="#crl-_002dhash">-hash</a>] [<a href="#crl-_002dhash_005fold">-hash_old</a>] [<a href="#crl-_002dissuer">-issuer</a>] [<a href="#crl-_002dlastupdate">-lastupdate</a>] [<a href="#crl-_002dnextupdate">-nextupdate</a>] [<a href="#crl-_002dCAfile-file">-CAfile file</a>] [<a href="#crl-_002dCApath-dir">-CApath dir</a>]
</p>
</dd>
<dt>DESCRIPTION</dt>
<dd><p>Команда crl обрабатывает файлы CRL в формате DER или PEM.
</p>
</dd>
<dt>OPTIONS</dt>
<dd><dl compact="compact">
<dt>-help <a name="crl-_002dhelp"></a></dt>
<dd><p>Распечатайте сообщение об использовании.
</p>
</dd>
<dt>-inform DER|PEM <a name="crl-_002dinform-DER_007cPEM"></a></dt>
<dd><p>Это определяет формат ввода. Формат DER является структурой DER в кодировке CRL. PEM
           (по умолчанию) - это кодированная в base64 версия формы DER с верхним и нижним
           колонтитулами.
</p>
</dd>
<dt>-outform DER|PEM <a name="crl-_002doutform-DER_007cPEM"></a></dt>
<dd><p>Это определяет формат вывода, параметры имеют то же значение и значение по умолчанию,
           что и опция -inform.
</p>
</dd>
<dt>-in filename <a name="crl-_002din-filename"></a></dt>
<dd><p>Здесь указывается имя файла для чтения или стандартный ввод, если эта опция
           не указана.
</p>
</dd>
<dt>-out filename <a name="crl-_002dout-filename"></a></dt>
<dd><p>Задает имя выходного файла для записи или стандартный вывод по умолчанию.
</p>
</dd>
<dt>-text <a name="crl-_002dtext"></a></dt>
<dd><p>Распечатайте CRL в текстовом виде.
</p>
</dd>
<dt>-nameopt option <a name="crl-_002dnameopt-option"></a></dt>
<dd><p>Опция, которая определяет, как отображаются имена субъекта или эмитента. Смотрите
           описание -nameopt в x509.
</p>
</dd>
<dt>-noout <a name="crl-_002dnoout"></a></dt>
<dd><p>Не выводите закодированную версию CRL.
</p>
</dd>
<dt>-hash <a name="crl-_002dhash"></a></dt>
<dd><p>Выведите хеш имени эмитента. Это можно использовать для поиска CRL в каталоге
           по имени эмитента.
</p>
</dd>
<dt>-hash_old <a name="crl-_002dhash_005fold"></a></dt>
<dd><p>Выводит &quot;hash&quot; имени эмитента CRL, используя более старый алгоритм, который
           использовался OpenSSL до версии 1.0.0.
</p>
</dd>
<dt>-issuer <a name="crl-_002dissuer"></a></dt>
<dd><p>Выведите имя эмитента.
</p>
</dd>
<dt>-lastupdate <a name="crl-_002dlastupdate"></a></dt>
<dd><p>Выведите поле lastUpdate.
</p>
</dd>
<dt>-nextupdate <a name="crl-_002dnextupdate"></a></dt>
<dd><p>Выведите поле nextUpdate.
</p>
</dd>
<dt>-CAfile file <a name="crl-_002dCAfile-file"></a></dt>
<dd><p>Проверьте подпись на CRL, просмотрев сертификат выдачи в файле.
</p>
</dd>
<dt>-CApath dir <a name="crl-_002dCApath-dir"></a></dt>
<dd><p>Проверьте подпись на CRL, просмотрев сертификат выдачи в dir. Этот каталог
           должен быть стандартным каталогом сертификатов: то есть хэш каждого имени
           субъекта (с использованием x509 -hash) должен быть связан с каждым
           сертификатом.
</p></dd>
</dl>
</dd>
<dt>NOTES</dt>
<dd><p>Формат PEM CRL использует строки верхнего и нижнего колонтитула:
</p>
<p>&mdash;&ndash;BEGIN X509 CRL&mdash;&ndash;
        &mdash;&ndash;END X509 CRL&mdash;&ndash;
</p>
</dd>
<dt>EXAMPLES</dt>
<dd><p>Преобразуйте файл CRL из PEM в DER:
</p>
<p>openssl crl -in crl.pem -outform DER -out crl.der
</p>
<p>Выведите текстовую форму сертификата в кодировке DER:
</p>
<p>openssl crl -in crl.der -inform DER -text -noout
</p>
</dd>
<dt>BUGS</dt>
<dd><p>В идеале должно быть возможно создать CRL, используя
       соответствующие параметры и файлы.
</p>
</dd>
<dt>SEE ALSO</dt>
<dd><p>crl2pkcs7(1), ca(1), x509(1)
</p>
</dd>
<dt>COPYRIGHT</dt>
<dd><p>Copyright 2000-2018 The OpenSSL Project Authors. All Rights Reserved.
</p>
<p>Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use this file except in
       compliance with the License.  You can obtain a copy in the file LICENSE in the source
       distribution or at &lt;https://www.openssl.org/source/license.html&gt;.
</p></dd>
</dl>
<p>1.1.1a                                        2018-11-20                                        CRL(1)
</p><hr>
<a name="CRL2PKCS7"></a>
<div class="header">
<p>
Next: <a href="#STOREUTL" accesskey="n" rel="next">STOREUTL</a>, Previous: <a href="#CRL" accesskey="p" rel="prev">CRL</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>
<a name="CRL2PKCS7-1"></a>
<h2 class="chapter">12 CRL2PKCS7</h2>
<dl compact="compact">
<dt>NAME</dt>
<dd><p>openssl-crl2pkcs7, crl2pkcs7 - Создайте структуру PKCS#7 из CRL и сертификатов
</p>
</dd>
<dt>SYNOPSIS</dt>
<dd><p>openssl crl2pkcs7 [<a href="#manCrl2pkcs7-_002dhelp">-help</a>] [<a href="#manCrl2pkcs7-_002dinform-DER_007cPEM">-inform DER|PEM</a>] [<a href="#manCrl2pkcs7-_002doutform-DER_007cPEM">-outform DER|PEM</a>] [<a href="#manCrl2pkcs7-_002din-filename">-in filename</a>] [<a href="#manCrl2pkcs7-_002dout-filename">-out filename</a>] [<a href="#manCrl2pkcs7-_002dcertfile-filename">-certfile filename</a>] [<a href="#manCrl2pkcs7-_002dnocrl">-nocrl</a>]
</p>
</dd>
<dt>DESCRIPTION</dt>
<dd><p>Команда crl2pkcs7 принимает необязательные сертификаты CRL и один или несколько
       сертификатов и преобразует их в вырожденную структуру PKCS#7 &quot;certificates only&quot;.
</p>
</dd>
<dt>OPTIONS</dt>
<dd><dl compact="compact">
<dt>-help <a name="manCrl2pkcs7-_002dhelp"></a></dt>
<dd><p>Распечатайте сообщение об использовании.
</p>
</dd>
<dt>-inform DER|PEM <a name="manCrl2pkcs7-_002dinform-DER_007cPEM"></a></dt>
<dd><p>Это определяет формат ввода CRL. Формат DER - в кодировке DER Структура CRL .
           PEM (по умолчанию) - это кодированная в base64 версия формы DER со строками
           верхнего и нижнего колонтитула. Формат по умолчанию - PEM.
</p>
</dd>
<dt>-outform DER|PEM <a name="manCrl2pkcs7-_002doutform-DER_007cPEM"></a></dt>
<dd><p>Это определяет формат вывода структуры PKCS#7. Формат DER в кодировке DER PKCS#7
           structure.PEM (по умолчанию) - это кодированная в формате base64 версия формы
           DER с линиями верхнего и нижнего колонтитула. Формат по умолчанию - PEM.
</p>
</dd>
<dt>-in filename <a name="manCrl2pkcs7-_002din-filename"></a></dt>
<dd><p>Здесь указывается имя входного файла для чтения CRL или стандартного ввода,
           если эта опция не указана.
</p>
</dd>
<dt>-out filename <a name="manCrl2pkcs7-_002dout-filename"></a></dt>
<dd><p>Указывает имя выходного файла для записи структуры PKCS#7 или стандартного
           вывода по умолчанию.
</p>
</dd>
<dt>-certfile filename <a name="manCrl2pkcs7-_002dcertfile-filename"></a></dt>
<dd><p>Указывает имя файла, содержащее один или несколько сертификатов в формате PEM.
           Все сертификаты в файле будут добавлены в структуру PKCS#7. Эта опция может
           использоваться более одного раза для чтения сертификатов из нескольких файлов.
</p>
</dd>
<dt>-nocrl <a name="manCrl2pkcs7-_002dnocrl"></a></dt>
<dd><p>Обычно CRL включается в выходной файл. С этой опцией CRL не включается в выходной
           файл, а CRL не читается из входного файла.
</p></dd>
</dl>

</dd>
<dt>EXAMPLES</dt>
<dd><div class="display">
<pre class="display">       Создайте структуру PKCS#7 из сертификата и CRL:

        openssl crl2pkcs7 -in crl.pem -certfile cert.pem -out p7.pem

       Создает структуру PKCS#7 в формате DER без CRL из нескольких разных сертификатов:

        openssl crl2pkcs7 -nocrl -certfile newcert.pem
               -certfile demoCA/cacert.pem -outform DER -out p7.der
</pre></div>
</dd>
<dt>NOTES</dt>
<dd>
<p>Выходной файл представляет собой подписанную PKCS#7 структуру данных, не содержащую
       подписчиков, а только сертификаты и необязательный CRL.
</p>
<p>Эта утилита может использоваться для отправки сертификатов и CAs в Netscape как часть
       процесса регистрации сертификатов. Это включает в себя отправку кодированного вывода
       DER как MIME типа application/x-x509-user-cert.
</p>
<p>Форма в кодировке PEM с удаленными линиями верхнего и нижнего колонтитула может
       использоваться для установки пользовательских сертификатов и CA в MSIE с
       использованием элемента управления Xenroll.
</p>
</dd>
<dt>SEE ALSO</dt>
<dd><p>pkcs7(1)
</p>
</dd>
<dt>COPYRIGHT</dt>
<dd><p>Copyright 2000-2017 The OpenSSL Project Authors. All Rights Reserved.
</p>
<p>Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use this file except in
       compliance with the License.  You can obtain a copy in the file LICENSE in the source
       distribution or at &lt;https://www.openssl.org/source/license.html&gt;.
</p></dd>
</dl>
<p>1.1.1a                                        2018-11-20                                  CRL2PKCS7(1)
</p><hr>
<a name="STOREUTL"></a>
<div class="header">
<p>
Next: <a href="#SSL_005fCONNECT" accesskey="n" rel="next">SSL_CONNECT</a>, Previous: <a href="#CRL2PKCS7" accesskey="p" rel="prev">CRL2PKCS7</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>
<a name="STOREUTL-1"></a>
<h2 class="chapter">13 STOREUTL</h2>
<dl compact="compact">
<dt>NAME</dt>
<dd><p>openssl-storeutl, storeutl - STORE утилита
</p>
</dd>
<dt>SYNOPSIS</dt>
<dd><p>openssl storeutl [<a href="#manSTOREUTL-_002dhelp">-help</a>] [<a href="#manSTOREUTL-_002dout-filename">-out filename</a>] [<a href="#manSTOREUTL-_002dnoout">-noout</a>] [<a href="#manSTOREUTL-_002dpassin-arg">-passin arg</a>] [<a href="#manSTOREUTL-_002dtext">-text</a>] [<a href="#manSTOREUTL-_002dengine-id">-engine id</a>] [<a href="#manSTOREUTL-_002dr">-r</a>] [<a href="#manSTOREUTL-_005b_002dcerts_005d-_005b_002dkeys_005d-_005b_002dcrls_005d">[-certs] [-keys] [-crls]</a>] [<a href="#manSTOREUTL-_002dsubject-arg">-subject arg</a>] [<a href="#manSTOREUTL-_005b_002dissuer-arg_005d-_005b_002dserial-arg_005d">[-issuer arg] [-serial arg]</a>] [<a href="#manSTOREUTL-_002dalias-arg">-alias arg</a>] [<a href="#manSTOREUTL-_002dfingerprint-arg">-fingerprint arg</a>] [<a href="#manSTOREUTL-_002ddigest">-digest</a>] uri ...
</p>
</dd>
<dt>DESCRIPTION</dt>
<dd><p>Команда storeutl может использоваться для отображения содержимого
       (после дешифрования, в зависимости от случая), извлеченного из
       заданного URI.
</p>
</dd>
<dt>OPTIONS</dt>
<dd><dl compact="compact">
<dt>-help <a name="manSTOREUTL-_002dhelp"></a></dt>
<dd><p>Распечатайте сообщение об использовании.
</p>
</dd>
<dt>-out filename <a name="manSTOREUTL-_002dout-filename"></a></dt>
<dd><p>задает имя выходного файла для записи или стандартный вывод
           по умолчанию.
</p>
</dd>
<dt>-noout <a name="manSTOREUTL-_002dnoout"></a></dt>
<dd><p>эта опция предотвращает вывод данных PEM.
</p>
</dd>
<dt>-passin arg <a name="manSTOREUTL-_002dpassin-arg"></a></dt>
<dd><p>ключевой источник пароля. Для получения дополнительной информации
           о формате arg см. Раздел PASS PHRASE ARGUMENTS в openssl(1).
</p>
</dd>
<dt>-text <a name="manSTOREUTL-_002dtext"></a></dt>
<dd><p>Распечатывает объекты в текстовой форме, аналогично выводу -text
           из openssl x509, openssl pkey, и т.п.
</p>
</dd>
<dt>-engine id <a name="manSTOREUTL-_002dengine-id"></a></dt>
<dd><p>указание механизма (по его уникальной строке идентификатора) приведет
           к тому, что storeutl попытается получить функциональную ссылку на
           указанный механизм, тем самым инициализируя его при необходимости.
           Движок будет установлен по умолчанию для всех доступных алгоритмов.
</p>
</dd>
<dt>-r <a name="manSTOREUTL-_002dr"></a></dt>
<dd><p>Получить объекты рекурсивно, когда это возможно.
</p>
</dd>
<dt>[-certs] [-keys] [-crls] <a name="manSTOREUTL-_005b_002dcerts_005d-_005b_002dkeys_005d-_005b_002dcrls_005d"></a></dt>
<dd><p>Выбирайте только сертификаты, ключи или CRLs из данного URI. Однако,
           если этот URI вернет набор имен (URIs), они всегда будут возвращены.
</p>
</dd>
<dt>-subject arg <a name="manSTOREUTL-_002dsubject-arg"></a></dt>
<dd><p>Поиск объекта с именем субъекта arg. Аргумент должен быть отформатирован
           как /type0=value0/type1=value1/type2=.... Символы ключевых слов могут
           быть экранированы \ (обратный флеш), и пробел сохраняется. Пустые
           значения разрешены, но игнорируются при поиске. То есть поиск с пустым
           значением будет иметь тот же эффект, что и отсутствие указания типа вообще.
</p>
</dd>
<dt>[-issuer arg] [-serial arg] <a name="manSTOREUTL-_005b_002dissuer-arg_005d-_005b_002dserial-arg_005d"></a></dt>
<dd><p>Поиск объекта с указанным именем эмитента и серийным номером. Эти два
           варианта должны использоваться вместе. Аргумент издателя должен быть
           отформатирован как /type0=value0/type1=value1/type2=..., символы могут
           быть экранированы \ (обратная косая черта), пробелы не пропускаются.
           Серийный аргумент может быть указан как десятичное или шестнадцатеричное
           значение, если ему предшествует 0x.
</p>
</dd>
<dt>-alias arg <a name="manSTOREUTL-_002dalias-arg"></a></dt>
<dd><p>Поиск объекта с указанным псевдонимом.
</p>
</dd>
<dt>-fingerprint arg <a name="manSTOREUTL-_002dfingerprint-arg"></a></dt>
<dd><p>Поиск объекта, имеющего данный отпечаток.
</p>
</dd>
<dt>-digest <a name="manSTOREUTL-_002ddigest"></a></dt>
<dd><p>Дайджест, который использовался для вычисления 
           -fingerprint.
</p></dd>
</dl>
</dd>
<dt>SEE ALSO</dt>
<dd><p>openssl(1)
</p>
</dd>
<dt>HISTORY</dt>
<dd><p>openssl storeutl was added to OpenSSL 1.1.1.
</p>
</dd>
<dt>COPYRIGHT</dt>
<dd><p>Copyright 2016-2018 The OpenSSL Project Authors. All Rights Reserved.
</p>
<p>Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
       this file except in compliance with the License.  You can obtain a copy
       in the file LICENSE in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.
</p></dd>
</dl>
<p>1.1.1a                            2018-11-20                       STOREUTL(1)
</p><hr>
<a name="SSL_005fCONNECT"></a>
<div class="header">
<p>
Next: <a href="#g_t_0418_043d_0441_0442_0440_0443_043a_0446_0438_044f" accesskey="n" rel="next">Инструкция</a>, Previous: <a href="#STOREUTL" accesskey="p" rel="prev">STOREUTL</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>
<a name="SSL_005fCONNECT-1"></a>
<h2 class="chapter">14 SSL_CONNECT</h2>
<dl compact="compact">
<dt>NAME</dt>
<dd><p>SSL_connect - инициировать рукопожатие TLS/SSL с сервером TLS/SSL
</p>
</dd>
<dt>SYNOPSIS</dt>
<dd><p>#include &lt;openssl/ssl.h&gt;
</p>
<p>int SSL_connect(SSL *ssl);
</p>
</dd>
<dt>DESCRIPTION</dt>
<dd><p>SSL_connect() инициирует рукопожатие TLS/SSL с сервером. Канал связи уже
       должен быть установлен и назначен для ssl путем установки базового BIO.
</p>
</dd>
<dt>NOTES</dt>
<dd><p>Поведение SSL_connect() зависит от лежащего в основе BIO.
</p>
<p>Если лежащий в основе BIO является блокирующим, SSL_connect()
       вернется только после того, как рукопожатие закончено или
       произошла ошибка.
</p>
<p>Если базовый BIO является неблокирующим, SSL_connect() также
       вернется, когда базовый BIO не сможет удовлетворить потребности
       SSL_connect() в продолжении рукопожатия, что указывает на
       проблему с помощью возвращаемого значения -1. В этом случае
       вызов SSL_get_error() с возвращаемым значением SSL_connect()
       приведет к SSL_ERROR_WANT_READ или SSL_ERROR_WANT_WRITE. Затем
       вызывающий процесс должен повторить вызов после принятия
       соответствующих действий для удовлетворения потребностей
       SSL_connect(). Действие зависит от лежащего в основе BIO. При
       использовании гнезда non-blocking ничего не нужно делать, но
       можно использовать select() для проверки требуемого условия.
       При использовании буферизации BIO, например пары BIO, данные
       должны быть записаны или извлечены из BIO, прежде чем можно
       будет продолжить.
</p>
<p>Многие системы реализуют алгоритм Nagle по умолчанию, что
       означает, что он будет буферизовать исходящие данные TCP,
       если пакет TCP уже был отправлен, для которого еще не было
       получено никакого соответствующего ACK от партнера. Это
       может повлиять на производительность после успешного
       рукопожатия TLSv1.3 или успешного возобновления рукопожатия
       TLSv1.2 (или ниже), потому что последним партнером, который
       будет общаться в рукопожатии, является клиент. Если клиент
       также первым отправляет данные приложения (что типично для
       многих протоколов), то эти данные могут быть помещены в
       буфер, пока не будет получено ACK для окончательного
       сообщения о рукопожатии.
</p>
<p>Опция сокета TCP_NODELAY часто доступна для отключения
       алгоритма Nagle. Если приложение решает отключить
       алгоритм Nagle, следует рассмотреть возможность его
       повторного включения позже, если это необходимо.
       Вспомогательная функция BIO_set_tcp_ndelay() может
       использоваться для включения или выключения опции
       TCP_NODELAY.
</p>
</dd>
<dt>RETURN VALUES</dt>
<dd><p>Могут возникнуть следующие возвращаемые значения:
</p><div class="display">
<pre class="display">       0   Рукопожатие TLS/SSL не было успешным, но было
           отключено и контролировалось спецификациями протокола
           TLS/SSL. Вызовите SSL_get_error() с возвращаемым
           значением ret, чтобы выяснить причину.

       1   Рукопожатие TLS/SSL было успешно завершено, соединение
           TLS/SSL установлено.

       &lt;0  Рукопожатие TLS/SSL не было успешным, поскольку
           произошла фатальная ошибка на уровне протокола
           или произошла ошибка соединения. Выключение не
           было чистым. Также может возникнуть действие,
           необходимо продолжить операцию для неблокирующего
           BIOs. Вызовите SSL_get_error() с возвращаемым
           значением ret, чтобы выяснить причину.
</pre></div>
</dd>
<dt>SEE ALSO</dt>
<dd><p>SSL_get_error(3), SSL_accept(3), SSL_shutdown(3), ssl(7), bio(7),
       SSL_set_connect_state(3), SSL_do_handshake(3), SSL_CTX_new(3)
</p>
</dd>
<dt>COPYRIGHT</dt>
<dd><p>Copyright 2000-2018 The OpenSSL Project Authors. All Rights Reserved.
</p>
<p>Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
       this file except in compliance with the License.  You can obtain a copy
       in the file LICENSE in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.
</p></dd>
</dl>
<p>1.1.1a                            2018-11-20                    SSL_CONNECT(3)
</p><hr>
<a name="g_t_0418_043d_0441_0442_0440_0443_043a_0446_0438_044f"></a>
<div class="header">
<p>
Previous: <a href="#SSL_005fCONNECT" accesskey="p" rel="prev">SSL_CONNECT</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>
<a name="Instrukciya"></a>
<h2 class="chapter">15 Инструкция</h2>
<p>Эта инструкция демонстрирует, как работает собственный центр сертификации (CA – Certificate Authority), используя набор инструментов командной строки OpenSSL. Это полезно в ряде случаев, таких как выдача сертификата сервера для защиты вебсайта в интранете, или для выдачи сертификатов для клиентов, чтобы позволить им проверить подлинность сервера.
</p><dl compact="compact">
<dt>Вступление</dt>
<dd>
<p>OpenSSL — это криптографическая библиотека со свободным и открытым исходным кодом, которая предоставляет несколько инструментов командной строки для работы с цифровыми сертификатами. Некоторые из этих инструментов могут быть использованы в качестве центра сертификации.
</p>
<p>Центр сертификации (CA) является объектом, который подписывает цифровые сертификаты. Многие веб-сайты нуждаются в том, чтобы их клиенты знали, что соединение является безопасным, поэтому они платят международным доверенным центрам сертификации (например, VeriSign, DigiCert) за подпись сертификата для своего домена.
</p>
<p>В некоторых случаях имеет больше смысла выступать в качестве вашего собственного центра сертифкации, чем платить центрам сертификации, таким как DigiCert. Например, обеспечение безопасности вебсайта в интранете или для выдачи собственных сертификатов клиентам, чтобы позволить им проверять подлинность сервера (Apache, OpenVPN).
Создание корневой пары ключей
</p>
<p>Выступая в качестве центра сертификации (CA) означает иметь дело с криптографическими парами приватных (частных) ключей и публичными сертификатами. Самой первой криптографической парой создадим корневую пару. Она состоит из корневого ключа (ca.key.pem) и корневого сертификата (ca.cert.pem). Эта пара образует идентичность нашего центра сертификации.
</p>
<p>Как правило, корневой центр сертификации не подписывает напрямую серверные или клиентские сертификаты. Корневой центр сертификации используется только для создания одного или нескольких промежуточных центров сертификации, которые являются доверенными корневому центру сертификации чтоб подписывать сертификаты от их имени. Это является лучшей практикой. Таким образом, корневой ключ может хранится «оффлайн» и по-максимому не использоваться, так как любая компрометация губительна для ключа. В качестве примера лучшей практики является создание корневой пары в максимально защищенной среде. В идеале это будет полностью зашифрованный, физически изолированный компьютер, который постоянно отключен от интернета. Следует вынуть беспроводную сетевую карту, а порт обычной сетевой карты залить клеем.
</p></dd>
<dt>Подготовка каталогов</dt>
<dd>
<p>Выберите каталог для хранения всех ключей и сертификатов. К примеру, /root/ca (все производится на Ubuntu 14.04.3 LTS)
</p>
<p>mkdir /root/ca
</p>
<p>Создадим структуру каталогов. Файлы index.txt и serial будут выступать в качестве плоской базы для отслеживания подписанных сертификатов.
</p><div class="display">
<pre class="display"># cd /root/ca
# mkdir certs crl newcerts private
# chmod 700 private
# touch index.txt
# echo 1000 &gt; serial
</pre></div>
</dd>
<dt>Подготовка конфигурационных файлов</dt>
<dd>
<p>Необходимо создать конфигурационный файл для OpenSSL. Создадим файл /root/ca/openssl.cnf, скопируем в него следующее содержимое root-config.txt.
</p><div class="display">
<pre class="display">Раздел [ca] является обязательным. Здесь мы говорим OpenSSL использовать параметры из раздела [CA_default]:

[ ca ]
#man ca
default_ca = CA_default

Раздел [CA_default] содержит ряд значений по умолчанию:

[ CA_default ]
# Каталог и расположение файлов.
dir               = /root/ca
certs             = $dir/certs
crl_dir           = $dir/crl
new_certs_dir     = $dir/newcerts
database          = $dir/index.txt
serial            = $dir/serial
RANDFILE          = $dir/private/.rand

# Корневой ключ и сертификат.  
 private_key       = $dir/private/ca.key.pem  
 certificate       = $dir/certs/ca.cert.pem

# Для списков отзыва сертификатов.  
 crlnumber         = $dir/crlnumber  
 crl               = $dir/crl/ca.crl.pem  
 crl_extensions    = crl_ext  
 default_crl_days  = 30

# SHA-1 устарела, поэтому используйте SHA-2.  
 default_md        = sha256

name_opt          = ca_default  
 cert_opt          = ca_default  
 default_days      = 375  
 preserve          = no  
 policy            = policy_strict
</pre></div>
<p>Policy_strict будет применяться для всех подписей корневого центра сертификации, и корневой центр сертификации будет использоваться только для создания промежуточных центров сертификации.
</p><div class="display">
<pre class="display">[ policy_strict ]
# Корень CA должен подписывать только те промежуточные сертификаты, которые совпадают.
# Смотрите раздел POLICY FORMAT в man ca.
countryName             = match
stateOrProvinceName     = match
organizationName        = match
organizationalUnitName  = optional
commonName              = supplied
emailAddress            = optional
</pre></div>
<p>Применим policy_loose для всех подписей промежуточных центров серфтификации, так как промежуточные центры сертификации это подписывающие серверы, и клиентские сертификаты могут приходить от различных третьих лиц.
</p><div class="display">
<pre class="display">[ policy_loose ]
# Разрешить промежуточному CA подписывать более разнообразные сертификаты.
# Смотрите раздел POLICY FORMAT в &lsquo;ca&lsquo; man page.
countryName             = optional
stateOrProvinceName     = optional
localityName            = optional
organizationName        = optional
organizationalUnitName  = optional
commonName              = supplied
emailAddress            = optional
</pre></div>
<p>Параметры из секции [ req ] применяются когда создаются сертификаты или запросы на подписывание сертификатов.
</p><div class="display">
<pre class="display">[ req ]
# Опции инструмента &lsquo;req&lsquo; (&lsquo;man req&lsquo;).
default_bits        = 2048
distinguished_name  = req_distinguished_name
string_mask         = utf8only

# SHA-1 устарела, поэтому используйте SHA-2.  
default_md          = sha256

# Расширение, добавляемое при использовании опции -x509.  
x509_extensions     = v3_ca
</pre></div>
<p>Секция [ req_distinguished_name ] определяет информацию, которая обычно требуется при запросе на подписывание сертификата. Можно указать некоторые значения по умолчанию.
</p><div class="display">
<pre class="display">[ req_distinguished_name ]
# Смотри https://en.wikipedia.org/wiki/Certificate_signing_request.
countryName                     = Country Name (2 letter code)
stateOrProvinceName             = State or Province Name
localityName                    = Locality Name
organizationName                = Organization Name
organizationalUnitName          = Organizational Unit Name
commonName                      = Common Name
emailAddress                    = Email Address

# При желании укажите некоторые значения по умолчанию.  
countryName_default             = GB  
stateOrProvinceName_default     = England  
localityName_default            = England  
organizationName_default       = Alice Ltd  
#organizationalUnitName_default  =  
#emailAddress_default            =
</pre></div>
<p>Следующие несколько секций являются расширениями, которые могут применять при подписывании сертификатов. Например, при указании аргумента командной строки -extensions v3_ca будут применены расширения из секции [ v3_ca ]. Эти расширения будут применяться при создании корневого сертификата.
</p><div class="display">
<pre class="display">[ v3_ca ]
# Расширения для типичного CA (&lsquo;man x509v3_config&lsquo;).
subjectKeyIdentifier = hash
authorityKeyIdentifier = keyid:always,issuer
basicConstraints = critical, CA:true
keyUsage = critical, digitalSignature, cRLSign, keyCertSign
</pre></div>
<p>При создании сертификата промежуточного центра сертификации будут применяться расширения из v3_ca_intermediate. Параметр pathlen:0 указывает, что не может быть никаких дальнейших центров сертификации ниже промежуточного центра сертификации.
</p><div class="display">
<pre class="display">[ v3_intermediate_ca ]
# Расширения для типичного промежуточного CA (&lsquo;man x509v3_config&lsquo;).
subjectKeyIdentifier = hash
authorityKeyIdentifier = keyid:always,issuer
basicConstraints = critical, CA:true, pathlen:0
keyUsage = critical, digitalSignature, cRLSign, keyCertSign
</pre></div>
<p>Расширение usr_cert будет применяться при подписывании клиентских сертификатов, таких, которые используются для аутентификации удаленных пользователей.
</p><div class="display">
<pre class="display">[ usr_cert ]
# Расширения для клиентских сертификатов (&lsquo;man x509v3_config&lsquo;).
basicConstraints = CA:FALSE
nsCertType = client, email
nsComment = &quot;OpenSSL Generated Client Certificate&quot;
subjectKeyIdentifier = hash
authorityKeyIdentifier = keyid,issuer
keyUsage = critical, nonRepudiation, digitalSignature, keyEncipherment
extendedKeyUsage = clientAuth, emailProtection
</pre></div>
<p>Расширение server_cert будет применяться при подписывании серверных сертификатов, таких, которые используются для веб-серверов.
</p><div class="display">
<pre class="display">[ server_cert ]
# Расширения для серверных сертификатов (&lsquo;man x509v3_config&lsquo;).
basicConstraints = CA:FALSE
nsCertType = server
nsComment = &quot;OpenSSL Generated Server Certificate&quot;
subjectKeyIdentifier = hash
authorityKeyIdentifier = keyid,issuer:always
keyUsage = critical, digitalSignature, keyEncipherment
extendedKeyUsage = serverAuth
</pre></div>
<p>Расширение crl_ext будет автоматически применяться при создании списков отзыва сертификатов (CRL — certificate revocation lists).
</p><div class="display">
<pre class="display">[ crl_ext ]
# Расширение для CRLs (&lsquo;man x509v3_config&lsquo;).
authorityKeyIdentifier=keyid:always
</pre></div>
<p>Расширение ocsp будет применяться при подписывании сертификата OCSP (Online Certificate Status Protocol, онлайн протокол статуса сертификатов).
</p><div class="display">
<pre class="display">[ ocsp ]
# Расширение для подписи сертификатов OCSP (&lsquo;man ocsp&lsquo;).
basicConstraints = CA:FALSE
subjectKeyIdentifier = hash
authorityKeyIdentifier = keyid,issuer
keyUsage = critical, digitalSignature
extendedKeyUsage = critical, OCSPSigning
</pre></div>
</dd>
<dt>Создание корневого ключа</dt>
<dd>
<p>Создадим корневой ключ (ca.key.pem), который следует хранить защищенно. Любой,  владеющий корневым ключом, может выдавать доверенные сертификаты. Зашифруем ключ стойким алгоритмом AES-256 и надежным паролем. Следует использовать 4096 битное шифрование для ключей корневого и промежуточных центров сертификации. Серверные и клиентские сертификаты возможно подписывать шифрованием с меньшей битностью.
</p><div class="display">
<pre class="display"># cd /root/ca
# openssl genrsa -aes256 -out private/ca.key.pem 4096
Enter pass phrase for ca.key.pem: secretpassword
Verifying - Enter pass phrase for ca.key.pem: secretpassword
# chmod 400 private/ca.key.pem
</pre></div>
</dd>
<dt>Создание корневого сертификата</dt>
<dd>
<p>Для создания корневого сертификата (ca.cert.pem) используется корневой ключ (ca.key.pem). Следует указать длинный срок годности сертификата, например, 20 лет. После того, как истечет корневой сертификат, все сертификаты, подписанные центром сертификации становятся недействительными. Всякий раз при использовании утилиты req следует указывать файл конфигурации для использования с опцией –config, в противном случае OpenSSL будет использовать по умолчанию конфигурационный файл /etc/pki/tls/openssl.cnf!
</p><div class="display">
<pre class="display"># cd /root/ca
# openssl req -config openssl.cnf \
-key private/ca.key.pem \
-new -x509 -days 7300 -sha256 -extensions v3_ca \
-out certs/ca.cert.pem
Enter pass phrase for ca.key.pem: secretpassword
You are about to be asked to enter information that will be incorporated
into your certificate request.
&mdash;&ndash;
Country Name (2 letter code) [XX]:GB
State or Province Name []:England
Locality Name []:
Organization Name []:Alice Ltd
Organizational Unit Name []:Alice Ltd Certificate Authority
Common Name []:Alice Ltd Root CA
Email Address []:
# chmod 444 certs/ca.cert.pem
</pre></div>
</dd>
<dt>Проверка корневого сертификата</dt>
<dd><div class="display">
<pre class="display"># openssl x509 -noout -text -in certs/ca.cert.pem

Вывод показывает:

    Используемый алгоритм Signature Algorithm
    Даты периода действия сертификата Validity
    Длину публичного ключа Public-Key
    Эмитент сертификата Issuer, который является объектом, который подписал сертификат
    Предмет Subject, который относится к самому сертификату.
</pre></div>
<p>Эмитент (Issuer) и предмет (Subject) идентичны для самоподписанных сертификатов. Все корневые сертификаты являются самоподписанными.
</p><div class="display">
<pre class="display">Signature Algorithm: sha256WithRSAEncryption
Issuer: C=GB, ST=England,
O=Alice Ltd, OU=Alice Ltd Certificate Authority,
CN=Alice Ltd Root CA
Validity
Not Before: Apr 11 12:22:58 2015 GMT
Not After : Apr  6 12:22:58 2035 GMT
Subject: C=GB, ST=England,
O=Alice Ltd, OU=Alice Ltd Certificate Authority,
CN=Alice Ltd Root CA
Subject Public Key Info:
Public Key Algorithm: rsaEncryption
Public-Key: (4096 bit)
</pre></div>
<p>Вывод также показывает расширения X509v3, т.к. было применено расширение v3_ca, и опции из секции [ v3_ca ] отражены в выводе.
</p><div class="display">
<pre class="display">X509v3 extensions:
X509v3 Subject Key Identifier:
38:58:29:2F:6B:57:79:4F:39:FD:32:35:60:74:92:60:6E:E8:2A:31
X509v3 Authority Key Identifier:
keyid:38:58:29:2F:6B:57:79:4F:39:FD:32:35:60:74:92:60:6E:E8:2A:31
X509v3 Basic Constraints: critical
CA:TRUE
X509v3 Key Usage: critical
Digital Signature, Certificate Sign, CRL Sign
</pre></div>
</dd>
<dt>Создание промежуточной пары ключей</dt>
<dd>
<p>Промежуточным центром сертификации является объект, который может подписывать сертификаты от имени корневого центра сертификации. Корневой центр сертификации подписывает промежуточный сертификат, образуя цепочку доверия.
</p>
<p>Цель использования промежуточного центра сертификации, прежде всего, для обеспечения безопасности. Корневой ключ должен храниться «оффлайн» и использоваться как можно реже. Если промежуточный ключ будет скомпрометирован, корневой центр сертификации может отозвать промежуточный сертификат  и создать новую промежуточную криптографическую пару.
</p><dl compact="compact">
<dt>Подготовка каталогов</dt>
<dd>
<p>Файлы корневого центра сертификации хранятся в /root/ca. Выберем каталог (/root/ca/intermediate) для хранения файлов промежуточного центра сертификации.
</p><div class="display">
<pre class="display"># mkdir /root/ca/intermediate
</pre></div>
<p>Создадим точно такую же структуру каталогов, которая используется для корневого центра сертификации. Также удобно создать каталог csr для хранения запросов на подпись сертификатов.
</p><div class="display">
<pre class="display"># cd /root/ca/intermediate
# mkdir certs crl csr newcerts private
# chmod 700 private
# touch index.txt
# echo 1000 &gt; serial
</pre></div>
<p>Добавим файл crlnumber к дереву каталогов промежуточного центра сертификации. Crlnumber будет использоваться для отслеживания списков отзывов сертификатов.
</p><div class="display">
<pre class="display"># echo 1000 &gt; /root/ca/intermediate/crlnumber
</pre></div>
<p>Создадим конфигурационный файл /root/ca/intermediate/openssl.cnf, скопируем в него следующее содержимое intermediate-config.txt. В нем изменены пять опций, по сравнению с конфигурационным файлов корневого центра сертификации:
</p><div class="display">
<pre class="display">[ CA_default ]
dir             = /root/ca/intermediate
private_key     = $dir/private/intermediate.key.pem
certificate     = $dir/certs/intermediate.cert.pem
crl             = $dir/crl/intermediate.crl.pem
policy          = policy_loose
</pre></div>
</dd>
</dl>
</dd>
<dt>Создание промежуточного ключа</dt>
<dd>
<p>Создадим промежуточный ключ (intermediate.key.pem). Зашифруем ключ стойким алгоритмом AES-256 и надежным паролем.
</p><div class="display">
<pre class="display"># cd /root/ca
# openssl genrsa -aes256 \
-out intermediate/private/intermediate.key.pem 4096
Enter pass phrase for intermediate.key.pem: secretpassword
Verifying - Enter pass phrase for intermediate.key.pem: secretpassword
# chmod 400 intermediate/private/intermediate.key.pem
</pre></div>
</dd>
<dt>Создание промежуточного сертификата</dt>
<dd>
<p>Используя промежуточный ключ создадим запрос на подписывание сертификата (CSR — certificate signing request). Сведения должны, как правило, соответствовать корневому центру сертификации. Общие имена (Common Name), однако, должны быть разными. И убедитесь, что используете конфигурационный файл промежуточного центра сертификаци (intermediate/openssl.cnf).
</p><div class="display">
<pre class="display"># cd /root/ca
# openssl req -config intermediate/openssl.cnf -new -sha256 \
-key intermediate/private/intermediate.key.pem \
-out intermediate/csr/intermediate.csr.pem
Enter pass phrase for intermediate.key.pem: secretpassword
You are about to be asked to enter information that will be incorporated
into your certificate request.
&mdash;&ndash;
Country Name (2 letter code) [XX]:GB
State or Province Name []:England
Locality Name []:
Organization Name []:Alice Ltd
Organizational Unit Name []:Alice Ltd Certificate Authority
Common Name []:Alice Ltd Intermediate CA
Email Address []:
</pre></div>
<p>Чтобы создать промежуточный сертификат используем корневой центр сертификации с расширением v3_intermediate_ca для подписывания промежуточного запроса. Промежуточный сертификат должен быть действителен на меньший период, чем корневой. К примеру, на 10 лет. В этот раз следует использовать конфигурационный файл корневого центра сертификации (/root/ca/openssl.cnf).
</p><div class="display">
<pre class="display"># cd /root/ca
# openssl ca -config openssl.cnf -extensions v3_intermediate_ca \
-days 3650 -notext -md sha256 \
-in intermediate/csr/intermediate.csr.pem \
-out intermediate/certs/intermediate.cert.pem
Enter pass phrase for ca.key.pem: secretpassword
Sign the certificate? [y/n]: y
# chmod 444 intermediate/certs/intermediate.cert.pem
</pre></div>
<p>Для хранения базы данных сертификатов, выданных утилитой ca OpenSSL, используется файл index.txt. Не следует удалять или править вручную этот файл. Сейчас он должен содержать одну строку, которая относится к промежуточному сертификату.
</p><div class="display">
<pre class="display">V 250408122707Z 1000 unknown ... /CN=Alice Ltd Intermediate CA
Проверка промежуточного сертификата
</pre></div>
<p>Как мы делали с корневым сертификатом, убедимся, что детали промежуточного сертификата корректны.
</p><div class="display">
<pre class="display"># openssl x509 -noout -text \
-in intermediate/certs/intermediate.cert.pem
</pre></div>
<p>Сверим промежуточный сертификат с корневым сертификатом. ОК показывает, что цепочка доверия не повреждена.
</p><div class="display">
<pre class="display"># openssl verify -CAfile certs/ca.cert.pem \
intermediate/certs/intermediate.cert.pem
intermediate.cert.pem: OK
</pre></div>
</dd>
<dt>Создание файла цепочки сертификатов</dt>
<dd>
<p>Когда приложение (например, веб-браузер) пытается проверить сертификат, подписанный промежуточным центром сертификации, оно также должно проверить промежуточный сертификат от корневого центра сертификации. Для выполнения проверки цепочки доверия создадим цепочку сертификатов центра сертификации для предоставления приложениям.
</p>
<p>Чтобы создать цепочку сертификатов требуется объеденить промежуточные и корневые сертификаты вмете. Позже мы будем использовать этот файл для проверки сертификатов подписанных промежуточным центром сертификации.
</p><div class="display">
<pre class="display"># cat intermediate/certs/intermediate.cert.pem \
certs/ca.cert.pem &gt; intermediate/certs/ca-chain.cert.pem
# chmod 444 intermediate/certs/ca-chain.cert.pem
</pre></div>
<p>Наш файл цепочки сертификатов должен содержать корневой сертификат, потому что клиентские приложения ничего не знают о нем. Лучшим вариантом, особенно, если вы администратор сети, является установка корневого сертификата на каждом клиенте, которому требуется подключаться к приложению.
Подписывание серверного и клиентского сертификатов
</p>
<p>Подпишем сертификаты используя наш промежуточный центр сертификации. Эти подписанные сертификаты можно использовать в различных ситуациях, таких как защищать соединения к веб серверу или аутентифицировать клиентов, присоединяющихся к сервису.
</p>
<p>Указанные ниже шаги с вашей точки сзрения, где вы выступаете в качестве центра сертификации. Стороннее лицо, однако, вместо этого может создать свой собственный частный ключ и запрос на подпись сертификата (CSR) без раскрытия вам своего частного ключа. Они дают вам собственный CSR, а вы отдаете им подписанный сертификат. В этом случае, пропустите команды genrsa и req.
Создание ключа
</p>
<p>Наши корневая и промежуточная пары 4096 бит. Серверный и клиентский сертификат обычно истекают после одного года, поэтому мы можем безопасно использовать 2048 бит.
</p>
<p>Хотя 4096 бит немного больше безопаснее, чем 2048 бит, он замедляет TLS хэндшейки и значительно увеличивает нагрузку на процессор во время хэндшейков. По этой причине, большинство веб-сайтов используют 2048-битные пары ключей.
</p>
<p>Если вы создаете криптографическую пару для использования веб-сервером (к примеру, Apache), вам потребуется вводить пароль каждый раз, когда вы перезапускаете веб-сервер. Вы можете указать опцию –aes256 для создания ключа без пароля.
</p><div class="display">
<pre class="display"># cd /root/ca
# openssl genrsa -aes256 \
-out intermediate/private/www.example.com.key.pem 2048
# chmod 400 intermediate/private/www.example.com.key.pem
</pre></div>
</dd>
<dt>Создание сертификата</dt>
<dd>
<p>Используем частный ключ для создания запроса на подписывание сертификата (CSR). Детали в CSR не обязательно должны совпадать с промежуточным центром сертификации. Для серверных сертификатов, Общее Имя (Common Name) должно быть полным доменным именем (fully qualified domain name — FQDN) (к примеру, www.example.com), в то время как для клиентского сертификата оно должно быть любым уникальным идентификатором (к примеру, e-mail адресом). Common Name не может быть таким же, как любой корневой или промежуточный сертификат.
</p><div class="display">
<pre class="display"># cd /root/ca
# openssl req -config intermediate/openssl.cnf \
-key intermediate/private/www.example.com.key.pem \
-new -sha256 -out intermediate/csr/www.example.com.csr.pem
Enter pass phrase for www.example.com.key.pem: secretpassword
You are about to be asked to enter information that will be incorporated
into your certificate request.
&mdash;&ndash;
Country Name (2 letter code) [XX]:US
State or Province Name []:California
Locality Name []:Mountain View
Organization Name []:Alice Ltd
Organizational Unit Name []:Alice Ltd Web Services
Common Name []:www.example.com
Email Address []:
</pre></div>
<p>Для создания сертификата воспользуемся промежуточным центром сертификации для подписи CSR. Если сертификат будет использоваться на сервере, используйте расширение server_cert. Если сертификат будет использоваться для аутентификации клиентов, то используйте расширение usr_cert. Сертификаты обычно даются сроком на один год, на центре сертификации обычно дают несколько дней для удобства.
</p><div class="display">
<pre class="display"># cd /root/ca
# openssl ca -config intermediate/openssl.cnf \
-extensions server_cert -days 375 -notext -md sha256 \
-in intermediate/csr/www.example.com.csr.pem \
-out intermediate/certs/www.example.com.cert.pem
# chmod 444 intermediate/certs/www.example.com.cert.pem
</pre></div>
<p>Файл intermediate/index.txt должен содержать строку, которая относится к этому сертификату
</p><div class="display">
<pre class="display">V 160420124233Z 1000 unknown ... /CN=www.example.com
</pre></div>
</dd>
<dt>Проверка сертификата</dt>
<dd><div class="display">
<pre class="display"># openssl x509 -noout -text \
-in intermediate/certs/www.example.com.cert.pem
</pre></div>
<p>Issuer сертификата наш промежуточный центр сертификации. Subject относится к самому сертификату.
</p><div class="display">
<pre class="display">Signature Algorithm: sha256WithRSAEncryption
Issuer: C=GB, ST=England,
O=Alice Ltd, OU=Alice Ltd Certificate Authority,
CN=Alice Ltd Intermediate CA
Validity
Not Before: Apr 11 12:42:33 2015 GMT
Not After : Apr 20 12:42:33 2016 GMT
Subject: C=US, ST=California, L=Mountain View,
O=Alice Ltd, OU=Alice Ltd Web Services,
CN=www.example.com
Subject Public Key Info:
Public Key Algorithm: rsaEncryption
Public-Key: (2048 bit)
</pre></div>
<p>Вывод также покажет расширения X509V3. При создании сертификата можно использовать расширения server_cert или usr_cert. Варианты о соответствующем разделе конфигурации будут отражаться в выводе.
</p><div class="display">
<pre class="display">X509v3 extensions:
X509v3 Basic Constraints:
CA:FALSE
Netscape Cert Type:
SSL Server
Netscape Comment:
OpenSSL Generated Server Certificate
X509v3 Subject Key Identifier:
B1:B8:88:48:64:B7:45:52:21:CC:35:37:9E:24:50:EE:AD:58:02:B5
X509v3 Authority Key Identifier:
keyid:69:E8:EC:54:7F:25:23:60:E5:B6:E7:72:61:F1:D4:B9:21:D4:45:E9
DirName:/C=GB/ST=England/O=Alice Ltd/OU=Alice Ltd Certificate Authority/CN=Alice Ltd Root CA
serial:10:00
X509v3 Key Usage: critical
Digital Signature, Key Encipherment
X509v3 Extended Key Usage:
TLS Web Server Authentication
</pre></div>
<p>Используя файл цепочки сертификатов центра сертификации, который мы создали ранее (ca-chain.cert.pem) для проверки того, что новый сертификат имеет действительную цепочку доверия.
</p><div class="display">
<pre class="display"># openssl verify -CAfile intermediate/certs/ca-chain.cert.pem \
intermediate/certs/www.example.com.cert.pem
www.example.com.cert.pem: OK
</pre></div>
</dd>
<dt>Установка сертификата</dt>
<dd>
<p>Теперь можно установить новый сертификат на сервере, или распространить сертификат на клиентов. При установке на серверное приложение (к примеру, Apache), понадобятся следующие файлы:
</p><div class="display">
<pre class="display">    ca-chain.cert.pem
    example.com.key.pem
    example.com.cert.pem
</pre></div>
<p>Если вы подписывали CSR от стороннего лица, у вас нет доступа до их частного ключа, и вы должны им дать только файл цепочки ca-chain.cert.pem и сертификат www.example.com.cert.pem.
</p></dd>
<dt>Списки отзывов сертификатов</dt>
<dd>
<p>Списки отзывов сертификатов (CRL) предоставляют список сертификатов, которые были отозваны. Клиентское приложение, к примеру, веб-браузер, может использовать CRL для проверки подлинности сервера. Серверные приложения, такие как Apache или OpenVPN, могут использовать CRL для запрета доступа клиентам, которые больше не являются доверенными.
</p>
<p>Публикация CRL в публично доступном месте (к примеру, http://example.com/intermediate.crl.pem) позволит треьтим сторонам получать CRL из этого места, чтобы проверить, нет ли в нем сертификатов, которые могут быть отозваны. Некоторые разработчики приложений вместо устаревшего CRL используют Онлайн Протокол Статуса Сертификата (Online Certificate Status Protocol — OCSP).
Подготовка файла конфигурации
</p>
<p>Когда центр сертификации подписывает сертификат, он обычно зашифровывает расположение CRL в сертификат. Добавляется crlDistributionPoints в подходящие секции. В нашем случае, добавляет к секции server_cert.
</p><div class="display">
<pre class="display">[ server_cert ]
# ... snipped ...
crlDistributionPoints = URI:http://example.com/intermediate.crl.pem
</pre></div>
</dd>
<dt>Создание CRL</dt>
<dd><div class="display">
<pre class="display"># cd /root/ca
# openssl ca -config intermediate/openssl.cnf \
-gencrl -out intermediate/crl/intermediate.crl.pem
</pre></div>
<p>Секция CRL OPTIONS в man ca содержит больше информации о том, как создавать CRL.
</p>
<p>Можно проверить содержимое CRL с помощтю утилиты crl.
</p><div class="display">
<pre class="display"># openssl crl -in intermediate/crl/intermediate.crl.pem -noout –text
</pre></div>
<p>Пока еще не было отозванных сертификатов, поэтому в выводе указано:
</p><div class="display">
<pre class="display">No Revoked Certificates.
</pre></div>
<p>Необходимо пересоздавать CRL на регулярной основе. По умолчанию, CRL истекает через 30 дней. Это настраивается опцией default_crl_days в секции CA_default.
</p></dd>
<dt>Отзыв сертификата</dt>
<dd>
<p>Давайте разберем пример. Алиса запустила веб-сервер Apache и имеет личную папку с сердцу трогательными милыми картинками котят. Алиса хочет предоставить своему другу, Бобу, доступ к этой коллекции.
</p>
<p>Боб создает запрос частного ключа и запрос на подпись сертификата (CSR).
</p><div class="display">
<pre class="display">$ cd /home/bob
$ openssl genrsa -out bob@example.com.key.pem 2048
$ openssl req -new -key bob@example.com.key.pem \
-out bob@example.com.csr.pem
Вам будет предложено ввести информацию, которая будет
включена в ваш запрос на сертификат.
&mdash;&ndash;
Country Name [XX]:US
State or Province Name []:California
Locality Name []:San Francisco
Organization Name []:Bob Ltd
Organizational Unit Name []:
Common Name []:bob@example.com
Email Address []:
</pre></div>
<p>Боб посылает свой CSR Алисе которая затем подписывает его.
</p><div class="display">
<pre class="display"># cd /root/ca
# openssl ca -config intermediate/openssl.cnf \
-extensions usr_cert -notext -md sha256 \
-in intermediate/csr/bob@example.com.csr.pem \
-out intermediate/certs/bob@example.com.cert.pem
Подписать сертификат? [y/n]: y
1 из 1 запросов на сертификат сертифицирован,
зафиксировать? [y/n]: y
</pre></div>
<p>Алиса проверяет, что сертификат действителен:
</p><div class="display">
<pre class="display"># openssl verify -CAfile intermediate/certs/ca-chain.cert.pem \
intermediate/certs/bob@example.com.cert.pem
bob@example.com.cert.pem: OK
</pre></div>
<p>Файл index.txt должен содержать новую запись.
</p><div class="display">
<pre class="display">V 160420124740Z 1001 unknown ... /CN=bob@example.com
</pre></div>
<p>Алиса посылает Бобу подписанный сертификат. Боб устанавливает сертификат в своем веб-браузере и теперь у него есть доступ к фотографиям котят Алисы. Ура!
</p>
<p>К сожалению, выясняется, что Боб себя плохо вел. Боб отправил фотографии котят Алисы в Hacker News, заявляя, что они его и теперь набирает огромную популярность. Алиса это узнает и нуждается в немедленном отзыве его доступа.
</p><div class="display">
<pre class="display"># cd /root/ca
# openssl ca -config intermediate/openssl.cnf \
-revoke intermediate/certs/bob@example.com.cert.pem
Введите пароль для intermediate.key.pem: secretpassword
Отзыв сертификата 1001.
База данных обновлена
</pre></div>
<p>Строка в index.txt, которая относится к сертификату Боба теперь начинается с буквы R. Это означает, что он был отозван (Revoked).
</p><div class="display">
<pre class="display">R 160420124740Z 150411125310Z 1001 unknown ... /CN=bob@example.com
</pre></div>
<p>После отзыва сертификата Боба, Алисе необходимо пересоздать CRL.
</p></dd>
<dt>Ипользование CRL на сервере</dt>
<dd>
<p>Обычно серверное приложение (к примеру, Apache) делает проверку для клиентских сертификатов.Это приложение должно иметь локальный доступ до CRL.
</p>
<p>В случае Алисы, она может добавить директиву SSLCARevocationPath в ее конфигурацию Apache и скопировать CRL на свой сервер. В следующий раз, когда Боб подключится к веб-серверу, Apache проверит его клиентский сертификат в CRL и запретит доступ. По аналогии, OpenVPN имеет директиву crl-verify, и можно блокировать клиентов, чьи сертификаты были отозваны.
</p></dd>
<dt>Использование CRL клиентами</dt>
<dd>
<p>Для серверных сертификатов, обычно клиентское приложение (к примеру, веб-браузер) выполняет проверку. Это приложение должно иметь удаленный доступ к CRL.
</p>
<p>Если сертификат был подписан с расширением, которое включает crlDistributionPoints, клиентское приложение может прочитать эту информацию и получить CRL из указанного места.
</p>
<p>Точки распространения CRL видны в спецификациях X509v3 сертификата.
</p><div class="display">
<pre class="display"># openssl x509 -in cute-kitten-pictures.example.com.cert.pem -noout -text
X509v3 CRL Distribution Points:
Full Name:
URI:http://example.com/intermediate.crl.pem

Online Certificate Status Protocol
</pre></div>
<p>Online Certificate Status Protocol (OCSP) был создан в качестве альтернативы CRL. Как и CRL, OCSP позволяет запрашивающей стороне (к примеру, веб-браузеру) определять статус отзыва сертификата.
</p>
<p>Когда центр сертификации подписывает сертификат, он обычно включает адрес сервера OCSP (к примеру, http://ocsp.example.com) в в сертификат. Это похоже на функцию crlDistributionPoints, используемой для CRL.
</p>
<p>Например, когда веб-браузеру предоставлен сертификат сервера, он посылает запрос на адрес сервера OCSP, указанном в сертификате. По этому адресу OCSP слушает запросы и отвечает статусом отзыва сертификата.
</p>
<p>Рекомендуется использовать OCSP вместо CRL, где это возможно, хотя реально,  как правило, OCSP нужен только для сертификатов веб-сайтов. Некоторыми веб-браузерами поддержка CRL считается устаревшей, или вообще убрана.
Подготовка конфигурационного файлы
</p>
<p>Для использования OCSP центр сертификации должен закодировать расположение сервера OCSP в сертификат, который он подписывает. Используем опцию authorityInfoAccess в соответствующей секции, в нашем случае в секции server_cert.
</p><div class="display">
<pre class="display">[ server_cert ]
# ... snipped ...
authorityInfoAccess = OCSP;URI:http://ocsp.example.com
</pre></div>
</dd>
<dt>Создание пары OCSP</dt>
<dd>
<p>Ответчик OCSP нуждается в криптографической паре для подписывания ответа, который посылается запрашивающей стороне. Криптографическая пара OCSP должна быть подписана на том же центре сертификации, на котором проверяется подписанный сертификат.
</p>
</dd>
<dt>Создадим частный ключ и зашифруем его алгоритмом AES-256.</dt>
<dd><div class="display">
<pre class="display"># cd /root/ca
# openssl genrsa -aes256 \
-out intermediate/private/ocsp.example.com.key.pem 4096
</pre></div>
<p>Создадим запрос на создание сертификата (CSR). Детали должны, как правило, совпадать с подписывающим центром сертификации. Common Name, однако, должен быть полным доменным именем.
</p><div class="display">
<pre class="display"># cd /root/ca
# openssl req -config intermediate/openssl.cnf -new -sha256 \
-key intermediate/private/ocsp.example.com.key.pem \
-out intermediate/csr/ocsp.example.com.csr.pem
Enter pass phrase for intermediate.key.pem: secretpassword
You are about to be asked to enter information that will be incorporated
into your certificate request.
&mdash;&ndash;
Country Name (2 letter code) [XX]:GB
State or Province Name []:England
Locality Name []:
Organization Name []:Alice Ltd
Organizational Unit Name []:Alice Ltd Certificate Authority
Common Name []:ocsp.example.com
Email Address []:
</pre></div>
</dd>
<dt>Подпишем CSR промежуточным центром сертификации.</dt>
<dd><div class="display">
<pre class="display"># openssl ca -config intermediate/openssl.cnf \
-extensions ocsp -days 375 -notext -md sha256 \
-in intermediate/csr/ocsp.example.com.csr.pem \
-out intermediate/certs/ocsp.example.com.cert.pem
</pre></div>
</dd>
<dt>Проверим, что сертификат содержит коррестные расширения X509v3.</dt>
<dd><div class="display">
<pre class="display"># openssl x509 -noout -text \
-in intermediate/certs/ocsp.example.com.cert.pem
X509v3 Key Usage: critical
Digital Signature
X509v3 Extended Key Usage: critical
OCSP Signing
</pre></div>
</dd>
<dt>Отзыв сертификата</dt>
<dd>
<p>Утилита OpenSSL ocsp может выступать в качестве ответчика OCSP, но она предназначена только для тестирования. Для производственной среды OCSP ответчики тоже существуют, но они выходят за рамки данной статьи.
</p><dl compact="compact">
<dt>Создадим серверный сертификат для тестирования.</dt>
<dd><div class="display">
<pre class="display"># cd /root/ca
# openssl genrsa -out intermediate/private/test.example.com.key.pem 2048
# openssl req -config intermediate/openssl.cnf \
-key intermediate/private/test.example.com.key.pem \
-new -sha256 -out intermediate/csr/test.example.com.csr.pem
# openssl ca -config intermediate/openssl.cnf \
-extensions server_cert -days 375 -notext -md sha256 \
-in intermediate/csr/test.example.com.csr.pem \
-out intermediate/certs/test.example.com.cert.pem
</pre></div>
</dd>
</dl>
<p>Запустим ответчик OCSP на локальной машине. Вместо того, чтобы хранить статус отзыва в отдельном CRL файле ответчик OCSP напрямую читает файл index.txt. Ответ подписывается криптографической парой OCSP (используя опции –rkey и –rsigner).
</p><div class="display">
<pre class="display"># openssl ocsp -port 127.0.0.1:2560 -text -sha256 \
-index intermediate/index.txt \
-CA intermediate/certs/ca-chain.cert.pem \
-rkey intermediate/private/ocsp.example.com.key.pem \
-rsigner intermediate/certs/ocsp.example.com.cert.pem \
-nrequest 1
Enter pass phrase for ocsp.example.com.key.pem: secretpassword
</pre></div>
<p>В другом терминале пошлем запрос к OCSP ответчику. Опция –cert указывает сертификат для запроса.
</p><div class="display">
<pre class="display"># openssl ocsp -CAfile intermediate/certs/ca-chain.cert.pem \
-url http://127.0.0.1:2560 -resp_text \
-issuer intermediate/certs/intermediate.cert.pem \
-cert intermediate/certs/test.example.com.cert.pem

Начало вывода показывает следующее:

    был ли получен положительный ответ (OCSP Response Status)
    идентичность ответчика (Responder Id)
    статус отзыва сертификата (Cert Status)

OCSP Response Data:
OCSP Response Status: successful (0x0)
Response Type: Basic OCSP Response
Version: 1 (0x0)
Responder Id: ... CN = ocsp.example.com
Produced At: Apr 11 12:59:51 2015 GMT
Responses:
Certificate ID:
Hash Algorithm: sha1
Issuer Name Hash: E35979B6D0A973EBE8AEDED75D8C27D67D2A0334
Issuer Key Hash: 69E8EC547F252360E5B6E77261F1D4B921D445E9
Serial Number: 1003
Cert Status: good
This Update: Apr 11 12:59:51 2015 GMT
</pre></div>
</dd>
<dt>Отзыв сертификата.</dt>
<dd><div class="display">
<pre class="display"># openssl ca -config intermediate/openssl.cnf \
-revoke intermediate/certs/test.example.com.cert.pem
Enter pass phrase for intermediate.key.pem: secretpassword
Revoking Certificate 1003.
Data Base Updated
</pre></div>
<p>Как и раньше, запускаем ответчик OCSP в другом терминале и шлем запрос. В этот раз вывод показывает &quot;Cert Status: revoked&quot; и &quot;Revocation Time&quot;.
</p><div class="display">
<pre class="display">OCSP Response Data:
OCSP Response Status: successful (0x0)
Response Type: Basic OCSP Response
Version: 1 (0x0)
Responder Id: ... CN = ocsp.example.com
Produced At: Apr 11 13:03:00 2015 GMT
Responses:
Certificate ID:
Hash Algorithm: sha1
Issuer Name Hash: E35979B6D0A973EBE8AEDED75D8C27D67D2A0334
Issuer Key Hash: 69E8EC547F252360E5B6E77261F1D4B921D445E9
Serial Number: 1003
Cert Status: revoked
Revocation Time: Apr 11 13:01:09 2015 GMT
This Update: Apr 11 13:03:00 2015 GMT
</pre></div>
</dd>
</dl>
<hr>



</body>
</html>
